/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dt=globalThis,He=dt.trustedTypes,Ut=He?He.createPolicy("lit-html",{createHTML:s=>s}):void 0,on="$lit$",Y=`lit$${Math.random().toFixed(9).slice(2)}$`,sn="?"+Y,Hn=`<${sn}>`,K=document,Se=()=>K.createComment(""),Ce=s=>s===null||typeof s!="object"&&typeof s!="function",ft=Array.isArray,Un=s=>ft(s)||typeof s?.[Symbol.iterator]=="function",nt=`[ 	
\f\r]`,pe=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ft=/-->/g,Bt=/>/g,X=RegExp(`>|${nt}(?:([^\\s"'>=/]+)(${nt}*=${nt}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),zt=/'/g,Wt=/"/g,rn=/^(?:script|style|textarea|title)$/i,Fn=s=>(e,...t)=>({_$litType$:s,strings:e,values:t}),Z=Fn(1),Q=Symbol.for("lit-noChange"),N=Symbol.for("lit-nothing"),Gt=new WeakMap,q=K.createTreeWalker(K,129);function an(s,e){if(!ft(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ut!==void 0?Ut.createHTML(e):e}const Bn=(s,e)=>{const t=s.length-1,i=[];let o,a=e===2?"<svg>":e===3?"<math>":"",l=pe;for(let p=0;p<t;p++){const u=s[p];let h,A,d=-1,g=0;for(;g<u.length&&(l.lastIndex=g,A=l.exec(u),A!==null);)g=l.lastIndex,l===pe?A[1]==="!--"?l=Ft:A[1]!==void 0?l=Bt:A[2]!==void 0?(rn.test(A[2])&&(o=RegExp("</"+A[2],"g")),l=X):A[3]!==void 0&&(l=X):l===X?A[0]===">"?(l=o??pe,d=-1):A[1]===void 0?d=-2:(d=l.lastIndex-A[2].length,h=A[1],l=A[3]===void 0?X:A[3]==='"'?Wt:zt):l===Wt||l===zt?l=X:l===Ft||l===Bt?l=pe:(l=X,o=void 0);const E=l===X&&s[p+1].startsWith("/>")?" ":"";a+=l===pe?u+Hn:d>=0?(i.push(h),u.slice(0,d)+on+u.slice(d)+Y+E):u+Y+(d===-2?p:E)}return[an(s,a+(s[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class be{constructor({strings:e,_$litType$:t},i){let o;this.parts=[];let a=0,l=0;const p=e.length-1,u=this.parts,[h,A]=Bn(e,t);if(this.el=be.createElement(h,i),q.currentNode=this.el.content,t===2||t===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(o=q.nextNode())!==null&&u.length<p;){if(o.nodeType===1){if(o.hasAttributes())for(const d of o.getAttributeNames())if(d.endsWith(on)){const g=A[l++],E=o.getAttribute(d).split(Y),_=/([.?@])?(.*)/.exec(g);u.push({type:1,index:a,name:_[2],strings:E,ctor:_[1]==="."?Wn:_[1]==="?"?Gn:_[1]==="@"?Yn:Fe}),o.removeAttribute(d)}else d.startsWith(Y)&&(u.push({type:6,index:a}),o.removeAttribute(d));if(rn.test(o.tagName)){const d=o.textContent.split(Y),g=d.length-1;if(g>0){o.textContent=He?He.emptyScript:"";for(let E=0;E<g;E++)o.append(d[E],Se()),q.nextNode(),u.push({type:2,index:++a});o.append(d[g],Se())}}}else if(o.nodeType===8)if(o.data===sn)u.push({type:2,index:a});else{let d=-1;for(;(d=o.data.indexOf(Y,d+1))!==-1;)u.push({type:7,index:a}),d+=Y.length-1}a++}}static createElement(e,t){const i=K.createElement("template");return i.innerHTML=e,i}}function re(s,e,t=s,i){if(e===Q)return e;let o=i!==void 0?t._$Co?.[i]:t._$Cl;const a=Ce(e)?void 0:e._$litDirective$;return o?.constructor!==a&&(o?._$AO?.(!1),a===void 0?o=void 0:(o=new a(s),o._$AT(s,t,i)),i!==void 0?(t._$Co??=[])[i]=o:t._$Cl=o),o!==void 0&&(e=re(s,o._$AS(s,e.values),o,i)),e}let zn=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,o=(e?.creationScope??K).importNode(t,!0);q.currentNode=o;let a=q.nextNode(),l=0,p=0,u=i[0];for(;u!==void 0;){if(l===u.index){let h;u.type===2?h=new ae(a,a.nextSibling,this,e):u.type===1?h=new u.ctor(a,u.name,u.strings,this,e):u.type===6&&(h=new jn(a,this,e)),this._$AV.push(h),u=i[++p]}l!==u?.index&&(a=q.nextNode(),l++)}return q.currentNode=K,o}p(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}};class ae{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,i,o){this.type=2,this._$AH=N,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=re(this,e,t),Ce(e)?e===N||e==null||e===""?(this._$AH!==N&&this._$AR(),this._$AH=N):e!==this._$AH&&e!==Q&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Un(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==N&&Ce(this._$AH)?this._$AA.nextSibling.data=e:this.T(K.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:i}=e,o=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=be.createElement(an(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===o)this._$AH.p(t);else{const a=new zn(o,this),l=a.u(this.options);a.p(t),this.T(l),this._$AH=a}}_$AC(e){let t=Gt.get(e.strings);return t===void 0&&Gt.set(e.strings,t=new be(e)),t}k(e){ft(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,o=0;for(const a of e)o===t.length?t.push(i=new ae(this.O(Se()),this.O(Se()),this,this.options)):i=t[o],i._$AI(a),o++;o<t.length&&(this._$AR(i&&i._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class Fe{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,o,a){this.type=1,this._$AH=N,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=a,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=N}_$AI(e,t=this,i,o){const a=this.strings;let l=!1;if(a===void 0)e=re(this,e,t,0),l=!Ce(e)||e!==this._$AH&&e!==Q,l&&(this._$AH=e);else{const p=e;let u,h;for(e=a[0],u=0;u<a.length-1;u++)h=re(this,p[i+u],t,u),h===Q&&(h=this._$AH[u]),l||=!Ce(h)||h!==this._$AH[u],h===N?e=N:e!==N&&(e+=(h??"")+a[u+1]),this._$AH[u]=h}l&&!o&&this.j(e)}j(e){e===N?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Wn extends Fe{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===N?void 0:e}}class Gn extends Fe{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==N)}}class Yn extends Fe{constructor(e,t,i,o,a){super(e,t,i,o,a),this.type=5}_$AI(e,t=this){if((e=re(this,e,t,0)??N)===Q)return;const i=this._$AH,o=e===N&&i!==N||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==N&&(i===N||o);o&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class jn{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){re(this,e)}}const Xn={I:ae},Vn=dt.litHtmlPolyfillSupport;Vn?.(be,ae),(dt.litHtmlVersions??=[]).push("3.3.1");const qn=(s,e,t)=>{const i=e;let o=i._$litPart$;return o===void 0&&(i._$litPart$=o=new ae(e.insertBefore(Se(),null),null,void 0,{})),o._$AI(s),o};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:ln,setPrototypeOf:Yt,isFrozen:Kn,getPrototypeOf:Zn,getOwnPropertyDescriptor:Qn}=Object;let{freeze:w,seal:k,create:cn}=Object,{apply:ct,construct:ut}=typeof Reflect<"u"&&Reflect;w||(w=function(e){return e});k||(k=function(e){return e});ct||(ct=function(e,t,i){return e.apply(t,i)});ut||(ut=function(e,t){return new e(...t)});const De=$(Array.prototype.forEach),Jn=$(Array.prototype.lastIndexOf),jt=$(Array.prototype.pop),ge=$(Array.prototype.push),ei=$(Array.prototype.splice),Pe=$(String.prototype.toLowerCase),it=$(String.prototype.toString),Xt=$(String.prototype.match),Ee=$(String.prototype.replace),ti=$(String.prototype.indexOf),ni=$(String.prototype.trim),H=$(Object.prototype.hasOwnProperty),I=$(RegExp.prototype.test),Ae=ii(TypeError);function $(s){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return ct(s,e,i)}}function ii(s){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return ut(s,t)}}function f(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pe;Yt&&Yt(s,null);let i=e.length;for(;i--;){let o=e[i];if(typeof o=="string"){const a=t(o);a!==o&&(Kn(e)||(e[i]=a),o=a)}s[o]=!0}return s}function oi(s){for(let e=0;e<s.length;e++)H(s,e)||(s[e]=null);return s}function W(s){const e=cn(null);for(const[t,i]of ln(s))H(s,t)&&(Array.isArray(i)?e[t]=oi(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=W(i):e[t]=i);return e}function _e(s,e){for(;s!==null;){const i=Qn(s,e);if(i){if(i.get)return $(i.get);if(typeof i.value=="function")return $(i.value)}s=Zn(s)}function t(){return null}return t}const Vt=w(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ot=w(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),st=w(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),si=w(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),rt=w(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ri=w(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),qt=w(["#text"]),Kt=w(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),at=w(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Zt=w(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ke=w(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ai=k(/\{\{[\w\W]*|[\w\W]*\}\}/gm),li=k(/<%[\w\W]*|[\w\W]*%>/gm),ci=k(/\$\{[\w\W]*/gm),ui=k(/^data-[\-\w.\u00B7-\uFFFF]+$/),mi=k(/^aria-[\-\w]+$/),un=k(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),di=k(/^(?:\w+script|data):/i),fi=k(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mn=k(/^html$/i),hi=k(/^[a-z][.\w]*(-[.\w]+)+$/i);var Qt=Object.freeze({__proto__:null,ARIA_ATTR:mi,ATTR_WHITESPACE:fi,CUSTOM_ELEMENT:hi,DATA_ATTR:ui,DOCTYPE_NAME:mn,ERB_EXPR:li,IS_ALLOWED_URI:un,IS_SCRIPT_OR_DATA:di,MUSTACHE_EXPR:ai,TMPLIT_EXPR:ci});const Te={element:1,text:3,progressingInstruction:7,comment:8,document:9},pi=function(){return typeof window>"u"?null:window},gi=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const o="data-tt-policy-suffix";t&&t.hasAttribute(o)&&(i=t.getAttribute(o));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Jt=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function dn(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pi();const e=m=>dn(m);if(e.version="3.2.6",e.removed=[],!s||!s.document||s.document.nodeType!==Te.document||!s.Element)return e.isSupported=!1,e;let{document:t}=s;const i=t,o=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:l,Node:p,Element:u,NodeFilter:h,NamedNodeMap:A=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:d,DOMParser:g,trustedTypes:E}=s,_=u.prototype,P=_e(_,"cloneNode"),ce=_e(_,"remove"),Le=_e(_,"nextSibling"),yn=_e(_,"childNodes"),ve=_e(_,"parentNode");if(typeof l=="function"){const m=t.createElement("template");m.content&&m.content.ownerDocument&&(t=m.content.ownerDocument)}let O,ue="";const{implementation:Be,createNodeIterator:Nn,createDocumentFragment:Sn,getElementsByTagName:Cn}=t,{importNode:bn}=i;let M=Jt();e.isSupported=typeof ln=="function"&&typeof ve=="function"&&Be&&Be.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ze,ERB_EXPR:We,TMPLIT_EXPR:Ge,DATA_ATTR:Ln,ARIA_ATTR:vn,IS_SCRIPT_OR_DATA:Rn,ATTR_WHITESPACE:ht,CUSTOM_ELEMENT:On}=Qt;let{IS_ALLOWED_URI:pt}=Qt,C=null;const gt=f({},[...Vt,...ot,...st,...rt,...qt]);let L=null;const Et=f({},[...Kt,...at,...Zt,...ke]);let y=Object.seal(cn(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),me=null,Ye=null,At=!0,je=!0,_t=!1,Tt=!0,J=!1,Re=!0,j=!1,Xe=!1,Ve=!1,ee=!1,Oe=!1,Me=!1,yt=!0,Nt=!1;const Mn="user-content-";let qe=!0,de=!1,te={},ne=null;const St=f({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ct=null;const bt=f({},["audio","video","img","source","image","track"]);let Ke=null;const Lt=f({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ie="http://www.w3.org/1998/Math/MathML",we="http://www.w3.org/2000/svg",F="http://www.w3.org/1999/xhtml";let ie=F,Ze=!1,Qe=null;const In=f({},[Ie,we,F],it);let $e=f({},["mi","mo","mn","ms","mtext"]),xe=f({},["annotation-xml"]);const wn=f({},["title","style","font","a","script"]);let fe=null;const $n=["application/xhtml+xml","text/html"],xn="text/html";let b=null,oe=null;const Dn=t.createElement("form"),vt=function(n){return n instanceof RegExp||n instanceof Function},Je=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(oe&&oe===n)){if((!n||typeof n!="object")&&(n={}),n=W(n),fe=$n.indexOf(n.PARSER_MEDIA_TYPE)===-1?xn:n.PARSER_MEDIA_TYPE,b=fe==="application/xhtml+xml"?it:Pe,C=H(n,"ALLOWED_TAGS")?f({},n.ALLOWED_TAGS,b):gt,L=H(n,"ALLOWED_ATTR")?f({},n.ALLOWED_ATTR,b):Et,Qe=H(n,"ALLOWED_NAMESPACES")?f({},n.ALLOWED_NAMESPACES,it):In,Ke=H(n,"ADD_URI_SAFE_ATTR")?f(W(Lt),n.ADD_URI_SAFE_ATTR,b):Lt,Ct=H(n,"ADD_DATA_URI_TAGS")?f(W(bt),n.ADD_DATA_URI_TAGS,b):bt,ne=H(n,"FORBID_CONTENTS")?f({},n.FORBID_CONTENTS,b):St,me=H(n,"FORBID_TAGS")?f({},n.FORBID_TAGS,b):W({}),Ye=H(n,"FORBID_ATTR")?f({},n.FORBID_ATTR,b):W({}),te=H(n,"USE_PROFILES")?n.USE_PROFILES:!1,At=n.ALLOW_ARIA_ATTR!==!1,je=n.ALLOW_DATA_ATTR!==!1,_t=n.ALLOW_UNKNOWN_PROTOCOLS||!1,Tt=n.ALLOW_SELF_CLOSE_IN_ATTR!==!1,J=n.SAFE_FOR_TEMPLATES||!1,Re=n.SAFE_FOR_XML!==!1,j=n.WHOLE_DOCUMENT||!1,ee=n.RETURN_DOM||!1,Oe=n.RETURN_DOM_FRAGMENT||!1,Me=n.RETURN_TRUSTED_TYPE||!1,Ve=n.FORCE_BODY||!1,yt=n.SANITIZE_DOM!==!1,Nt=n.SANITIZE_NAMED_PROPS||!1,qe=n.KEEP_CONTENT!==!1,de=n.IN_PLACE||!1,pt=n.ALLOWED_URI_REGEXP||un,ie=n.NAMESPACE||F,$e=n.MATHML_TEXT_INTEGRATION_POINTS||$e,xe=n.HTML_INTEGRATION_POINTS||xe,y=n.CUSTOM_ELEMENT_HANDLING||{},n.CUSTOM_ELEMENT_HANDLING&&vt(n.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(y.tagNameCheck=n.CUSTOM_ELEMENT_HANDLING.tagNameCheck),n.CUSTOM_ELEMENT_HANDLING&&vt(n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(y.attributeNameCheck=n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),n.CUSTOM_ELEMENT_HANDLING&&typeof n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(y.allowCustomizedBuiltInElements=n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(je=!1),Oe&&(ee=!0),te&&(C=f({},qt),L=[],te.html===!0&&(f(C,Vt),f(L,Kt)),te.svg===!0&&(f(C,ot),f(L,at),f(L,ke)),te.svgFilters===!0&&(f(C,st),f(L,at),f(L,ke)),te.mathMl===!0&&(f(C,rt),f(L,Zt),f(L,ke))),n.ADD_TAGS&&(C===gt&&(C=W(C)),f(C,n.ADD_TAGS,b)),n.ADD_ATTR&&(L===Et&&(L=W(L)),f(L,n.ADD_ATTR,b)),n.ADD_URI_SAFE_ATTR&&f(Ke,n.ADD_URI_SAFE_ATTR,b),n.FORBID_CONTENTS&&(ne===St&&(ne=W(ne)),f(ne,n.FORBID_CONTENTS,b)),qe&&(C["#text"]=!0),j&&f(C,["html","head","body"]),C.table&&(f(C,["tbody"]),delete me.tbody),n.TRUSTED_TYPES_POLICY){if(typeof n.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ae('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof n.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ae('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');O=n.TRUSTED_TYPES_POLICY,ue=O.createHTML("")}else O===void 0&&(O=gi(E,o)),O!==null&&typeof ue=="string"&&(ue=O.createHTML(""));w&&w(n),oe=n}},Rt=f({},[...ot,...st,...si]),Ot=f({},[...rt,...ri]),kn=function(n){let r=ve(n);(!r||!r.tagName)&&(r={namespaceURI:ie,tagName:"template"});const c=Pe(n.tagName),T=Pe(r.tagName);return Qe[n.namespaceURI]?n.namespaceURI===we?r.namespaceURI===F?c==="svg":r.namespaceURI===Ie?c==="svg"&&(T==="annotation-xml"||$e[T]):!!Rt[c]:n.namespaceURI===Ie?r.namespaceURI===F?c==="math":r.namespaceURI===we?c==="math"&&xe[T]:!!Ot[c]:n.namespaceURI===F?r.namespaceURI===we&&!xe[T]||r.namespaceURI===Ie&&!$e[T]?!1:!Ot[c]&&(wn[c]||!Rt[c]):!!(fe==="application/xhtml+xml"&&Qe[n.namespaceURI]):!1},U=function(n){ge(e.removed,{element:n});try{ve(n).removeChild(n)}catch{ce(n)}},se=function(n,r){try{ge(e.removed,{attribute:r.getAttributeNode(n),from:r})}catch{ge(e.removed,{attribute:null,from:r})}if(r.removeAttribute(n),n==="is")if(ee||Oe)try{U(r)}catch{}else try{r.setAttribute(n,"")}catch{}},Mt=function(n){let r=null,c=null;if(Ve)n="<remove></remove>"+n;else{const S=Xt(n,/^[\r\n\t ]+/);c=S&&S[0]}fe==="application/xhtml+xml"&&ie===F&&(n='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+n+"</body></html>");const T=O?O.createHTML(n):n;if(ie===F)try{r=new g().parseFromString(T,fe)}catch{}if(!r||!r.documentElement){r=Be.createDocument(ie,"template",null);try{r.documentElement.innerHTML=Ze?ue:T}catch{}}const v=r.body||r.documentElement;return n&&c&&v.insertBefore(t.createTextNode(c),v.childNodes[0]||null),ie===F?Cn.call(r,j?"html":"body")[0]:j?r.documentElement:v},It=function(n){return Nn.call(n.ownerDocument||n,n,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},et=function(n){return n instanceof d&&(typeof n.nodeName!="string"||typeof n.textContent!="string"||typeof n.removeChild!="function"||!(n.attributes instanceof A)||typeof n.removeAttribute!="function"||typeof n.setAttribute!="function"||typeof n.namespaceURI!="string"||typeof n.insertBefore!="function"||typeof n.hasChildNodes!="function")},wt=function(n){return typeof p=="function"&&n instanceof p};function B(m,n,r){De(m,c=>{c.call(e,n,r,oe)})}const $t=function(n){let r=null;if(B(M.beforeSanitizeElements,n,null),et(n))return U(n),!0;const c=b(n.nodeName);if(B(M.uponSanitizeElement,n,{tagName:c,allowedTags:C}),Re&&n.hasChildNodes()&&!wt(n.firstElementChild)&&I(/<[/\w!]/g,n.innerHTML)&&I(/<[/\w!]/g,n.textContent)||n.nodeType===Te.progressingInstruction||Re&&n.nodeType===Te.comment&&I(/<[/\w]/g,n.data))return U(n),!0;if(!C[c]||me[c]){if(!me[c]&&Dt(c)&&(y.tagNameCheck instanceof RegExp&&I(y.tagNameCheck,c)||y.tagNameCheck instanceof Function&&y.tagNameCheck(c)))return!1;if(qe&&!ne[c]){const T=ve(n)||n.parentNode,v=yn(n)||n.childNodes;if(v&&T){const S=v.length;for(let x=S-1;x>=0;--x){const z=P(v[x],!0);z.__removalCount=(n.__removalCount||0)+1,T.insertBefore(z,Le(n))}}}return U(n),!0}return n instanceof u&&!kn(n)||(c==="noscript"||c==="noembed"||c==="noframes")&&I(/<\/no(script|embed|frames)/i,n.innerHTML)?(U(n),!0):(J&&n.nodeType===Te.text&&(r=n.textContent,De([ze,We,Ge],T=>{r=Ee(r,T," ")}),n.textContent!==r&&(ge(e.removed,{element:n.cloneNode()}),n.textContent=r)),B(M.afterSanitizeElements,n,null),!1)},xt=function(n,r,c){if(yt&&(r==="id"||r==="name")&&(c in t||c in Dn))return!1;if(!(je&&!Ye[r]&&I(Ln,r))){if(!(At&&I(vn,r))){if(!L[r]||Ye[r]){if(!(Dt(n)&&(y.tagNameCheck instanceof RegExp&&I(y.tagNameCheck,n)||y.tagNameCheck instanceof Function&&y.tagNameCheck(n))&&(y.attributeNameCheck instanceof RegExp&&I(y.attributeNameCheck,r)||y.attributeNameCheck instanceof Function&&y.attributeNameCheck(r))||r==="is"&&y.allowCustomizedBuiltInElements&&(y.tagNameCheck instanceof RegExp&&I(y.tagNameCheck,c)||y.tagNameCheck instanceof Function&&y.tagNameCheck(c))))return!1}else if(!Ke[r]){if(!I(pt,Ee(c,ht,""))){if(!((r==="src"||r==="xlink:href"||r==="href")&&n!=="script"&&ti(c,"data:")===0&&Ct[n])){if(!(_t&&!I(Rn,Ee(c,ht,"")))){if(c)return!1}}}}}}return!0},Dt=function(n){return n!=="annotation-xml"&&Xt(n,On)},kt=function(n){B(M.beforeSanitizeAttributes,n,null);const{attributes:r}=n;if(!r||et(n))return;const c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:L,forceKeepAttr:void 0};let T=r.length;for(;T--;){const v=r[T],{name:S,namespaceURI:x,value:z}=v,he=b(S),tt=z;let R=S==="value"?tt:ni(tt);if(c.attrName=he,c.attrValue=R,c.keepAttr=!0,c.forceKeepAttr=void 0,B(M.uponSanitizeAttribute,n,c),R=c.attrValue,Nt&&(he==="id"||he==="name")&&(se(S,n),R=Mn+R),Re&&I(/((--!?|])>)|<\/(style|title)/i,R)){se(S,n);continue}if(c.forceKeepAttr)continue;if(!c.keepAttr){se(S,n);continue}if(!Tt&&I(/\/>/i,R)){se(S,n);continue}J&&De([ze,We,Ge],Ht=>{R=Ee(R,Ht," ")});const Pt=b(n.nodeName);if(!xt(Pt,he,R)){se(S,n);continue}if(O&&typeof E=="object"&&typeof E.getAttributeType=="function"&&!x)switch(E.getAttributeType(Pt,he)){case"TrustedHTML":{R=O.createHTML(R);break}case"TrustedScriptURL":{R=O.createScriptURL(R);break}}if(R!==tt)try{x?n.setAttributeNS(x,S,R):n.setAttribute(S,R),et(n)?U(n):jt(e.removed)}catch{se(S,n)}}B(M.afterSanitizeAttributes,n,null)},Pn=function m(n){let r=null;const c=It(n);for(B(M.beforeSanitizeShadowDOM,n,null);r=c.nextNode();)B(M.uponSanitizeShadowNode,r,null),$t(r),kt(r),r.content instanceof a&&m(r.content);B(M.afterSanitizeShadowDOM,n,null)};return e.sanitize=function(m){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=null,c=null,T=null,v=null;if(Ze=!m,Ze&&(m="<!-->"),typeof m!="string"&&!wt(m))if(typeof m.toString=="function"){if(m=m.toString(),typeof m!="string")throw Ae("dirty is not a string, aborting")}else throw Ae("toString is not a function");if(!e.isSupported)return m;if(Xe||Je(n),e.removed=[],typeof m=="string"&&(de=!1),de){if(m.nodeName){const z=b(m.nodeName);if(!C[z]||me[z])throw Ae("root node is forbidden and cannot be sanitized in-place")}}else if(m instanceof p)r=Mt("<!---->"),c=r.ownerDocument.importNode(m,!0),c.nodeType===Te.element&&c.nodeName==="BODY"||c.nodeName==="HTML"?r=c:r.appendChild(c);else{if(!ee&&!J&&!j&&m.indexOf("<")===-1)return O&&Me?O.createHTML(m):m;if(r=Mt(m),!r)return ee?null:Me?ue:""}r&&Ve&&U(r.firstChild);const S=It(de?m:r);for(;T=S.nextNode();)$t(T),kt(T),T.content instanceof a&&Pn(T.content);if(de)return m;if(ee){if(Oe)for(v=Sn.call(r.ownerDocument);r.firstChild;)v.appendChild(r.firstChild);else v=r;return(L.shadowroot||L.shadowrootmode)&&(v=bn.call(i,v,!0)),v}let x=j?r.outerHTML:r.innerHTML;return j&&C["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&I(mn,r.ownerDocument.doctype.name)&&(x="<!DOCTYPE "+r.ownerDocument.doctype.name+`>
`+x),J&&De([ze,We,Ge],z=>{x=Ee(x,z," ")}),O&&Me?O.createHTML(x):x},e.setConfig=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Je(m),Xe=!0},e.clearConfig=function(){oe=null,Xe=!1},e.isValidAttribute=function(m,n,r){oe||Je({});const c=b(m),T=b(n);return xt(c,T,r)},e.addHook=function(m,n){typeof n=="function"&&ge(M[m],n)},e.removeHook=function(m,n){if(n!==void 0){const r=Jn(M[m],n);return r===-1?void 0:ei(M[m],r,1)[0]}return jt(M[m])},e.removeHooks=function(m){M[m]=[]},e.removeAllHooks=function(){M=Jt()},e}var Ei=dn();class le{static createFromRenderer(e,...t){const i=document.createElement("div");return qn(e(...t),i),i.firstElementChild}static sanitizeHTML(e){return Ei.sanitize(e)}}class Ai{static onClickOnPageBody(e){document.body.addEventListener("click",t=>{queueMicrotask(()=>{e(t)})})}}var G=(s=>(s.BOLD="bold",s.ITALIC="italic",s.UNDERLINE="underline",s.STRIKE_THROUGH="strike-through",s))(G||{}),Ue=(s=>(s.NUMBERED_LIST="numbered-list",s.BULLET_LIST="bullet-list",s))(Ue||{});class fn{static getClosestElementOfNode(e,t){let i=e;const o=D.getContentElement();for(;i&&o.contains(i);){if(t(i))return i;i=i.parentNode}return null}static getTopBlockElementFromNode(e){let t=e,i=null;const o=D.getContentElement(),a=D.getContentElementName();for(;t&&o.contains(t);)if(t=t.closest("p"),t.parentElement?.classList.contains(a)){i=t;break}return i?.tagName!=="P"?null:i}}class _i{constructor(){this.currentTagName="",this.isNowEmptyLine=!1}setCurrentTagName(e){this.currentTagName=e===Ue.NUMBERED_LIST?"OL":"UL"}setIsNowEmptyLine(e){this.isNowEmptyLine=e}getClosestListLineElement(e){if(!e||e.rangeCount===0)return null;let t=e.anchorNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);const i=t&&t.closest("li");return D.getContentElement().contains(i)?i:null}createNewLine(e,t){const o=t.getRangeAt(0).extractContents(),a=document.createElement("li");o.textContent?a.appendChild(o):a.innerHTML="<br>",e.insertAdjacentElement("afterend",a);const l=document.createRange();l.setStart(a,0),l.collapse(!0),t.removeAllRanges(),t.addRange(l)}isOnEmptyLine(e){return e.innerHTML==="<br>"||e.innerHTML===""}deleteLine(e){e.remove(),D.insertNewTopBlockElementAndFocusCaret()}isOnListLine(){return!!this.currentTagName}wrapTopBlockByListingLine(e){const t=e.childNodes,i=document.createElement(this.currentTagName),o=document.createElement("li");o.innerHTML="<br>",o.replaceChildren(...t),i.appendChild(o),e.replaceChildren(i)}makeListing(e){const t=this.getClosestListLineElement(e);if(t)this.isOnEmptyLine(t)?this.deleteLine(t):this.createNewLine(t,e);else{const i=e.anchorNode,o=fn.getTopBlockElementFromNode(i.nodeType===Node.TEXT_NODE?i.parentNode:i);o&&this.wrapTopBlockByListingLine(o)}}makeListingOnToolbarButtonClick(e){const t=D.checkIsFocusingInEditorContent();!t||t.rangeCount===0||(this.setCurrentTagName(e),this.makeListing(t))}makeListingOnKeyboardEvent(e){if(e.key==="Enter"||e.key==="Backspace"){e.preventDefault();const t=D.checkIsFocusingInEditorContent();if(!t||t.rangeCount===0)return;this.makeListing(t)}}onAction(e,t){e?this.makeListingOnToolbarButtonClick(e):t&&this.isOnListLine()&&this.makeListingOnKeyboardEvent(t)}}const hn=new _i;class Ti{constructor(){this.contentElementName="NAME-editor-content",this.topBlockElementTagName="P",this.contentElement=this.initContentEl(),this.initEventListeners()}getContentElementName(){return this.contentElementName}initContentEl(){const e=()=>Z`
        <div
          class="${this.contentElementName} p-4 min-h-[300px] outline-none"
          contenteditable="true"
          spellcheck="false"
        ></div>
      `;return le.createFromRenderer(e)}bindKeydownEventListener(){this.contentElement.addEventListener("keydown",e=>{queueMicrotask(()=>{hn.onAction(void 0,e)})})}initEventListeners(){this.bindKeydownEventListener()}getContentElement(){return this.contentElement}checkIsFocusingInEditorContent(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return!t||!this.contentElement.contains(t)?null:e}insertNewTopBlockElementAndFocusCaret(){const e=document.createElement(this.topBlockElementTagName);e.innerHTML="<br>",this.contentElement.appendChild(e);const t=document.createRange();t.selectNodeContents(e),t.collapse(!0);const i=window.getSelection();return i&&(i.removeAllRanges(),i.addRange(t)),this.contentElement.focus(),e}}const D=new Ti;class yi{constructor(){this.frameEl=this.initFrameEl()}initFrameEl(){const e=()=>Z`<div class="editor-frame w-full max-w-3xl mx-auto border rounded-lg shadow bg-white"></div>`;return le.createFromRenderer(e)}getFrameElement(){return this.frameEl}}const ye=new yi;class pn{constructor(e){this.element=e,this.command=e.getAttribute("data-command")||"",this.value=e.getAttribute("data-value")||void 0}onClick(e){this.element.addEventListener("click",()=>{e(this.command,this.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gn={CHILD:2},En=s=>(...e)=>({_$litDirective$:s,values:e});class An{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:Ni}=Xn,en=()=>document.createComment(""),Ne=(s,e,t)=>{const i=s._$AA.parentNode,o=e===void 0?s._$AB:e._$AA;if(t===void 0){const a=i.insertBefore(en(),o),l=i.insertBefore(en(),o);t=new Ni(a,l,s,s.options)}else{const a=t._$AB.nextSibling,l=t._$AM,p=l!==s;if(p){let u;t._$AQ?.(s),t._$AM=s,t._$AP!==void 0&&(u=s._$AU)!==l._$AU&&t._$AP(u)}if(a!==o||p){let u=t._$AA;for(;u!==a;){const h=u.nextSibling;i.insertBefore(u,o),u=h}}}return t},V=(s,e,t=s)=>(s._$AI(e,t),s),Si={},Ci=(s,e=Si)=>s._$AH=e,bi=s=>s._$AH,lt=s=>{s._$AR(),s._$AA.remove()};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tn=(s,e,t)=>{const i=new Map;for(let o=e;o<=t;o++)i.set(s[o],o);return i},_n=En(class extends An{constructor(s){if(super(s),s.type!==gn.CHILD)throw Error("repeat() can only be used in text expressions")}dt(s,e,t){let i;t===void 0?t=e:e!==void 0&&(i=e);const o=[],a=[];let l=0;for(const p of s)o[l]=i?i(p,l):l,a[l]=t(p,l),l++;return{values:a,keys:o}}render(s,e,t){return this.dt(s,e,t).values}update(s,[e,t,i]){const o=bi(s),{values:a,keys:l}=this.dt(e,t,i);if(!Array.isArray(o))return this.ut=l,a;const p=this.ut??=[],u=[];let h,A,d=0,g=o.length-1,E=0,_=a.length-1;for(;d<=g&&E<=_;)if(o[d]===null)d++;else if(o[g]===null)g--;else if(p[d]===l[E])u[E]=V(o[d],a[E]),d++,E++;else if(p[g]===l[_])u[_]=V(o[g],a[_]),g--,_--;else if(p[d]===l[_])u[_]=V(o[d],a[_]),Ne(s,u[_+1],o[d]),d++,_--;else if(p[g]===l[E])u[E]=V(o[g],a[E]),Ne(s,o[d],o[g]),g--,E++;else if(h===void 0&&(h=tn(l,E,_),A=tn(p,d,g)),h.has(p[d]))if(h.has(p[g])){const P=A.get(l[E]),ce=P!==void 0?o[P]:null;if(ce===null){const Le=Ne(s,o[d]);V(Le,a[E]),u[E]=Le}else u[E]=V(ce,a[E]),Ne(s,o[d],ce),o[P]=null;E++}else lt(o[g]),g--;else lt(o[d]),d++;for(;E<=_;){const P=Ne(s,u[_+1]);V(P,a[E]),u[E++]=P}for(;d<=g;){const P=o[d++];P!==null&&lt(P)}return this.ut=l,Ci(s,u),Q}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class mt extends An{constructor(e){if(super(e),this.it=N,e.type!==gn.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===N||e==null)return this._t=void 0,this.it=e;if(e===Q)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const t=[e];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}}mt.directiveName="unsafeHTML",mt.resultType=1;const Tn=En(mt);class Li{constructor(){this.currentStylingType=null,this.parentStylingElement=null,this.tagNamesForStyling={[G.BOLD]:["B","STRONG"],[G.ITALIC]:["I","EM"],[G.UNDERLINE]:["U","INS"],[G.STRIKE_THROUGH]:["S","DEL","STRIKE"]}}getAllAvailableTagNames(){return Object.values(this.tagNamesForStyling).flat()}ifTagNameIsCurrentStyling(e){return this.getCurrentStylingTagNames().includes(e)}setCurrentStylingType(e){this.currentStylingType=e}getCurrentStylingTagNames(){return this.tagNamesForStyling[this.currentStylingType]}getCurrentStylingTagName(){return this.getCurrentStylingTagNames()[0]}setParentStylingElement(e){let t=e.startContainer.nodeType===Node.TEXT_NODE?e.startContainer.parentNode:e.startContainer;t&&(this.parentStylingElement=fn.getClosestElementOfNode(t,i=>this.ifTagNameIsCurrentStyling(i.tagName)&&i.contains(e.endContainer)))}mergeAdjacentStyling(e){let t=e.firstChild;for(;t;){const i=t.nextSibling;if(t.nodeType===Node.ELEMENT_NODE&&i&&i.nodeType===Node.ELEMENT_NODE&&this.ifTagNameIsCurrentStyling(t.tagName)&&t.tagName===i.tagName){for(;i.firstChild;)t.appendChild(i.firstChild);e.removeChild(i);continue}t=i}}unstylingFromSelection(e){const t=this.parentStylingElement;if(!t)return;const i=t.ownerDocument,o=t.tagName,a=e.cloneRange(),l=i.createRange();l.setStart(t,0),l.setEnd(a.startContainer,a.startOffset);const p=i.createRange();p.setStart(a.endContainer,a.endOffset),p.setEnd(t,t.childNodes.length);const u=l.cloneContents(),h=a.cloneContents(),A=p.cloneContents(),d=i.createDocumentFragment();if(u.hasChildNodes()){const g=i.createElement(o);g.appendChild(u),d.appendChild(g)}if(h.hasChildNodes()&&d.appendChild(h),A.hasChildNodes()){const g=i.createElement(o);g.appendChild(A),d.appendChild(g)}t.replaceWith(d)}warpContentByStylingTag(e){const t=e.extractContents(),i=document.createElement(this.getCurrentStylingTagName());return i.appendChild(t),e.insertNode(i),i}findDescendantsSameTag(e){const t=e.tagName,i=[];for(const o in this.tagNamesForStyling){const a=this.tagNamesForStyling[o];a.includes(t)&&i.push(...a)}return Array.from(e.querySelectorAll(i.join(",")))}removeOverlapChildTags(e){const t=this.findDescendantsSameTag(e);for(const i of t)i.replaceWith(...i.childNodes)}makeStylingToTextNodeOutsideTags(e){const t=this.getAllAvailableTagNames(),i=e.childNodes;for(const o of i)if(o.nodeType===Node.TEXT_NODE){if(o.textContent.trim()!==""){const a=document.createElement(this.getCurrentStylingTagName());a.appendChild(o.cloneNode(!0)),o.replaceWith(a);return}}else if(o.nodeType===Node.ELEMENT_NODE){const a=o;if(!t.includes(a.tagName))this.makeStylingToTextNodeOutsideTags(a);else continue}}removeEmptyTags(e){const t=e.children;for(const i of t)if(i.innerHTML===""){i.remove();continue}else i.hasChildNodes()&&this.removeEmptyTags(i)}makeStyling(e,t){if(this.setCurrentStylingType(t),this.setParentStylingElement(e),this.parentStylingElement)this.unstylingFromSelection(e);else{const i=this.warpContentByStylingTag(e);this.removeOverlapChildTags(i)}this.parentStylingElement&&this.mergeAdjacentStyling(this.parentStylingElement)}onAction(e){const t=D.checkIsFocusingInEditorContent();if(!t||t.rangeCount===0)return;const i=t.getRangeAt(0);i.collapsed||this.makeStyling(i,e)}}const vi=new Li;class Ri{constructor(){this.actions=[{command:G.BOLD,label:"B",type:"button",className:"font-bold"},{command:G.ITALIC,label:"I",type:"button",className:"italic font-mono text-lg"},{command:G.UNDERLINE,label:"U",type:"button",className:"underline"},{command:G.STRIKE_THROUGH,label:"S",type:"button",className:"line-through"}],this.sectionElement=this.initSectionElement(),this.bindEvents()}getSectionElement(){return this.sectionElement}initSectionElement(){const e=()=>Z`<div class="NAME-text-styling-section flex gap-2">
        ${_n(this.actions,t=>t.command,t=>Z`<button
              class="NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${t.className}"
              data-command="${t.command}"
            >
              ${Tn(t.label)}
            </button>`)}
      </div>`;return le.createFromRenderer(e)}bindButtonEvents(){this.sectionElement.querySelectorAll(".NAME-toolbar-btn").forEach(t=>{new pn(t).onClick(o=>{this.onAction(o)})})}bindEvents(){this.bindButtonEvents()}onAction(e){queueMicrotask(()=>{vi.onAction(e)})}}const Oi=new Ri;class Mi{constructor(){this.actions=[{command:Ue.NUMBERED_LIST,label:'<i class="bi bi-list-ol"></i>',type:"button",className:"text-2xl font-bold"},{command:Ue.BULLET_LIST,label:'<i class="bi bi-list-ul"></i>',type:"button",className:"text-2xl font-bold"}],this.sectionElement=this.initSectionElement(),this.bindEvents()}initSectionElement(){const e=()=>Z`<div class="NAME-text-listing-section flex gap-2">
      ${_n(this.actions,t=>t.command,t=>Z`<button
            class="NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${t.className}"
            data-command="${t.command}"
          >
            ${Tn(t.label)}
          </button>`)}
    </div>`;return le.createFromRenderer(e)}getSectionElement(){return this.sectionElement}bindButtonEvents(){this.sectionElement.querySelectorAll(".NAME-toolbar-btn").forEach(t=>{new pn(t).onClick(o=>{this.onAction(o)})})}bindEvents(){this.bindButtonEvents()}onAction(e){queueMicrotask(()=>{hn.onAction(e)})}}const Ii=new Mi;class wi{constructor(){this.toolbarEl=this.initToolbarEl(),this.toolbarEl.appendChild(Oi.getSectionElement()),this.toolbarEl.appendChild(Ii.getSectionElement())}initToolbarEl(){const e=()=>Z`<div class="editor-toolbar border-b px-2 py-1 flex gap-2 items-stretch"></div>`;return le.createFromRenderer(e)}getToolbarElement(){return this.toolbarEl}}const nn=new wi,$i="codevcn-editor-root";class xi{constructor(e,t="append"){const i=document.getElementById(e);if(!i)throw new Error(`Container with id ${e} not found`);this.editorWrapper=i,ye.getFrameElement().appendChild(nn.getToolbarElement()),ye.getFrameElement().appendChild(D.getContentElement()),t==="append"?this.editorWrapper.appendChild(ye.getFrameElement()):this.editorWrapper.replaceWith(ye.getFrameElement())}getContent(){return D.getContentElement().innerHTML}setContent(e){D.getContentElement().innerHTML=le.sanitizeHTML(e)}getToolbarElement(){return nn.getToolbarElement()}getContentElement(){return D.getContentElement()}getFrameElement(){return ye.getFrameElement()}}const Di=new xi($i),ki=()=>{Di.setContent("<p>Xin chào! Đây là <ins>phần mới</ins> của <b>văn b</b>ản.</p>"),Ai.onClickOnPageBody(s=>{s.target})};ki();
