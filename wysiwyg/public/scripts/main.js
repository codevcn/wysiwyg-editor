/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pt=globalThis,Ue=pt.trustedTypes,Gt=Ue?Ue.createPolicy("lit-html",{createHTML:o=>o}):void 0,an="$lit$",X=`lit$${Math.random().toFixed(9).slice(2)}$`,cn="?"+X,zn=`<${cn}>`,J=document,Se=()=>J.createComment(""),Le=o=>o===null||typeof o!="object"&&typeof o!="function",gt=Array.isArray,Gn=o=>gt(o)||typeof o?.[Symbol.iterator]=="function",ot=`[ 	
\f\r]`,ge=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Wt=/-->/g,qt=/>/g,Q=RegExp(`>|${ot}(?:([^\\s"'>=/]+)(${ot}*=${ot}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Yt=/'/g,jt=/"/g,un=/^(?:script|style|textarea|title)$/i,Wn=o=>(e,...t)=>({_$litType$:o,strings:e,values:t}),F=Wn(1),ee=Symbol.for("lit-noChange"),y=Symbol.for("lit-nothing"),Xt=new WeakMap,Z=J.createTreeWalker(J,129);function mn(o,e){if(!gt(o)||!o.hasOwnProperty("raw"))throw Error("invalid template strings array");return Gt!==void 0?Gt.createHTML(e):e}const qn=(o,e)=>{const t=o.length-1,n=[];let s,r=e===2?"<svg>":e===3?"<math>":"",a=ge;for(let h=0;h<t;h++){const c=o[h];let p,A,d=-1,g=0;for(;g<c.length&&(a.lastIndex=g,A=a.exec(c),A!==null);)g=a.lastIndex,a===ge?A[1]==="!--"?a=Wt:A[1]!==void 0?a=qt:A[2]!==void 0?(un.test(A[2])&&(s=RegExp("</"+A[2],"g")),a=Q):A[3]!==void 0&&(a=Q):a===Q?A[0]===">"?(a=s??ge,d=-1):A[1]===void 0?d=-2:(d=a.lastIndex-A[2].length,p=A[1],a=A[3]===void 0?Q:A[3]==='"'?jt:Yt):a===jt||a===Yt?a=Q:a===Wt||a===qt?a=ge:(a=Q,s=void 0);const E=a===Q&&o[h+1].startsWith("/>")?" ":"";r+=a===ge?c+zn:d>=0?(n.push(p),c.slice(0,d)+an+c.slice(d)+X+E):c+X+(d===-2?h:E)}return[mn(o,r+(o[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class Ce{constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let r=0,a=0;const h=e.length-1,c=this.parts,[p,A]=qn(e,t);if(this.el=Ce.createElement(p,n),Z.currentNode=this.el.content,t===2||t===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Z.nextNode())!==null&&c.length<h;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(an)){const g=A[a++],E=s.getAttribute(d).split(X),T=/([.?@])?(.*)/.exec(g);c.push({type:1,index:r,name:T[2],strings:E,ctor:T[1]==="."?jn:T[1]==="?"?Xn:T[1]==="@"?Kn:Fe}),s.removeAttribute(d)}else d.startsWith(X)&&(c.push({type:6,index:r}),s.removeAttribute(d));if(un.test(s.tagName)){const d=s.textContent.split(X),g=d.length-1;if(g>0){s.textContent=Ue?Ue.emptyScript:"";for(let E=0;E<g;E++)s.append(d[E],Se()),Z.nextNode(),c.push({type:2,index:++r});s.append(d[g],Se())}}}else if(s.nodeType===8)if(s.data===cn)c.push({type:2,index:r});else{let d=-1;for(;(d=s.data.indexOf(X,d+1))!==-1;)c.push({type:7,index:r}),d+=X.length-1}r++}}static createElement(e,t){const n=J.createElement("template");return n.innerHTML=e,n}}function ae(o,e,t=o,n){if(e===ee)return e;let s=n!==void 0?t._$Co?.[n]:t._$Cl;const r=Le(e)?void 0:e._$litDirective$;return s?.constructor!==r&&(s?._$AO?.(!1),r===void 0?s=void 0:(s=new r(o),s._$AT(o,t,n)),n!==void 0?(t._$Co??=[])[n]=s:t._$Cl=s),s!==void 0&&(e=ae(o,s._$AS(o,e.values),s,n)),e}let Yn=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,s=(e?.creationScope??J).importNode(t,!0);Z.currentNode=s;let r=Z.nextNode(),a=0,h=0,c=n[0];for(;c!==void 0;){if(a===c.index){let p;c.type===2?p=new ce(r,r.nextSibling,this,e):c.type===1?p=new c.ctor(r,c.name,c.strings,this,e):c.type===6&&(p=new Qn(r,this,e)),this._$AV.push(p),c=n[++h]}a!==c?.index&&(r=Z.nextNode(),a++)}return Z.currentNode=J,s}p(e){let t=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}};class ce{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,s){this.type=2,this._$AH=y,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ae(this,e,t),Le(e)?e===y||e==null||e===""?(this._$AH!==y&&this._$AR(),this._$AH=y):e!==this._$AH&&e!==ee&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Gn(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==y&&Le(this._$AH)?this._$AA.nextSibling.data=e:this.T(J.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Ce.createElement(mn(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===s)this._$AH.p(t);else{const r=new Yn(s,this),a=r.u(this.options);r.p(t),this.T(a),this._$AH=r}}_$AC(e){let t=Xt.get(e.strings);return t===void 0&&Xt.set(e.strings,t=new Ce(e)),t}k(e){gt(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,s=0;for(const r of e)s===t.length?t.push(n=new ce(this.O(Se()),this.O(Se()),this,this.options)):n=t[s],n._$AI(r),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class Fe{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,s,r){this.type=1,this._$AH=y,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=y}_$AI(e,t=this,n,s){const r=this.strings;let a=!1;if(r===void 0)e=ae(this,e,t,0),a=!Le(e)||e!==this._$AH&&e!==ee,a&&(this._$AH=e);else{const h=e;let c,p;for(e=r[0],c=0;c<r.length-1;c++)p=ae(this,h[n+c],t,c),p===ee&&(p=this._$AH[c]),a||=!Le(p)||p!==this._$AH[c],p===y?e=y:e!==y&&(e+=(p??"")+r[c+1]),this._$AH[c]=p}a&&!s&&this.j(e)}j(e){e===y?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class jn extends Fe{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===y?void 0:e}}class Xn extends Fe{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==y)}}class Kn extends Fe{constructor(e,t,n,s,r){super(e,t,n,s,r),this.type=5}_$AI(e,t=this){if((e=ae(this,e,t,0)??y)===ee)return;const n=this._$AH,s=e===y&&n!==y||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==y&&(n===y||s);s&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class Qn{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){ae(this,e)}}const Vn={I:ce},Zn=pt.litHtmlPolyfillSupport;Zn?.(Ce,ce),(pt.litHtmlVersions??=[]).push("3.3.1");const Jn=(o,e,t)=>{const n=e;let s=n._$litPart$;return s===void 0&&(n._$litPart$=s=new ce(e.insertBefore(Se(),null),null,void 0,{})),s._$AI(o),s};var H=(o=>(o.BOLD="text-styling-bold",o.ITALIC="text-styling-italic",o.UNDERLINE="text-styling-underline",o.STRIKE_THROUGH="text-styling-strike-through",o.HEADING_1="text-sizing-heading-1",o.HEADING_2="text-sizing-heading-2",o.HEADING_3="text-sizing-heading-3",o.PARAGRAPH="text-sizing-paragraph",o))(H||{}),dn=(o=>(o.NUMBERED_LIST="text-listing-numbered-list",o.BULLET_LIST="text-listing-bullet-list",o))(dn||{}),mt=(o=>(o.APPEND="rendering-mode-append",o.REPLACE="rendering-mode-replace",o))(mt||{}),hn=(o=>(o.BLOCKQUOTE="blockquote-stylish",o))(hn||{}),j=(o=>(o.BOLD="text-styling-bold",o.ITALIC="text-styling-italic",o.UNDERLINE="text-styling-underline",o.STRIKE_THROUGH="text-styling-strike-through",o.RESIZE="text-styling-resize",o.NUMBERED_LIST="text-listing-numbered-list",o.BULLET_LIST="text-listing-bullet-list",o.BLOCKQUOTE="blockquote-stylish",o))(j||{}),fn=(o=>(o.QUOTE_LINE_ELEMENT_NOT_FOUND="Quote line element not found",o))(fn||{});/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:pn,setPrototypeOf:Kt,isFrozen:ei,getPrototypeOf:ti,getOwnPropertyDescriptor:ni}=Object;let{freeze:x,seal:B,create:gn}=Object,{apply:dt,construct:ht}=typeof Reflect<"u"&&Reflect;x||(x=function(e){return e});B||(B=function(e){return e});dt||(dt=function(e,t,n){return e.apply(t,n)});ht||(ht=function(e,t){return new e(...t)});const He=D(Array.prototype.forEach),ii=D(Array.prototype.lastIndexOf),Qt=D(Array.prototype.pop),Ee=D(Array.prototype.push),oi=D(Array.prototype.splice),Pe=D(String.prototype.toLowerCase),st=D(String.prototype.toString),Vt=D(String.prototype.match),Ae=D(String.prototype.replace),si=D(String.prototype.indexOf),ri=D(String.prototype.trim),U=D(Object.prototype.hasOwnProperty),M=D(RegExp.prototype.test),Te=li(TypeError);function D(o){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return dt(o,e,n)}}function li(o){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ht(o,t)}}function f(o,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pe;Kt&&Kt(o,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const r=t(s);r!==s&&(ei(e)||(e[n]=r),s=r)}o[s]=!0}return o}function ai(o){for(let e=0;e<o.length;e++)U(o,e)||(o[e]=null);return o}function Y(o){const e=gn(null);for(const[t,n]of pn(o))U(o,t)&&(Array.isArray(n)?e[t]=ai(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=Y(n):e[t]=n);return e}function _e(o,e){for(;o!==null;){const n=ni(o,e);if(n){if(n.get)return D(n.get);if(typeof n.value=="function")return D(n.value)}o=ti(o)}function t(){return null}return t}const Zt=x(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rt=x(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lt=x(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ci=x(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),at=x(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ui=x(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Jt=x(["#text"]),en=x(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ct=x(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tn=x(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Be=x(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mi=B(/\{\{[\w\W]*|[\w\W]*\}\}/gm),di=B(/<%[\w\W]*|[\w\W]*%>/gm),hi=B(/\$\{[\w\W]*/gm),fi=B(/^data-[\-\w.\u00B7-\uFFFF]+$/),pi=B(/^aria-[\-\w]+$/),En=B(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),gi=B(/^(?:\w+script|data):/i),Ei=B(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),An=B(/^html$/i),Ai=B(/^[a-z][.\w]*(-[.\w]+)+$/i);var nn=Object.freeze({__proto__:null,ARIA_ATTR:pi,ATTR_WHITESPACE:Ei,CUSTOM_ELEMENT:Ai,DATA_ATTR:fi,DOCTYPE_NAME:An,ERB_EXPR:di,IS_ALLOWED_URI:En,IS_SCRIPT_OR_DATA:gi,MUSTACHE_EXPR:mi,TMPLIT_EXPR:hi});const Ne={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ti=function(){return typeof window>"u"?null:window},_i=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},on=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Tn(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ti();const e=m=>Tn(m);if(e.version="3.2.6",e.removed=[],!o||!o.document||o.document.nodeType!==Ne.document||!o.Element)return e.isSupported=!1,e;let{document:t}=o;const n=t,s=n.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:h,Element:c,NodeFilter:p,NamedNodeMap:A=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:d,DOMParser:g,trustedTypes:E}=o,T=c.prototype,P=_e(T,"cloneNode"),ue=_e(T,"remove"),we=_e(T,"nextSibling"),Ln=_e(T,"childNodes"),Ie=_e(T,"parentNode");if(typeof a=="function"){const m=t.createElement("template");m.content&&m.content.ownerDocument&&(t=m.content.ownerDocument)}let O,me="";const{implementation:Ge,createNodeIterator:Cn,createDocumentFragment:vn,getElementsByTagName:wn}=t,{importNode:In}=n;let R=on();e.isSupported=typeof pn=="function"&&typeof Ie=="function"&&Ge&&Ge.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:We,ERB_EXPR:qe,TMPLIT_EXPR:Ye,DATA_ATTR:On,ARIA_ATTR:Rn,IS_SCRIPT_OR_DATA:Mn,ATTR_WHITESPACE:At,CUSTOM_ELEMENT:kn}=nn;let{IS_ALLOWED_URI:Tt}=nn,S=null;const _t=f({},[...Zt,...rt,...lt,...at,...Jt]);let C=null;const Nt=f({},[...en,...ct,...tn,...Be]);let N=Object.seal(gn(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,je=null,yt=!0,Xe=!0,bt=!1,St=!0,te=!1,Oe=!0,K=!1,Ke=!1,Qe=!1,ne=!1,Re=!1,Me=!1,Lt=!0,Ct=!1;const xn="user-content-";let Ve=!0,he=!1,ie={},oe=null;const vt=f({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let wt=null;const It=f({},["audio","video","img","source","image","track"]);let Ze=null;const Ot=f({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ke="http://www.w3.org/1998/Math/MathML",xe="http://www.w3.org/2000/svg",G="http://www.w3.org/1999/xhtml";let se=G,Je=!1,et=null;const Dn=f({},[ke,xe,G],st);let De=f({},["mi","mo","mn","ms","mtext"]),$e=f({},["annotation-xml"]);const $n=f({},["title","style","font","a","script"]);let fe=null;const Hn=["application/xhtml+xml","text/html"],Bn="text/html";let L=null,re=null;const Pn=t.createElement("form"),Rt=function(i){return i instanceof RegExp||i instanceof Function},tt=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(re&&re===i)){if((!i||typeof i!="object")&&(i={}),i=Y(i),fe=Hn.indexOf(i.PARSER_MEDIA_TYPE)===-1?Bn:i.PARSER_MEDIA_TYPE,L=fe==="application/xhtml+xml"?st:Pe,S=U(i,"ALLOWED_TAGS")?f({},i.ALLOWED_TAGS,L):_t,C=U(i,"ALLOWED_ATTR")?f({},i.ALLOWED_ATTR,L):Nt,et=U(i,"ALLOWED_NAMESPACES")?f({},i.ALLOWED_NAMESPACES,st):Dn,Ze=U(i,"ADD_URI_SAFE_ATTR")?f(Y(Ot),i.ADD_URI_SAFE_ATTR,L):Ot,wt=U(i,"ADD_DATA_URI_TAGS")?f(Y(It),i.ADD_DATA_URI_TAGS,L):It,oe=U(i,"FORBID_CONTENTS")?f({},i.FORBID_CONTENTS,L):vt,de=U(i,"FORBID_TAGS")?f({},i.FORBID_TAGS,L):Y({}),je=U(i,"FORBID_ATTR")?f({},i.FORBID_ATTR,L):Y({}),ie=U(i,"USE_PROFILES")?i.USE_PROFILES:!1,yt=i.ALLOW_ARIA_ATTR!==!1,Xe=i.ALLOW_DATA_ATTR!==!1,bt=i.ALLOW_UNKNOWN_PROTOCOLS||!1,St=i.ALLOW_SELF_CLOSE_IN_ATTR!==!1,te=i.SAFE_FOR_TEMPLATES||!1,Oe=i.SAFE_FOR_XML!==!1,K=i.WHOLE_DOCUMENT||!1,ne=i.RETURN_DOM||!1,Re=i.RETURN_DOM_FRAGMENT||!1,Me=i.RETURN_TRUSTED_TYPE||!1,Qe=i.FORCE_BODY||!1,Lt=i.SANITIZE_DOM!==!1,Ct=i.SANITIZE_NAMED_PROPS||!1,Ve=i.KEEP_CONTENT!==!1,he=i.IN_PLACE||!1,Tt=i.ALLOWED_URI_REGEXP||En,se=i.NAMESPACE||G,De=i.MATHML_TEXT_INTEGRATION_POINTS||De,$e=i.HTML_INTEGRATION_POINTS||$e,N=i.CUSTOM_ELEMENT_HANDLING||{},i.CUSTOM_ELEMENT_HANDLING&&Rt(i.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(N.tagNameCheck=i.CUSTOM_ELEMENT_HANDLING.tagNameCheck),i.CUSTOM_ELEMENT_HANDLING&&Rt(i.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(N.attributeNameCheck=i.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),i.CUSTOM_ELEMENT_HANDLING&&typeof i.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(N.allowCustomizedBuiltInElements=i.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),te&&(Xe=!1),Re&&(ne=!0),ie&&(S=f({},Jt),C=[],ie.html===!0&&(f(S,Zt),f(C,en)),ie.svg===!0&&(f(S,rt),f(C,ct),f(C,Be)),ie.svgFilters===!0&&(f(S,lt),f(C,ct),f(C,Be)),ie.mathMl===!0&&(f(S,at),f(C,tn),f(C,Be))),i.ADD_TAGS&&(S===_t&&(S=Y(S)),f(S,i.ADD_TAGS,L)),i.ADD_ATTR&&(C===Nt&&(C=Y(C)),f(C,i.ADD_ATTR,L)),i.ADD_URI_SAFE_ATTR&&f(Ze,i.ADD_URI_SAFE_ATTR,L),i.FORBID_CONTENTS&&(oe===vt&&(oe=Y(oe)),f(oe,i.FORBID_CONTENTS,L)),Ve&&(S["#text"]=!0),K&&f(S,["html","head","body"]),S.table&&(f(S,["tbody"]),delete de.tbody),i.TRUSTED_TYPES_POLICY){if(typeof i.TRUSTED_TYPES_POLICY.createHTML!="function")throw Te('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof i.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Te('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');O=i.TRUSTED_TYPES_POLICY,me=O.createHTML("")}else O===void 0&&(O=_i(E,s)),O!==null&&typeof me=="string"&&(me=O.createHTML(""));x&&x(i),re=i}},Mt=f({},[...rt,...lt,...ci]),kt=f({},[...at,...ui]),Un=function(i){let l=Ie(i);(!l||!l.tagName)&&(l={namespaceURI:se,tagName:"template"});const u=Pe(i.tagName),_=Pe(l.tagName);return et[i.namespaceURI]?i.namespaceURI===xe?l.namespaceURI===G?u==="svg":l.namespaceURI===ke?u==="svg"&&(_==="annotation-xml"||De[_]):!!Mt[u]:i.namespaceURI===ke?l.namespaceURI===G?u==="math":l.namespaceURI===xe?u==="math"&&$e[_]:!!kt[u]:i.namespaceURI===G?l.namespaceURI===xe&&!$e[_]||l.namespaceURI===ke&&!De[_]?!1:!kt[u]&&($n[u]||!Mt[u]):!!(fe==="application/xhtml+xml"&&et[i.namespaceURI]):!1},z=function(i){Ee(e.removed,{element:i});try{Ie(i).removeChild(i)}catch{ue(i)}},le=function(i,l){try{Ee(e.removed,{attribute:l.getAttributeNode(i),from:l})}catch{Ee(e.removed,{attribute:null,from:l})}if(l.removeAttribute(i),i==="is")if(ne||Re)try{z(l)}catch{}else try{l.setAttribute(i,"")}catch{}},xt=function(i){let l=null,u=null;if(Qe)i="<remove></remove>"+i;else{const b=Vt(i,/^[\r\n\t ]+/);u=b&&b[0]}fe==="application/xhtml+xml"&&se===G&&(i='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+i+"</body></html>");const _=O?O.createHTML(i):i;if(se===G)try{l=new g().parseFromString(_,fe)}catch{}if(!l||!l.documentElement){l=Ge.createDocument(se,"template",null);try{l.documentElement.innerHTML=Je?me:_}catch{}}const v=l.body||l.documentElement;return i&&u&&v.insertBefore(t.createTextNode(u),v.childNodes[0]||null),se===G?wn.call(l,K?"html":"body")[0]:K?l.documentElement:v},Dt=function(i){return Cn.call(i.ownerDocument||i,i,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT|p.SHOW_PROCESSING_INSTRUCTION|p.SHOW_CDATA_SECTION,null)},nt=function(i){return i instanceof d&&(typeof i.nodeName!="string"||typeof i.textContent!="string"||typeof i.removeChild!="function"||!(i.attributes instanceof A)||typeof i.removeAttribute!="function"||typeof i.setAttribute!="function"||typeof i.namespaceURI!="string"||typeof i.insertBefore!="function"||typeof i.hasChildNodes!="function")},$t=function(i){return typeof h=="function"&&i instanceof h};function W(m,i,l){He(m,u=>{u.call(e,i,l,re)})}const Ht=function(i){let l=null;if(W(R.beforeSanitizeElements,i,null),nt(i))return z(i),!0;const u=L(i.nodeName);if(W(R.uponSanitizeElement,i,{tagName:u,allowedTags:S}),Oe&&i.hasChildNodes()&&!$t(i.firstElementChild)&&M(/<[/\w!]/g,i.innerHTML)&&M(/<[/\w!]/g,i.textContent)||i.nodeType===Ne.progressingInstruction||Oe&&i.nodeType===Ne.comment&&M(/<[/\w]/g,i.data))return z(i),!0;if(!S[u]||de[u]){if(!de[u]&&Pt(u)&&(N.tagNameCheck instanceof RegExp&&M(N.tagNameCheck,u)||N.tagNameCheck instanceof Function&&N.tagNameCheck(u)))return!1;if(Ve&&!oe[u]){const _=Ie(i)||i.parentNode,v=Ln(i)||i.childNodes;if(v&&_){const b=v.length;for(let $=b-1;$>=0;--$){const q=P(v[$],!0);q.__removalCount=(i.__removalCount||0)+1,_.insertBefore(q,we(i))}}}return z(i),!0}return i instanceof c&&!Un(i)||(u==="noscript"||u==="noembed"||u==="noframes")&&M(/<\/no(script|embed|frames)/i,i.innerHTML)?(z(i),!0):(te&&i.nodeType===Ne.text&&(l=i.textContent,He([We,qe,Ye],_=>{l=Ae(l,_," ")}),i.textContent!==l&&(Ee(e.removed,{element:i.cloneNode()}),i.textContent=l)),W(R.afterSanitizeElements,i,null),!1)},Bt=function(i,l,u){if(Lt&&(l==="id"||l==="name")&&(u in t||u in Pn))return!1;if(!(Xe&&!je[l]&&M(On,l))){if(!(yt&&M(Rn,l))){if(!C[l]||je[l]){if(!(Pt(i)&&(N.tagNameCheck instanceof RegExp&&M(N.tagNameCheck,i)||N.tagNameCheck instanceof Function&&N.tagNameCheck(i))&&(N.attributeNameCheck instanceof RegExp&&M(N.attributeNameCheck,l)||N.attributeNameCheck instanceof Function&&N.attributeNameCheck(l))||l==="is"&&N.allowCustomizedBuiltInElements&&(N.tagNameCheck instanceof RegExp&&M(N.tagNameCheck,u)||N.tagNameCheck instanceof Function&&N.tagNameCheck(u))))return!1}else if(!Ze[l]){if(!M(Tt,Ae(u,At,""))){if(!((l==="src"||l==="xlink:href"||l==="href")&&i!=="script"&&si(u,"data:")===0&&wt[i])){if(!(bt&&!M(Mn,Ae(u,At,"")))){if(u)return!1}}}}}}return!0},Pt=function(i){return i!=="annotation-xml"&&Vt(i,kn)},Ut=function(i){W(R.beforeSanitizeAttributes,i,null);const{attributes:l}=i;if(!l||nt(i))return;const u={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:C,forceKeepAttr:void 0};let _=l.length;for(;_--;){const v=l[_],{name:b,namespaceURI:$,value:q}=v,pe=L(b),it=q;let w=b==="value"?it:ri(it);if(u.attrName=pe,u.attrValue=w,u.keepAttr=!0,u.forceKeepAttr=void 0,W(R.uponSanitizeAttribute,i,u),w=u.attrValue,Ct&&(pe==="id"||pe==="name")&&(le(b,i),w=xn+w),Oe&&M(/((--!?|])>)|<\/(style|title)/i,w)){le(b,i);continue}if(u.forceKeepAttr)continue;if(!u.keepAttr){le(b,i);continue}if(!St&&M(/\/>/i,w)){le(b,i);continue}te&&He([We,qe,Ye],zt=>{w=Ae(w,zt," ")});const Ft=L(i.nodeName);if(!Bt(Ft,pe,w)){le(b,i);continue}if(O&&typeof E=="object"&&typeof E.getAttributeType=="function"&&!$)switch(E.getAttributeType(Ft,pe)){case"TrustedHTML":{w=O.createHTML(w);break}case"TrustedScriptURL":{w=O.createScriptURL(w);break}}if(w!==it)try{$?i.setAttributeNS($,b,w):i.setAttribute(b,w),nt(i)?z(i):Qt(e.removed)}catch{le(b,i)}}W(R.afterSanitizeAttributes,i,null)},Fn=function m(i){let l=null;const u=Dt(i);for(W(R.beforeSanitizeShadowDOM,i,null);l=u.nextNode();)W(R.uponSanitizeShadowNode,l,null),Ht(l),Ut(l),l.content instanceof r&&m(l.content);W(R.afterSanitizeShadowDOM,i,null)};return e.sanitize=function(m){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=null,u=null,_=null,v=null;if(Je=!m,Je&&(m="<!-->"),typeof m!="string"&&!$t(m))if(typeof m.toString=="function"){if(m=m.toString(),typeof m!="string")throw Te("dirty is not a string, aborting")}else throw Te("toString is not a function");if(!e.isSupported)return m;if(Ke||tt(i),e.removed=[],typeof m=="string"&&(he=!1),he){if(m.nodeName){const q=L(m.nodeName);if(!S[q]||de[q])throw Te("root node is forbidden and cannot be sanitized in-place")}}else if(m instanceof h)l=xt("<!---->"),u=l.ownerDocument.importNode(m,!0),u.nodeType===Ne.element&&u.nodeName==="BODY"||u.nodeName==="HTML"?l=u:l.appendChild(u);else{if(!ne&&!te&&!K&&m.indexOf("<")===-1)return O&&Me?O.createHTML(m):m;if(l=xt(m),!l)return ne?null:Me?me:""}l&&Qe&&z(l.firstChild);const b=Dt(he?m:l);for(;_=b.nextNode();)Ht(_),Ut(_),_.content instanceof r&&Fn(_.content);if(he)return m;if(ne){if(Re)for(v=vn.call(l.ownerDocument);l.firstChild;)v.appendChild(l.firstChild);else v=l;return(C.shadowroot||C.shadowrootmode)&&(v=In.call(n,v,!0)),v}let $=K?l.outerHTML:l.innerHTML;return K&&S["!doctype"]&&l.ownerDocument&&l.ownerDocument.doctype&&l.ownerDocument.doctype.name&&M(An,l.ownerDocument.doctype.name)&&($="<!DOCTYPE "+l.ownerDocument.doctype.name+`>
`+$),te&&He([We,qe,Ye],q=>{$=Ae($,q," ")}),O&&Me?O.createHTML($):$},e.setConfig=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tt(m),Ke=!0},e.clearConfig=function(){re=null,Ke=!1},e.isValidAttribute=function(m,i,l){re||tt({});const u=L(m),_=L(i);return Bt(u,_,l)},e.addHook=function(m,i){typeof i=="function"&&Ee(R[m],i)},e.removeHook=function(m,i){if(i!==void 0){const l=ii(R[m],i);return l===-1?void 0:oi(R[m],l,1)[0]}return Qt(R[m])},e.removeHooks=function(m){R[m]=[]},e.removeAllHooks=function(){R=on()},e}var Ni=Tn();class I{static{this.topBlockElementTagName="SECTION"}constructor(){}static isEmptyTopBlock(e){const t=this.getTopBlockElementFromSelection(e);if(t){const n=t.innerHTML.trim();return n===""||n==="<br>"?{topBlockElement:t,isEmpty:!0}:{topBlockElement:t,isEmpty:!1}}return{topBlockElement:null,isEmpty:!1}}static createNewTopBlockElement(){const e=document.createElement("section");return e.innerHTML="<br>",e}static createFromRenderer(e,...t){const n=document.createElement("div");return Jn(e(...t),n),n.firstElementChild}static sanitizeHTML(e){return Ni.sanitize(e)}static getClosestElementOfNode(e,t){let n=e;const s=k.getContentElement();for(;n&&s.contains(n);){if(t(n))return n;n=n.parentNode}return null}static getTopBlockElementFromNode(e){let t=e,n=null;const s=k.getContentElement(),r=k.getContentElementName();for(;t&&s.contains(t);)if(t=t.closest(this.topBlockElementTagName),t.parentElement?.classList.contains(r)){n=t;break}return n?.tagName!==this.topBlockElementTagName?null:n}static getTopBlockElementFromSelection(e){const t=e.anchorNode;return t?this.getTopBlockElementFromNode(t.nodeType===Node.TEXT_NODE?t.parentNode:t):null}static insertNewTopBlockElementAfterElement(e){const t=window.getSelection();if(!t)return null;const n=this.createNewTopBlockElement();return e.insertAdjacentElement("afterend",n),this.moveCaretToStartOfElement(n,t,t.getRangeAt(0)),n}static moveCaretToStartOfElement(e,t,n){n.setStart(e,0),n.setEnd(e,0),t.removeAllRanges(),t.addRange(n)}static findLatestTopBlockElement(){return k.getContentElement().lastElementChild}}class yi{constructor(){this.currentTagName=""}setCurrentTagName(e){this.currentTagName=e===dn.NUMBERED_LIST?"OL":"UL"}getClosestListLineElement(e){if(!e||e.rangeCount===0)return null;let t;const n=e.anchorNode;n&&n.nodeType===Node.TEXT_NODE?t=n.parentNode:t=n;const s=k.getContentElement();if(t.tagName==="LI"){if(s.contains(t))return t}else if(t.tagName===this.currentTagName)return t.lastElementChild;return null}insertNewLine(e,t){const s=t.getRangeAt(0).extractContents(),r=document.createElement("li");s.textContent?r.appendChild(s):r.innerHTML="<br>",e.insertAdjacentElement("afterend",r);const a=document.createRange();a.setStart(r,0),a.collapse(!0),t.removeAllRanges(),t.addRange(a)}isOnEmptyLine(e){const t=e.innerHTML.trim();return t==="<br>"||t===""}deleteLine(e){e.remove()}isOnListLine(){return!!this.currentTagName}createNewList(...e){const t=document.createElement(this.currentTagName),n=document.createElement("li");return n.innerHTML="<br>",e.length>0&&n.replaceChildren(...e),t.appendChild(n),t}wrapElementContentByNewList(e){e.replaceChildren(this.createNewList(...e.childNodes))}makeListing(e){const t=this.getClosestListLineElement(e);if(t)this.isOnEmptyLine(t)?(this.deleteLine(t),k.insertNewTopBlockElementAndFocusCaret()):this.insertNewLine(t,e);else{const n=e.anchorNode,s=I.getTopBlockElementFromNode(n.nodeType===Node.TEXT_NODE?n.parentNode:n);s&&this.wrapElementContentByNewList(s)}}insertNewListInsideLine(e){const t=this.createNewList();e.appendChild(t)}makeNestedListing(e){const t=this.getClosestListLineElement(e);if(t&&this.isOnEmptyLine(t)){this.deleteLine(t);const n=window.getSelection(),s=this.getClosestListLineElement(n);s&&this.insertNewListInsideLine(s)}}makeListingOnToolbarButtonClick(e){const t=k.checkIsFocusingInEditorContent();!t||t.rangeCount===0||(this.setCurrentTagName(e),this.makeListing(t))}makeListingOnKeyboardEvent(e){if(e.key==="Enter"){e.preventDefault();const t=k.checkIsFocusingInEditorContent();if(!t||t.rangeCount===0)return;this.makeListing(t)}else if(e.key==="Tab"){e.preventDefault();const t=k.checkIsFocusingInEditorContent();if(!t||t.rangeCount===0)return;this.makeNestedListing(t)}}onAction(e,t){e?this.makeListingOnToolbarButtonClick(e):t&&this.isOnListLine()&&this.makeListingOnKeyboardEvent(t)}}const _n=new yi;class bi{static createError(e){return new Error(e)}}class Si{constructor(){this.blockQuoteTagName="BLOCKQUOTE",this.quoteLineTagName="P",this.currentBlockquoteElement=null}createBlockQuoteElement(e){const t=document.createElement(this.blockQuoteTagName);return t.innerHTML=e,t}insertNewBlockquoteElement(e){const t=this.createBlockQuoteElement(`<${this.quoteLineTagName}><br></${this.quoteLineTagName}>`);e.replaceChildren(t),this.currentBlockquoteElement=t}exitBlockquote(){const e=I.findLatestTopBlockElement();e&&I.insertNewTopBlockElementAfterElement(e),this.currentBlockquoteElement=null}checkIfIsInBlockquote(e){const t=e.anchorNode;if(!t)return null;let n=null;if(t.nodeType===Node.TEXT_NODE?n=t.parentNode:n=t,n?.tagName===this.blockQuoteTagName)return n;const s=k.getContentElement();for(;n&&n.tagName!==this.blockQuoteTagName&&s.contains(n);)n=n.closest(this.blockQuoteTagName);return n?.tagName!==this.blockQuoteTagName?null:n}makeBlockquoteOnButtonClick(){const e=window.getSelection();if(!e)return;if(this.checkIfIsInBlockquote(e)){this.exitBlockquote();return}const{topBlockElement:t,isEmpty:n}=I.isEmptyTopBlock(e);if(t)if(n)this.insertNewBlockquoteElement(t);else{const s=I.insertNewTopBlockElementAfterElement(t);s&&this.insertNewBlockquoteElement(s)}}getClosestQuoteLineElement(e){let t;const n=e.anchorNode;if(n.nodeType===Node.TEXT_NODE?t=n.parentNode:t=n,t.tagName===this.quoteLineTagName)return t;let s=null;for(;t&&t.tagName!==this.quoteLineTagName&&this.currentBlockquoteElement?.contains(t);)t=t.parentNode,s=t;return s?.tagName!==this.quoteLineTagName?null:s}isOnEmptyLine(e){const t=this.getClosestQuoteLineElement(e);if(!t)throw bi.createError(fn.QUOTE_LINE_ELEMENT_NOT_FOUND);const n=t.innerHTML.trim();return n==="<br>"||n===""}insertNewEmptyLine(e){if(!this.currentBlockquoteElement)return;const t=document.createElement(this.quoteLineTagName);t.innerHTML="<br>",this.currentBlockquoteElement.appendChild(t),I.moveCaretToStartOfElement(t,e,e.getRangeAt(0))}makeBlockquoteOnKeyboardEvent(e){if(e.key==="Enter"){e.preventDefault();const t=window.getSelection();if(!t||t.rangeCount===0||!this.checkIfIsInBlockquote(t))return;this.isOnEmptyLine(t)?(console.log(">>> run this 120"),this.exitBlockquote()):(console.log(">>> run this 123"),this.insertNewEmptyLine(t))}}onAction(e,t){if(e)switch(e){case hn.BLOCKQUOTE:this.makeBlockquoteOnButtonClick();break}else t&&this.makeBlockquoteOnKeyboardEvent(t)}}const Nn=new Si;class Li{constructor(){this.contentElementName="NAME-editor-content",this.contentElement=this.initContentEl(),this.initEventListeners()}getContentElementName(){return this.contentElementName}initContentEl(){const e=()=>F`
        <div
          class="${this.contentElementName} p-4 min-h-[300px] outline-none"
          contenteditable="true"
          spellcheck="false"
        ></div>
      `;return I.createFromRenderer(e)}bindKeydownEventListener(){this.contentElement.addEventListener("keydown",e=>{queueMicrotask(()=>{_n.onAction(void 0,e),Nn.onAction(void 0,e)})})}bindBeforeInputEventListener(){this.contentElement.addEventListener("beforeinput",e=>{e.inputType==="insertParagraph"&&(e.preventDefault(),I.insertNewTopBlockElementAfterCurrentCaret())})}initEventListeners(){this.bindKeydownEventListener(),this.bindBeforeInputEventListener()}getContentElement(){return this.contentElement}checkIsFocusingInEditorContent(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return!t||!this.contentElement.contains(t)?null:e}insertNewTopBlockElementAndFocusCaret(){const e=document.createElement(I.topBlockElementTagName);e.innerHTML="<br>",this.contentElement.appendChild(e);const t=document.createRange();t.selectNodeContents(e),t.collapse(!0);const n=window.getSelection();return n&&(n.removeAllRanges(),n.addRange(t)),this.contentElement.focus(),e}}const k=new Li;class Ci{constructor(){this.frameElementClassName="NAME-editor-frame",this.codevcnEditorClassName="NAME-codevcn-editor",this.frameElement=this.initFrameEl()}initFrameEl(){const e=()=>F`<div
        class="${this.frameElementClassName} ${this.codevcnEditorClassName} w-full max-w-3xl mx-auto border rounded-lg shadow bg-white"
      ></div>`;return I.createFromRenderer(e)}getFrameElement(){return this.frameElement}}const ye=new Ci;class Et{constructor(e){this.element=e,this.action=e.getAttribute("data-action")||"",this.value=e.getAttribute("data-value")||void 0}onClick(e){this.element.addEventListener("click",()=>{e(this.action,this.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yn={CHILD:2},bn=o=>(...e)=>({_$litDirective$:o,values:e});class Sn{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:vi}=Vn,sn=()=>document.createComment(""),be=(o,e,t)=>{const n=o._$AA.parentNode,s=e===void 0?o._$AB:e._$AA;if(t===void 0){const r=n.insertBefore(sn(),s),a=n.insertBefore(sn(),s);t=new vi(r,a,o,o.options)}else{const r=t._$AB.nextSibling,a=t._$AM,h=a!==o;if(h){let c;t._$AQ?.(o),t._$AM=o,t._$AP!==void 0&&(c=o._$AU)!==a._$AU&&t._$AP(c)}if(r!==s||h){let c=t._$AA;for(;c!==r;){const p=c.nextSibling;n.insertBefore(c,s),c=p}}}return t},V=(o,e,t=o)=>(o._$AI(e,t),o),wi={},Ii=(o,e=wi)=>o._$AH=e,Oi=o=>o._$AH,ut=o=>{o._$AR(),o._$AA.remove()};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rn=(o,e,t)=>{const n=new Map;for(let s=e;s<=t;s++)n.set(o[s],s);return n},ze=bn(class extends Sn{constructor(o){if(super(o),o.type!==yn.CHILD)throw Error("repeat() can only be used in text expressions")}dt(o,e,t){let n;t===void 0?t=e:e!==void 0&&(n=e);const s=[],r=[];let a=0;for(const h of o)s[a]=n?n(h,a):a,r[a]=t(h,a),a++;return{values:r,keys:s}}render(o,e,t){return this.dt(o,e,t).values}update(o,[e,t,n]){const s=Oi(o),{values:r,keys:a}=this.dt(e,t,n);if(!Array.isArray(s))return this.ut=a,r;const h=this.ut??=[],c=[];let p,A,d=0,g=s.length-1,E=0,T=r.length-1;for(;d<=g&&E<=T;)if(s[d]===null)d++;else if(s[g]===null)g--;else if(h[d]===a[E])c[E]=V(s[d],r[E]),d++,E++;else if(h[g]===a[T])c[T]=V(s[g],r[T]),g--,T--;else if(h[d]===a[T])c[T]=V(s[d],r[T]),be(o,c[T+1],s[d]),d++,T--;else if(h[g]===a[E])c[E]=V(s[g],r[E]),be(o,s[d],s[g]),g--,E++;else if(p===void 0&&(p=rn(a,E,T),A=rn(h,d,g)),p.has(h[d]))if(p.has(h[g])){const P=A.get(a[E]),ue=P!==void 0?s[P]:null;if(ue===null){const we=be(o,s[d]);V(we,r[E]),c[E]=we}else c[E]=V(ue,r[E]),be(o,s[d],ue),s[P]=null;E++}else ut(s[g]),g--;else ut(s[d]),d++;for(;E<=T;){const P=be(o,c[T+1]);V(P,r[E]),c[E++]=P}for(;d<=g;){const P=s[d++];P!==null&&ut(P)}return this.ut=a,Ii(o,c),ee}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class ft extends Sn{constructor(e){if(super(e),this.it=y,e.type!==yn.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===y||e==null)return this._t=void 0,this.it=e;if(e===ee)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const t=[e];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}}ft.directiveName="unsafeHTML",ft.resultType=1;const ve=bn(ft);class Ri{constructor(){this.currentStylingType=null,this.parentStylingElement=null,this.tagNamesForStyling={[H.BOLD]:["B","STRONG"],[H.ITALIC]:["I","EM"],[H.UNDERLINE]:["U","INS"],[H.STRIKE_THROUGH]:["S","DEL","STRIKE"],[H.HEADING_1]:["H1"],[H.HEADING_2]:["H2"],[H.HEADING_3]:["H3"],[H.PARAGRAPH]:["P"]}}getAllAvailableTagNames(){return Object.values(this.tagNamesForStyling).flat()}ifTagNameIsCurrentStyling(e){return this.getCurrentStylingTagNames().includes(e)}setCurrentStylingType(e){this.currentStylingType=e}getCurrentStylingTagNames(){return this.tagNamesForStyling[this.currentStylingType]}getCurrentStylingTagName(){return this.getCurrentStylingTagNames()[0]}setParentStylingElement(e){let t=e.startContainer.nodeType===Node.TEXT_NODE?e.startContainer.parentNode:e.startContainer;t&&(this.parentStylingElement=I.getClosestElementOfNode(t,n=>this.ifTagNameIsCurrentStyling(n.tagName)&&n.contains(e.endContainer)))}mergeAdjacentStyling(e){let t=e.firstChild;for(;t;){const n=t.nextSibling;if(t.nodeType===Node.ELEMENT_NODE&&n&&n.nodeType===Node.ELEMENT_NODE&&this.ifTagNameIsCurrentStyling(t.tagName)&&t.tagName===n.tagName){for(;n.firstChild;)t.appendChild(n.firstChild);e.removeChild(n);continue}t=n}}unstylingFromSelection(e){const t=this.parentStylingElement;if(!t)return;const n=t.ownerDocument,s=t.tagName,r=e.cloneRange(),a=n.createRange();a.setStart(t,0),a.setEnd(r.startContainer,r.startOffset);const h=n.createRange();h.setStart(r.endContainer,r.endOffset),h.setEnd(t,t.childNodes.length);const c=a.cloneContents(),p=r.cloneContents(),A=h.cloneContents(),d=n.createDocumentFragment();if(c.hasChildNodes()){const g=n.createElement(s);g.appendChild(c),d.appendChild(g)}if(p.hasChildNodes()&&d.appendChild(p),A.hasChildNodes()){const g=n.createElement(s);g.appendChild(A),d.appendChild(g)}t.replaceWith(d)}warpContentByStylingTag(e){const t=e.extractContents(),n=document.createElement(this.getCurrentStylingTagName());return n.appendChild(t),e.insertNode(n),n}findDescendantsSameTag(e){const t=e.tagName,n=[];for(const s in this.tagNamesForStyling){const r=this.tagNamesForStyling[s];r.includes(t)&&n.push(...r)}return Array.from(e.querySelectorAll(n.join(",")))}removeOverlapChildTags(e){const t=this.findDescendantsSameTag(e);for(const n of t)n.replaceWith(...n.childNodes)}makeStylingToTextNodeOutsideTags(e){const t=this.getAllAvailableTagNames(),n=e.childNodes;for(const s of n)if(s.nodeType===Node.TEXT_NODE){if(s.textContent.trim()!==""){const r=document.createElement(this.getCurrentStylingTagName());r.appendChild(s.cloneNode(!0)),s.replaceWith(r);return}}else if(s.nodeType===Node.ELEMENT_NODE){const r=s;if(!t.includes(r.tagName))this.makeStylingToTextNodeOutsideTags(r);else continue}}removeEmptyTags(e){const t=e.children;for(const n of t)if(n.innerHTML===""){n.remove();continue}else n.hasChildNodes()&&this.removeEmptyTags(n)}makeStyling(e,t){if(this.setCurrentStylingType(t),this.setParentStylingElement(e),this.parentStylingElement)this.unstylingFromSelection(e);else{const n=this.warpContentByStylingTag(e);this.removeOverlapChildTags(n)}this.parentStylingElement&&this.mergeAdjacentStyling(this.parentStylingElement)}onAction(e){const t=k.checkIsFocusingInEditorContent();if(!t||t.rangeCount===0)return;const n=t.getRangeAt(0);n.collapsed||this.makeStyling(n,e)}}const Mi=new Ri;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ki=o=>o??y,xi=({label:o,options:e,dataObject:t,classNames:n})=>F`
    <div
      class="NAME-custom-dropdown ${n?.container||""}"
      data-value="${e[0].value}"
      data-object=${ki(t?JSON.stringify(t):null)}
    >
      <button class="NAME-custom-dropdown-btn ${n?.btn||""}">${ve(o)}</button>
      <div class="NAME-custom-dropdown-content">
        ${ze(e,({value:s})=>s,({value:s,label:r},a)=>F`
              <button class="NAME-custom-dropdown-option ${n?.options?.[a]||""}" data-value="${s}">
                ${ve(r)}
              </button>
            `)}
      </div>
    </div>
  `;class Di{static bindDropdownEvent(e,t,n,s,r){const a=()=>{e.dataset.open==="true"?e.dataset.open="false":e.dataset.open="true"};e.onclick=h=>{h.preventDefault(),queueMicrotask(()=>{let c=h.target;if(e.querySelector(`.${n}`).contains(c))a();else{for(;c&&!c.classList.contains(s)&&(c=c.parentElement,!(c.classList.contains(t)||c.tagName==="BODY")););c&&c.classList.contains(s)&&(a(),e.querySelectorAll(`.${s}`).forEach(A=>{A.classList.remove("active")}),c.classList.add("active"),r(c.dataset.value,c))}})}}}class $i{constructor(){this.actions=[{action:j.BOLD,label:"B",type:"button",className:"font-bold"},{action:j.ITALIC,label:"I",type:"button",className:"italic font-mono text-lg"},{action:j.UNDERLINE,label:"U",type:"button",className:"underline"},{action:j.STRIKE_THROUGH,label:"S",type:"button",className:"line-through"},{action:j.RESIZE,label:`
        <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" fill="#000000" height="18" width="18">
          <g data-name="Layer_2">
            <g data-name="invisible_box">
              <rect width="26" height="26" fill="none"></rect>
            </g>
            <g data-name="Q3_icons">
              <g>
                <polygon points="2 23 9 23 9 43 15 43 15 23 22 23 22 17 2 17 2 23"></polygon>
                <polygon points="46 5 14 5 14 11 27 11 27 43 33 43 33 11 46 11 46 5"></polygon>
              </g>
            </g>
          </g>
        </svg>`,type:"select",className:"text-2xl font-bold",options:[{value:H.PARAGRAPH,label:"Paragraph",className:"text-base"},{value:H.HEADING_1,label:"H1",className:"text-2xl font-bold"},{value:H.HEADING_2,label:"H2",className:"text-xl font-bold"},{value:H.HEADING_3,label:"H3",className:"text-lg font-bold"}]}],this.sectionElement=this.initSectionElement(),this.bindEvents()}getSectionElement(){return this.sectionElement}initSectionElement(){const e=()=>F`<div class="NAME-text-styling-section flex gap-2">
        ${ze(this.actions,({action:t})=>t,({action:t,label:n,type:s,className:r,options:a})=>s==="select"?xi({label:n,options:a||[],dataObject:{action:t},classNames:{btn:`flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer h-full ${r}`,options:a?.map(({className:h})=>`flex gap-2 py-1 px-2 cursor-pointer hover:bg-gray-200 ${h||""}`)}}):F`<button
                  class="NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${r}"
                  data-action="${t}"
                >
                  ${ve(n)}
                </button>`)}
      </div>`;return I.createFromRenderer(e)}bindButtonEvents(){this.sectionElement.querySelectorAll(".NAME-toolbar-btn").forEach(t=>{new Et(t).onClick(s=>{this.onAction(s)})})}bindDropdownEvents(){const e=this.sectionElement.querySelectorAll(".NAME-custom-dropdown");for(const t of e)Di.bindDropdownEvent(t,"NAME-custom-dropdown","NAME-custom-dropdown-btn","NAME-custom-dropdown-option",n=>{this.onAction(n)})}bindEvents(){this.bindButtonEvents(),this.bindDropdownEvents()}onAction(e){queueMicrotask(()=>{Mi.onAction(e)})}}const Hi=new $i;class Bi{constructor(){this.actions=[{action:j.NUMBERED_LIST,label:'<i class="bi bi-list-ol"></i>',type:"button",className:"text-2xl font-bold"},{action:j.BULLET_LIST,label:'<i class="bi bi-list-ul"></i>',type:"button",className:"text-2xl font-bold"}],this.sectionElement=this.initSectionElement(),this.bindEvents()}initSectionElement(){const e=()=>F`<div class="NAME-text-listing-section flex gap-2">
      ${ze(this.actions,t=>t.action,t=>F`<button
            class="NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${t.className}"
            data-action="${t.action}"
          >
            ${ve(t.label)}
          </button>`)}
    </div>`;return I.createFromRenderer(e)}getSectionElement(){return this.sectionElement}bindButtonEvents(){this.sectionElement.querySelectorAll(".NAME-toolbar-btn").forEach(t=>{new Et(t).onClick(s=>{this.onAction(s)})})}bindEvents(){this.bindButtonEvents()}onAction(e){queueMicrotask(()=>{_n.onAction(e)})}}const Pi=new Bi;class Ui{constructor(){this.actions=[{action:j.BLOCKQUOTE,label:'<i class="bi bi-quote text-xl"></i>',type:"button"}],this.sectionElement=this.initSectionElement(),this.bindEvents()}initSectionElement(){const e=()=>F`<div class="NAME-blockquote-module flex gap-2">
        ${ze(this.actions,({action:t})=>t,({action:t,label:n,className:s})=>F`<button
              class="NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${s}"
              data-action="${t}"
            >
              ${ve(n)}
            </button>`)}
      </div>`;return I.createFromRenderer(e)}getSectionElement(){return this.sectionElement}bindButtonEvents(){this.sectionElement.querySelectorAll(".NAME-toolbar-btn").forEach(t=>{new Et(t).onClick(s=>{this.onAction(s)})})}bindEvents(){this.bindButtonEvents()}onAction(e){Nn.onAction(e)}}const Fi=new Ui;class zi{constructor(){this.toolbarElementClassName="NAME-editor-toolbar",this.toolbarElement=this.initToolbarEl(),this.toolbarElement.appendChild(Hi.getSectionElement()),this.toolbarElement.appendChild(Pi.getSectionElement()),this.toolbarElement.appendChild(Fi.getSectionElement())}initToolbarEl(){const e=()=>F`<div class="${this.toolbarElementClassName} border-b px-2 py-1 flex gap-2 items-stretch"></div>`;return I.createFromRenderer(e)}getToolbarElement(){return this.toolbarElement}}const ln=new zi;class Gi{constructor(e,t=mt.APPEND){const n=document.getElementById(e);if(!n)throw new Error(`Container with id ${e} not found`);this.editorWrapper=n,this.editorWrapperID=e,ye.getFrameElement().appendChild(ln.getToolbarElement()),ye.getFrameElement().appendChild(k.getContentElement()),t===mt.APPEND?this.editorWrapper.appendChild(ye.getFrameElement()):this.editorWrapper.replaceWith(ye.getFrameElement())}getEditorWrapperID(){return this.editorWrapperID}getEditorWrapper(){return this.editorWrapper}getContent(){return k.getContentElement().innerHTML}getToolbarElement(){return ln.getToolbarElement()}getContentElement(){return k.getContentElement()}getFrameElement(){return ye.getFrameElement()}setContent(e){k.getContentElement().innerHTML=I.sanitizeHTML(e)}}const Wi=new Gi("codevcn-editor-root"),qi=()=>{Wi.setContent("<section>Xin chào! Đây là <ins>phần mới</ins> của <b>văn b</b>ản.</section>")};qi();
