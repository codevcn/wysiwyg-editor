{"version":3,"file":"main.js","sources":["../../../wysiwyg-build/node_modules/lit-html/lit-html.js","../../../wysiwyg-build/scripts/enums/global-enums.ts","../../../wysiwyg-build/scripts/helpers/codevcn-editor-helper.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/text-listing/text-listing.stylish.ts","../../../wysiwyg-build/scripts/helpers/error-helper.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/text-blocking/blockquote/blockquote.stylish.ts","../../../wysiwyg-build/node_modules/dompurify/dist/purify.es.mjs","../../../wysiwyg-build/scripts/helpers/common-helpers.ts","../../../wysiwyg-build/scripts/lib/components/modal.ts","../../../wysiwyg-build/scripts/lib/components/managers/modal.manager.ts","../../../wysiwyg-build/node_modules/axios/lib/helpers/bind.js","../../../wysiwyg-build/node_modules/axios/lib/utils.js","../../../wysiwyg-build/node_modules/axios/lib/core/AxiosError.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/null.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/toFormData.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/AxiosURLSearchParams.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/buildURL.js","../../../wysiwyg-build/node_modules/axios/lib/core/InterceptorManager.js","../../../wysiwyg-build/node_modules/axios/lib/defaults/transitional.js","../../../wysiwyg-build/node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","../../../wysiwyg-build/node_modules/axios/lib/platform/browser/classes/FormData.js","../../../wysiwyg-build/node_modules/axios/lib/platform/browser/classes/Blob.js","../../../wysiwyg-build/node_modules/axios/lib/platform/browser/index.js","../../../wysiwyg-build/node_modules/axios/lib/platform/common/utils.js","../../../wysiwyg-build/node_modules/axios/lib/platform/index.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/toURLEncodedForm.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/formDataToJSON.js","../../../wysiwyg-build/node_modules/axios/lib/defaults/index.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/parseHeaders.js","../../../wysiwyg-build/node_modules/axios/lib/core/AxiosHeaders.js","../../../wysiwyg-build/node_modules/axios/lib/core/transformData.js","../../../wysiwyg-build/node_modules/axios/lib/cancel/isCancel.js","../../../wysiwyg-build/node_modules/axios/lib/cancel/CanceledError.js","../../../wysiwyg-build/node_modules/axios/lib/core/settle.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/parseProtocol.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/speedometer.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/throttle.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/progressEventReducer.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/isURLSameOrigin.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/cookies.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/isAbsoluteURL.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/combineURLs.js","../../../wysiwyg-build/node_modules/axios/lib/core/buildFullPath.js","../../../wysiwyg-build/node_modules/axios/lib/core/mergeConfig.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/resolveConfig.js","../../../wysiwyg-build/node_modules/axios/lib/adapters/xhr.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/composeSignals.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/trackStream.js","../../../wysiwyg-build/node_modules/axios/lib/adapters/fetch.js","../../../wysiwyg-build/node_modules/axios/lib/adapters/adapters.js","../../../wysiwyg-build/node_modules/axios/lib/core/dispatchRequest.js","../../../wysiwyg-build/node_modules/axios/lib/env/data.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/validator.js","../../../wysiwyg-build/node_modules/axios/lib/core/Axios.js","../../../wysiwyg-build/node_modules/axios/lib/cancel/CancelToken.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/spread.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/isAxiosError.js","../../../wysiwyg-build/node_modules/axios/lib/helpers/HttpStatusCode.js","../../../wysiwyg-build/node_modules/axios/lib/axios.js","../../../wysiwyg-build/node_modules/axios/index.js","../../../wysiwyg-build/scripts/services/codevcn-editor.service.ts","../../../wysiwyg-build/node_modules/lit-html/directives/if-defined.js","../../../wysiwyg-build/scripts/lib/components/skeleton.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/image-blocking/image-blocking.stylish.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/image-blocking/add-image.manager.ts","../../../wysiwyg-build/scripts/lib/artifact/event/event-emitter.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/text-styling/text-styling.stylish.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/text-linking/text-linking.stylish.ts","../../../wysiwyg-build/scripts/lib/components/popover.ts","../../../wysiwyg-build/scripts/helpers/page-layout-helper.ts","../../../wysiwyg-build/scripts/lib/components/managers/popover.manager.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/text-linking/text-linking.manager.ts","../../../wysiwyg-build/node_modules/lit-html/directive.js","../../../wysiwyg-build/node_modules/lit-html/directive-helpers.js","../../../wysiwyg-build/node_modules/lit-html/directives/repeat.js","../../../wysiwyg-build/node_modules/lit-html/directives/unsafe-html.js","../../../wysiwyg-build/scripts/lib/components/dropdown.ts","../../../wysiwyg-build/scripts/lib/components/managers/dropdown.manager.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/code-blocking/code-block-view.manager.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/code-blocking/code-blocking.manager.ts","../../../wysiwyg-build/scripts/lib/artifact/content/editor.content.ts","../../../wysiwyg-build/scripts/lib/artifact/frame/editor.frame.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/toolbar-button.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/text-styling/text-styling.module.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/text-listing/text-listing.module.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/text-blocking/blockquote/blockquote.module.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/image-blocking/image-blocking.module.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/text-linking/text-linking.module.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/code-blocking/code-blocking.module.ts","../../../wysiwyg-build/scripts/lib/artifact/toolbar/editor.toolbar.ts","../../../wysiwyg-build/scripts/lib/artifact/codevcn-editor.ts","../../../wysiwyg-build/scripts/main.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=y(3),T=Symbol.for(\"lit-noChange\"),E=Symbol.for(\"lit-nothing\"),A=new WeakMap,C=r.createTreeWalker(r,129);function P(t,i){if(!a(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[P(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),o]};class N{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=V(t,s);if(this.el=N.createElement(f,n),C.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=C.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?H:\"?\"===e[1]?I:\"@\"===e[1]?L:k}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),C.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){if(i===T)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=S(t,h._$AS(t,i.values),h,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);C.currentNode=e;let h=C.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new R(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new z(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=C.nextNode(),o++)}return C.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),c(t)?t===E||null==t||\"\"===t?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(P(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new M(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new N(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new R(this.O(l()),this.O(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=E}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=S(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=S(this,e[s+n],i,n),r===T&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===E?t=E:t!==E&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class I extends k{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class L extends k{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=S(this,t,i,0)??E)===T)return;const s=this._$AH,e=t===E&&s!==E||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==E&&(s===E||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const Z={M:e,P:h,A:o,C:1,L:V,R:M,D:u,V:S,I:R,H:k,N:I,U:L,B:H,F:z},j=t.litHtmlPolyfillSupport;j?.(N,R),(t.litHtmlVersions??=[]).push(\"3.3.1\");const B=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new R(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{Z as _$LH,x as html,w as mathml,T as noChange,E as nothing,B as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","export enum ETextStylingType {\r\n  BOLD = \"text-styling-bold\",\r\n  ITALIC = \"text-styling-italic\",\r\n  UNDERLINE = \"text-styling-underline\",\r\n  STRIKE_THROUGH = \"text-styling-strike-through\",\r\n  HEADING_1 = \"text-sizing-heading-1\",\r\n  HEADING_2 = \"text-sizing-heading-2\",\r\n  HEADING_3 = \"text-sizing-heading-3\",\r\n  PARAGRAPH = \"text-sizing-paragraph\",\r\n}\r\n\r\nexport enum ETextListingType {\r\n  NUMBERED_LIST = \"text-listing-numbered-list\",\r\n  BULLET_LIST = \"text-listing-bullet-list\",\r\n}\r\n\r\nexport enum ERenderingMode {\r\n  APPEND = \"rendering-mode-append\",\r\n  REPLACE = \"rendering-mode-replace\",\r\n}\r\n\r\nexport enum EBlockquoteType {\r\n  BLOCKQUOTE = \"text-blocking-blockquote\",\r\n}\r\n\r\nexport enum EImageBlockingType {\r\n  IMAGE_BLOCKING = \"image-blocking\",\r\n}\r\n\r\nexport enum ETextLinkingType {\r\n  TEXT_LINKING = \"text-linking\",\r\n}\r\n\r\nexport enum ECodeBlockingType {\r\n  CODE_BLOCKING = \"code-blocking\",\r\n}\r\n\r\nexport enum EToolbarAction {\r\n  BOLD = \"text-styling-bold\",\r\n  ITALIC = \"text-styling-italic\",\r\n  UNDERLINE = \"text-styling-underline\",\r\n  STRIKE_THROUGH = \"text-styling-strike-through\",\r\n  RESIZE = \"text-styling-resize\",\r\n  NUMBERED_LIST = \"text-listing-numbered-list\",\r\n  BULLET_LIST = \"text-listing-bullet-list\",\r\n  BLOCKQUOTE = \"text-blocking-blockquote\",\r\n  IMAGE_BLOCKING = \"image-blocking\",\r\n  TEXT_LINKING = \"text-linking\",\r\n  CODE_BLOCKING = \"code-blocking\",\r\n}\r\n\r\nexport enum EErrorMessage {\r\n  ANCHOR_NODE_NOT_FOUND_OR_NOT_ELEMENT = \"Anchor node was not found or not an element\",\r\n  QUOTE_LINE_ELEMENT_NOT_FOUND = \"Quote line element not found\",\r\n  INVALID_UPLOAD_IMAGE_URL = \"Invalid upload image URL\",\r\n  IMAGE_SIZE_TOO_LARGE = \"Image size too large\",\r\n  INVALID_IMAGE_TYPE = \"Invalid image type\",\r\n  MAX_IMAGES_COUNT_TOO_LARGE = \"Max images count too large\",\r\n  SELECTION_NOT_FOUND = \"Selection not found in editor content\",\r\n  SELECTION_NOT_FOUND_AFTER_RESTORE = \"Selection not found after restore caret position\",\r\n  ONLY_SUPPORT_IMAGE_FILE = \"Only support image file\",\r\n  TOP_BLOCK_NOT_FOUND = \"Top block element not found\",\r\n  TEXT_LINK_FORM_NOT_FOUND = \"Text link form not found\",\r\n  LOADED_CODE_BLOCK_MODULES_NOT_FOUND = \"Loaded code block modules not found\",\r\n}\r\n\r\nexport enum ENotifyType {\r\n  SUCCESS = \"success\",\r\n  ERROR = \"error\",\r\n  WARNING = \"warning\",\r\n  INFO = \"info\",\r\n}\r\n\r\nexport enum EInternalEvents {\r\n  BIND_TEXT_LINK_POPOVER_EVENT = \"bind-text-link-popover-event\",\r\n}\r\n\r\nexport enum ECodeBlockingLanguage {\r\n  JAVASCRIPT = \"javascript\",\r\n  CPP = \"cpp\",\r\n  PYTHON = \"python\",\r\n}\r\n","import { editorContent } from \"@/lib/artifact/content/editor.content.js\"\r\nimport { ENotifyType } from \"@/enums/global-enums\"\r\nimport { testPerformance } from \"@/dev/helpers\"\r\n\r\ntype TIsEmptyTopBlockResult = {\r\n  topBlockElement: HTMLElement | null\r\n  isEmpty: boolean\r\n}\r\n\r\nexport class CodeVCNEditorHelper {\r\n  static readonly topBlockElementTagName: string = \"SECTION\"\r\n  private static savedCaretPosition: Range | null = null\r\n\r\n  constructor() {}\r\n\r\n  static getSavedCaretPosition(): Range | null {\r\n    return this.savedCaretPosition\r\n  }\r\n\r\n  /**\r\n   * Kiểm tra xem top block hiện tại có rỗng không, rỗng là khi innerHTML === \"\" hoặc innerHTML === \"<br>\"\r\n   */\r\n  static isEmptyTopBlock(selection: Selection): TIsEmptyTopBlockResult {\r\n    const topBlockElement = this.getTopBlockElementFromSelection(selection)\r\n    if (topBlockElement) {\r\n      const trimmedInnerHTML = topBlockElement.innerHTML.trim()\r\n      if (trimmedInnerHTML === \"\" || trimmedInnerHTML === \"<br>\") {\r\n        return {\r\n          topBlockElement,\r\n          isEmpty: true,\r\n        }\r\n      }\r\n      return {\r\n        topBlockElement,\r\n        isEmpty: false,\r\n      }\r\n    }\r\n    return {\r\n      topBlockElement: null,\r\n      isEmpty: false,\r\n    }\r\n  }\r\n\r\n  static createNewEmptyTopBlockElement(): HTMLElement {\r\n    const newBlock = document.createElement(\"section\")\r\n    newBlock.innerHTML = \"<br>\"\r\n    return newBlock\r\n  }\r\n\r\n  static getClosestElementOfNode<TElementType extends HTMLElement = HTMLElement>(\r\n    startNode: HTMLElement,\r\n    selector: (node: HTMLElement) => boolean\r\n  ): TElementType | null {\r\n    let currentElement: HTMLElement | null = startNode\r\n    const editorContentElement = editorContent.getContentElement()\r\n    while (currentElement && editorContentElement.contains(currentElement)) {\r\n      if (selector(currentElement)) {\r\n        return currentElement as TElementType\r\n      }\r\n      currentElement = currentElement.parentElement\r\n    }\r\n    return null\r\n  }\r\n\r\n  static getTopBlockElementFromNode(startNode: HTMLElement): HTMLElement | null {\r\n    let currentElement: HTMLElement = startNode\r\n    if (currentElement.tagName === this.topBlockElementTagName) {\r\n      return currentElement\r\n    }\r\n    let topBlockElement: HTMLElement | null = null\r\n    const editorContentElement = editorContent.getContentElement()\r\n    topBlockElement = currentElement.closest<HTMLElement>(this.topBlockElementTagName)\r\n    if (topBlockElement && editorContentElement.contains(topBlockElement)) {\r\n      return topBlockElement\r\n    }\r\n    return null\r\n  }\r\n\r\n  static getTopBlockElementFromSelection(selection: Selection): HTMLElement | null {\r\n    const anchorNode = selection.anchorNode\r\n    if (!anchorNode) return null\r\n    return this.getTopBlockElementFromNode(\r\n      anchorNode.nodeType === Node.TEXT_NODE ? (anchorNode.parentNode as HTMLElement) : (anchorNode as HTMLElement)\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Tạo 1 block mới và đặt caret vào block mới\r\n   * @returns Block mới đã được chèn\r\n   */\r\n  static insertNewTopBlockElementAfterElement(selection: Selection, element?: HTMLElement): HTMLElement {\r\n    let newBlockElement: HTMLElement\r\n\r\n    if (element) {\r\n      // Insert vào sau 1 element\r\n      const topBlockElement = this.getTopBlockElementFromNode(element)!\r\n      newBlockElement = this.createNewEmptyTopBlockElement()\r\n      topBlockElement.insertAdjacentElement(\"afterend\", newBlockElement)\r\n    } else {\r\n      newBlockElement = this.insertNewEmptyTopBlockElement()\r\n    }\r\n\r\n    // Đặt caret vào block mới\r\n    this.moveCaretToStartOfElement(newBlockElement, selection, selection.getRangeAt(0))\r\n\r\n    return newBlockElement\r\n  }\r\n\r\n  static moveCaretToStartOfElement(element: HTMLElement, selection: Selection, selectionRange: Range): void {\r\n    // caret đặt ngay trước node con đầu tiên của element\r\n    selectionRange.setStart(element, 0)\r\n    selectionRange.setEnd(element, 0)\r\n    selection.removeAllRanges()\r\n    selection.addRange(selectionRange)\r\n  }\r\n\r\n  static moveCaretToEndOfElement(element: HTMLElement, selection: Selection, selectionRange: Range): void {\r\n    // caret đặt ngay sau node con cuối cùng của element\r\n    selectionRange.selectNodeContents(element)\r\n    selectionRange.collapse(false)\r\n    selection.removeAllRanges()\r\n    selection.addRange(selectionRange)\r\n  }\r\n\r\n  static getNextTopBlockElementFromCurrentTopBlock(selection: Selection): HTMLElement | null {\r\n    const currentTopBlockElement = this.getTopBlockElementFromSelection(selection)\r\n    if (currentTopBlockElement) {\r\n      let nextElementSibling = currentTopBlockElement.nextElementSibling\r\n      while (nextElementSibling && nextElementSibling.tagName !== this.topBlockElementTagName) {\r\n        nextElementSibling = nextElementSibling.nextElementSibling\r\n      }\r\n      if (nextElementSibling && nextElementSibling.tagName === this.topBlockElementTagName) {\r\n        return nextElementSibling as HTMLElement\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  static moveCaretToStartOfNextTopBlock(selection: Selection): void {\r\n    const nextTopBlockElement = this.getNextTopBlockElementFromCurrentTopBlock(selection)\r\n    if (nextTopBlockElement) {\r\n      this.moveCaretToStartOfElement(nextTopBlockElement, selection, selection.getRangeAt(0))\r\n    } else {\r\n      this.moveCaretToStartOfElement(this.insertNewEmptyTopBlockElement(), selection, selection.getRangeAt(0))\r\n    }\r\n  }\r\n\r\n  static getPreviousTopBlockElementFromCurrentTopBlock(selection: Selection): HTMLElement | null {\r\n    const currentTopBlockElement = this.getTopBlockElementFromSelection(selection)\r\n    if (currentTopBlockElement) {\r\n      let previousElementSibling = currentTopBlockElement.previousElementSibling\r\n      while (previousElementSibling && previousElementSibling.tagName !== this.topBlockElementTagName) {\r\n        previousElementSibling = previousElementSibling.previousElementSibling\r\n      }\r\n      if (previousElementSibling && previousElementSibling.tagName === this.topBlockElementTagName) {\r\n        return previousElementSibling as HTMLElement\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  static moveCaretToPreviousTopBlock(selection: Selection): void {\r\n    const previousTopBlockElement = this.getPreviousTopBlockElementFromCurrentTopBlock(selection)\r\n    if (previousTopBlockElement) {\r\n      this.moveCaretToEndOfElement(previousTopBlockElement, selection, selection.getRangeAt(0))\r\n    } else {\r\n      this.moveCaretToStartOfElement(this.insertNewEmptyTopBlockElement(), selection, selection.getRangeAt(0))\r\n    }\r\n  }\r\n\r\n  static findLatestTopBlockElement(): HTMLElement | null {\r\n    return editorContent.getContentElement().lastElementChild as HTMLElement | null\r\n  }\r\n\r\n  static insertNewEmptyTopBlockElement(): HTMLElement {\r\n    const newBlockElement = this.createNewEmptyTopBlockElement()\r\n    editorContent.getContentElement().appendChild(newBlockElement)\r\n    return newBlockElement\r\n  }\r\n\r\n  static focusCaretAtEndOfEditorContent(): Selection | null {\r\n    const contentElement = editorContent.getContentElement()\r\n\r\n    const range = document.createRange()\r\n    const lastElementChild = contentElement.lastElementChild\r\n\r\n    if (lastElementChild) {\r\n      // nếu editor content có element con cuối cùng thì caret ở cuối element con đó\r\n      range.selectNodeContents(lastElementChild)\r\n      range.collapse(false)\r\n    } else if (contentElement.innerHTML === \"\") {\r\n      // nếu rỗng thì collapse trong content element\r\n      const newBlockElement = this.insertNewEmptyTopBlockElement()\r\n      range.selectNodeContents(newBlockElement)\r\n      range.collapse(false)\r\n    }\r\n\r\n    const selection = window.getSelection()\r\n    if (!selection) return null\r\n\r\n    contentElement.focus()\r\n    selection.removeAllRanges()\r\n    selection.addRange(range)\r\n\r\n    return selection\r\n  }\r\n\r\n  static removeEmptyElements(...elements: HTMLElement[]): void {\r\n    for (const element of elements) {\r\n      if (this.isEmptyElement(element)) {\r\n        element.remove()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Xóa tất cả các element con rỗng trong container.\r\n   * \"Rỗng\" nghĩa là:\r\n   *  - Không có text node chứa ký tự (kể cả khoảng trắng),\r\n   *  - Và không có element con nào khác còn lại sau khi kiểm tra.\r\n   */\r\n  static removeEmptyChildElements(container: HTMLElement): void {\r\n    const children = Array.from(container.children)\r\n    for (const child of children) {\r\n      if (child instanceof HTMLElement) {\r\n        // Kiểm tra đệ quy các con trước\r\n        this.removeEmptyChildElements(child)\r\n        if (this.isEmptyElement(child)) {\r\n          child.remove()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Kiểm tra element có rỗng không bằng cách duyệt các child node trực tiếp.\r\n   * Trả về true nếu element ko có text node nào hoặc element có ít nhất 1 element con (element con này chưa biết có rỗng hay ko)\r\n   */\r\n  static isEmptyElement(element: HTMLElement): boolean {\r\n    for (const node of element.childNodes) {\r\n      if (node.nodeType === Node.TEXT_NODE) {\r\n        // Nếu có bất kỳ text node nào (kể cả toàn dấu cách, xuống dòng),\r\n        // thì ta coi element này là KHÔNG rỗng\r\n        if ((node as Text).data.length > 0) {\r\n          return false\r\n        }\r\n      } else if (node.nodeType === Node.ELEMENT_NODE) {\r\n        // Nếu còn phần tử con thì không rỗng\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  static checkIfElementContainsText(element: HTMLElement): boolean {\r\n    const walker = document.createTreeWalker(element, NodeFilter.SHOW_TEXT, {\r\n      acceptNode(node) {\r\n        // Nếu node có độ dài > 0 (bao gồm khoảng trắng), thì coi là có text\r\n        return node.nodeValue && node.nodeValue.length > 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT\r\n      },\r\n    })\r\n    return !!walker.nextNode()\r\n  }\r\n\r\n  static getDeepestChildOfElement(element: HTMLElement): HTMLElement | null {\r\n    let currentElement: HTMLElement = element\r\n    while (currentElement.lastChild && currentElement.lastChild instanceof HTMLElement) {\r\n      currentElement = currentElement.lastChild as HTMLElement\r\n    }\r\n    return currentElement\r\n  }\r\n\r\n  static insertElementAfterElement(beforeElement: HTMLElement, afterElement: HTMLElement): void {\r\n    beforeElement.insertAdjacentElement(\"afterend\", afterElement)\r\n  }\r\n\r\n  /**\r\n   * Chia element thành 2 phần (before và after), sau đó focus caret vào element sau (element after), nếu caretAtMiddle là true thì focus caret vào element giữa (element middle)\r\n   * @param element html element\r\n   * @param selection selection\r\n   * @returns 2 element mới (before và after) hoặc 3 element mới (before, middle và after)\r\n   */\r\n  static splitElementInHalfAtCaret(\r\n    element: HTMLElement,\r\n    selection: Selection,\r\n    caretAtMiddle: boolean = false\r\n  ): HTMLElement[] {\r\n    const range = selection.getRangeAt(0)\r\n\r\n    // Đoạn trước caret\r\n    const beforeRange = range.cloneRange()\r\n    beforeRange.setStartBefore(element)\r\n    const beforeFrag = beforeRange.cloneContents()\r\n\r\n    // Đoạn sau caret\r\n    const afterRange = range.cloneRange()\r\n    afterRange.setEndAfter(element)\r\n    const afterFrag = afterRange.cloneContents()\r\n\r\n    const beforeElement = beforeFrag.firstChild as HTMLElement\r\n    if (!this.checkIfElementContainsText(beforeElement)) {\r\n      const deepestChild = this.getDeepestChildOfElement(beforeElement)\r\n      if (deepestChild) {\r\n        deepestChild.innerHTML = \"<br>\"\r\n      } else {\r\n        beforeElement.innerHTML = \"<br>\"\r\n      }\r\n    }\r\n    const afterElement = afterFrag.firstChild as HTMLElement\r\n    if (!this.checkIfElementContainsText(afterElement)) {\r\n      const deepestChild = this.getDeepestChildOfElement(afterElement)\r\n      if (deepestChild) {\r\n        deepestChild.innerHTML = \"<br>\"\r\n      } else {\r\n        afterElement.innerHTML = \"<br>\"\r\n      }\r\n    }\r\n\r\n    const newElements: HTMLElement[] = [beforeElement, afterElement]\r\n    if (caretAtMiddle) {\r\n      const middleElement = document.createElement(element.tagName)\r\n      middleElement.innerHTML = \"<br>\"\r\n      newElements[1] = middleElement\r\n      newElements[2] = afterElement\r\n    }\r\n\r\n    // Thay thế element cũ bằng 2 element mới\r\n    element.replaceWith(...newElements)\r\n\r\n    // Focus caret trong element mới (element after or middle)\r\n    this.moveCaretToStartOfElement(newElements[1], selection, document.createRange())\r\n\r\n    return newElements\r\n  }\r\n\r\n  static splitCurrentTopBlockElementAtCaret(selection: Selection, caretAtMiddle: boolean = false): HTMLElement[] {\r\n    const currentTopBlockElement = this.getTopBlockElementFromSelection(selection)\r\n    if (currentTopBlockElement) {\r\n      return this.splitElementInHalfAtCaret(currentTopBlockElement, selection, caretAtMiddle)\r\n    }\r\n    return []\r\n  }\r\n\r\n  static isSelectingText(): boolean {\r\n    const selection = window.getSelection()\r\n    return !!selection && !selection.isCollapsed\r\n  }\r\n\r\n  static removeOverlapChildTags(parent: HTMLElement, descendantTagNames: string[]): void {\r\n    const descendants = Array.from(parent.querySelectorAll<HTMLElement>(descendantTagNames.join(\",\")))\r\n    for (const descendant of descendants) {\r\n      descendant.replaceWith(...descendant.childNodes)\r\n    }\r\n  }\r\n\r\n  static saveCurrentCaretPosition(selection?: Selection): void {\r\n    if (editorContent.checkIsFocusingInEditorContent()) {\r\n      this.savedCaretPosition = selection ? selection.getRangeAt(0) : window.getSelection()?.getRangeAt(0) || null\r\n    }\r\n  }\r\n\r\n  static restoreCaretPosition(): Selection | null {\r\n    if (this.savedCaretPosition) {\r\n      const selection = window.getSelection()\r\n      if (selection) {\r\n        selection.removeAllRanges()\r\n        selection.addRange(this.savedCaretPosition)\r\n        return selection\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  static insertElementAtCaret(element: HTMLElement, selection: Selection): void {\r\n    selection.getRangeAt(0).insertNode(element)\r\n  }\r\n\r\n  /**\r\n   * Lấy element tại vị trí con trỏ caret hiện tại\r\n   * @param selection Selection object từ window.getSelection()\r\n   * @returns HTMLElement tại vị trí caret hoặc null nếu không tìm thấy\r\n   */\r\n  static getElementAtCaretPosition(selection: Selection): HTMLElement | null {\r\n    const range = selection.getRangeAt(0)\r\n    const container = range.commonAncestorContainer\r\n\r\n    if (container.nodeType === Node.TEXT_NODE) {\r\n      // Nếu container là text node, lấy parent element\r\n      return container.parentElement as HTMLElement\r\n    } else if (container.nodeType === Node.ELEMENT_NODE) {\r\n      // Nếu container là element node\r\n      return container as HTMLElement\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  static notify(type: ENotifyType, message: string) {\r\n    const notificationElement = document.createElement(\"div\")\r\n    notificationElement.className =\r\n      \"fixed top-0 left-0 w-[250px] h-[100px] bg-white border border-gray-400 rounded-md flex items-center p-4 text-black\"\r\n    if (type === ENotifyType.SUCCESS) {\r\n      notificationElement.classList.add(\"bg-green-300\")\r\n    } else if (type === ENotifyType.ERROR) {\r\n      notificationElement.classList.add(\"bg-red-300\")\r\n    } else if (type === ENotifyType.WARNING) {\r\n      notificationElement.classList.add(\"bg-yellow-300\")\r\n    } else if (type === ENotifyType.INFO) {\r\n      notificationElement.classList.add(\"bg-blue-300\")\r\n    }\r\n    notificationElement.innerHTML = message\r\n    document.body.appendChild(notificationElement)\r\n    setTimeout(() => {\r\n      notificationElement.remove()\r\n    }, 2000)\r\n  }\r\n}\r\n","import { ETextListingType } from \"@/enums/global-enums\"\r\nimport { CodeVCNEditorHelper } from \"@/helpers/codevcn-editor-helper.js\"\r\nimport { editorContent } from \"@/lib/artifact/content/editor.content.js\"\r\n\r\nclass TextListingStylish {\r\n  private currentTagName: string = \"\"\r\n\r\n  constructor() {}\r\n\r\n  private setCurrentTagName(listingType: ETextListingType): void {\r\n    this.currentTagName = listingType === ETextListingType.NUMBERED_LIST ? \"OL\" : \"UL\"\r\n  }\r\n\r\n  private getClosestListLineElement(selection?: Selection | null): HTMLElement | null {\r\n    if (!selection || selection.rangeCount === 0) return null\r\n\r\n    let elementOfSelection: HTMLElement\r\n    const node = selection.anchorNode\r\n    if (node && node.nodeType === Node.TEXT_NODE) {\r\n      elementOfSelection = node.parentNode as HTMLElement // nếu caret nằm trong text thì lấy cha\r\n    } else {\r\n      elementOfSelection = node as HTMLElement\r\n    }\r\n\r\n    const editorContentElement = editorContent.getContentElement()\r\n    if (elementOfSelection.tagName === \"LI\") {\r\n      if (editorContentElement.contains(elementOfSelection)) {\r\n        return elementOfSelection\r\n      }\r\n    } else if (elementOfSelection.tagName === this.currentTagName) {\r\n      return elementOfSelection.lastElementChild as HTMLElement\r\n    }\r\n    return null\r\n  }\r\n\r\n  private insertNewLine(currentLiElement: HTMLElement, selection: Selection): void {\r\n    // Tách selection ra khỏi li hiện tại\r\n    const range = selection.getRangeAt(0)\r\n    const after = range.extractContents()\r\n\r\n    // Tạo li mới\r\n    const newLi = document.createElement(\"li\")\r\n    if (!after.textContent) {\r\n      newLi.innerHTML = \"<br>\" // giữ caret hiển thị\r\n    } else {\r\n      newLi.appendChild(after)\r\n    }\r\n\r\n    // Chèn vào sau li hiện tại\r\n    currentLiElement.insertAdjacentElement(\"afterend\", newLi)\r\n\r\n    // Đặt caret vào li mới\r\n    const newRange = document.createRange()\r\n    newRange.setStart(newLi, 0)\r\n    newRange.collapse(true)\r\n    selection.removeAllRanges()\r\n    selection.addRange(newRange)\r\n  }\r\n\r\n  private isOnEmptyLine(liElement: HTMLElement): boolean {\r\n    const trimmedInnerHTML = liElement.innerHTML.trim()\r\n    return trimmedInnerHTML === \"<br>\" || trimmedInnerHTML === \"\"\r\n  }\r\n\r\n  private deleteLine(liElement: HTMLElement): void {\r\n    liElement.remove()\r\n  }\r\n\r\n  private isOnListLine(): boolean {\r\n    return !!this.currentTagName\r\n  }\r\n\r\n  private createNewList(...nodes: Node[]): HTMLElement {\r\n    const list = document.createElement(this.currentTagName)\r\n    const line = document.createElement(\"li\")\r\n    line.innerHTML = \"<br>\"\r\n    if (nodes.length > 0) {\r\n      line.replaceChildren(...nodes)\r\n    }\r\n    list.appendChild(line)\r\n    return list\r\n  }\r\n\r\n  private wrapElementContentByNewList(element: HTMLElement): void {\r\n    element.replaceChildren(this.createNewList(...element.childNodes))\r\n  }\r\n\r\n  /**\r\n   * Tạo danh sách: Nếu caret nằm trong li thì tạo li mới, nếu li hiện tại rỗng thì xóa li, nếu caret nằm ngoài li thì tạo danh sách\r\n   * @param selection Selection của user\r\n   */\r\n  private makeListing(selection: Selection) {\r\n    const listLineElement = this.getClosestListLineElement(selection)\r\n    if (listLineElement) {\r\n      if (this.isOnEmptyLine(listLineElement)) {\r\n        this.deleteLine(listLineElement)\r\n      } else {\r\n        this.insertNewLine(listLineElement, selection)\r\n      }\r\n    } else {\r\n      const anchorNode = selection.anchorNode!\r\n      const topBlockElement = CodeVCNEditorHelper.getTopBlockElementFromNode(\r\n        anchorNode.nodeType === Node.TEXT_NODE ? (anchorNode.parentNode as HTMLElement) : (anchorNode as HTMLElement)\r\n      )\r\n      if (topBlockElement) {\r\n        this.wrapElementContentByNewList(topBlockElement)\r\n      }\r\n    }\r\n  }\r\n\r\n  private insertNewListInsideLine(lineElement: HTMLElement): void {\r\n    const newList = this.createNewList()\r\n    lineElement.appendChild(newList)\r\n  }\r\n\r\n  private makeNestedListing(selection: Selection): void {\r\n    const listLineElement = this.getClosestListLineElement(selection)\r\n    if (listLineElement) {\r\n      if (this.isOnEmptyLine(listLineElement)) {\r\n        this.deleteLine(listLineElement)\r\n        const selection = window.getSelection()\r\n        const currentLineElement = this.getClosestListLineElement(selection)\r\n        if (currentLineElement) {\r\n          this.insertNewListInsideLine(currentLineElement)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private makeListingOnToolbarButtonClick(listingType: ETextListingType): void {\r\n    const selection = editorContent.checkIsFocusingInEditorContent()\r\n    if (!selection) return\r\n    this.setCurrentTagName(listingType)\r\n    this.makeListing(selection)\r\n  }\r\n\r\n  private makeListingOnKeyboardEvent(e: KeyboardEvent): void {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault()\r\n      const selection = editorContent.checkIsFocusingInEditorContent()\r\n      if (!selection) return\r\n      this.makeListing(selection)\r\n    } else if (e.key === \"Tab\") {\r\n      e.preventDefault()\r\n      const selection = editorContent.checkIsFocusingInEditorContent()\r\n      if (!selection) return\r\n      this.makeNestedListing(selection)\r\n    }\r\n  }\r\n\r\n  onAction(listingType?: ETextListingType, e?: KeyboardEvent): void {\r\n    if (listingType) {\r\n      this.makeListingOnToolbarButtonClick(listingType)\r\n    } else if (e && this.isOnListLine()) {\r\n      this.makeListingOnKeyboardEvent(e)\r\n    }\r\n  }\r\n}\r\n\r\nexport const textListingStylish = new TextListingStylish()\r\n","import { EErrorMessage } from \"@/enums/global-enums\"\r\n\r\nexport class EditorInternalErrorHelper {\r\n  static createError(message: EErrorMessage): Error {\r\n    return new Error(message)\r\n  }\r\n}\r\n","import { EBlockquoteType, EErrorMessage } from \"@/enums/global-enums.js\"\r\nimport { CodeVCNEditorHelper } from \"@/helpers/codevcn-editor-helper.js\"\r\nimport { EditorInternalErrorHelper } from \"@/helpers/error-helper.js\"\r\nimport { editorContent } from \"@/lib/artifact/content/editor.content.js\"\r\n\r\nclass BlockquoteStylish {\r\n  private readonly blockQuoteTagName: string = \"BLOCKQUOTE\"\r\n  private readonly quoteLineTagName: string = \"P\"\r\n  private currentBlockquoteElement: HTMLElement | null = null\r\n\r\n  constructor() {}\r\n\r\n  private createBlockQuoteElement(blockQuoteInnerHTML: HTMLElement[\"innerHTML\"]): HTMLElement {\r\n    const blockQuoteElement = document.createElement(this.blockQuoteTagName)\r\n    blockQuoteElement.innerHTML = blockQuoteInnerHTML\r\n    return blockQuoteElement\r\n  }\r\n\r\n  private insertNewBlockquoteElement(topBlockElement: HTMLElement): void {\r\n    const blockQuoteElement = this.createBlockQuoteElement(`<${this.quoteLineTagName}><br></${this.quoteLineTagName}>`)\r\n    topBlockElement.replaceChildren(blockQuoteElement)\r\n    this.currentBlockquoteElement = blockQuoteElement\r\n  }\r\n\r\n  private exitBlockquote(selection: Selection): void {\r\n    const latestTopBlockElement = CodeVCNEditorHelper.findLatestTopBlockElement()\r\n    if (latestTopBlockElement) {\r\n      CodeVCNEditorHelper.insertNewTopBlockElementAfterElement(selection, latestTopBlockElement)\r\n    }\r\n    this.currentBlockquoteElement = null\r\n  }\r\n\r\n  private checkIfIsInBlockquote(selection: Selection): HTMLElement | null {\r\n    const anchorNode = selection.anchorNode\r\n    if (!anchorNode) return null\r\n    let node: HTMLElement | null = null\r\n    if (anchorNode.nodeType === Node.TEXT_NODE) {\r\n      node = anchorNode.parentNode as HTMLElement | null\r\n    } else {\r\n      node = anchorNode as HTMLElement\r\n    }\r\n    if (node?.tagName === this.blockQuoteTagName) {\r\n      return node\r\n    }\r\n    const blockquoteElement = node?.closest<HTMLElement>(this.blockQuoteTagName) || null\r\n    const editorContentElement = editorContent.getContentElement()\r\n    return editorContentElement.contains(blockquoteElement) ? blockquoteElement : null\r\n  }\r\n\r\n  private unblockquote(selection: Selection): void {\r\n    const topBlockElement = CodeVCNEditorHelper.getTopBlockElementFromSelection(selection)\r\n    if (topBlockElement) {\r\n      const blockquoteElementFirstChild = topBlockElement.querySelector(\r\n        this.blockQuoteTagName.toLowerCase()\r\n      ) as HTMLElement\r\n      if (blockquoteElementFirstChild) {\r\n        const childNodes = blockquoteElementFirstChild.childNodes\r\n        const newTopBlocks: HTMLElement[] = []\r\n        for (const childNode of childNodes) {\r\n          const topBlock = document.createElement(CodeVCNEditorHelper.topBlockElementTagName)\r\n          topBlock.appendChild(childNode.cloneNode(true))\r\n          newTopBlocks.push(topBlock)\r\n        }\r\n        topBlockElement.replaceWith(...newTopBlocks)\r\n      }\r\n    }\r\n    this.currentBlockquoteElement = null\r\n  }\r\n\r\n  private makeBlockquoteOnButtonClick(): void {\r\n    const selection = editorContent.checkIsFocusingInEditorContent()\r\n    if (!selection) return\r\n    // bắt buộc phải check bằng selection hiện tại khi tạo blockquote bằng click on button, vì\r\n    // khi tạo blockquote mới thì chưa biết caret có nằm trong blockquote hay không\r\n    if (this.checkIfIsInBlockquote(selection)) {\r\n      this.unblockquote(selection)\r\n      return\r\n    }\r\n    const { topBlockElement, isEmpty } = CodeVCNEditorHelper.isEmptyTopBlock(selection)\r\n    if (topBlockElement) {\r\n      if (isEmpty) {\r\n        // nếu đang ở trong 1 block trống thì tạo blockquote cho block đó\r\n        this.insertNewBlockquoteElement(topBlockElement)\r\n      } else {\r\n        // nếu đang ở trong 1 block KHÔNG trống thì tạo blockquote cho block mới\r\n        const newBlockElement = CodeVCNEditorHelper.insertNewTopBlockElementAfterElement(selection, topBlockElement)\r\n        this.insertNewBlockquoteElement(newBlockElement)\r\n      }\r\n    }\r\n  }\r\n\r\n  private getClosestQuoteLineElement(selection: Selection): HTMLElement | null {\r\n    let node: HTMLElement\r\n    const anchorNode = selection.anchorNode!\r\n    if (anchorNode.nodeType === Node.TEXT_NODE) {\r\n      node = anchorNode.parentNode as HTMLElement\r\n    } else {\r\n      node = anchorNode as HTMLElement\r\n    }\r\n    if (node.tagName === this.quoteLineTagName) {\r\n      return node as HTMLElement\r\n    }\r\n    let quoteLineElement: HTMLElement | null = null\r\n    while (node && node.tagName !== this.quoteLineTagName && this.currentBlockquoteElement?.contains(node)) {\r\n      node = node.parentNode as HTMLElement\r\n      quoteLineElement = node\r\n    }\r\n    if (quoteLineElement?.tagName !== this.quoteLineTagName) return null\r\n    return quoteLineElement\r\n  }\r\n\r\n  private isOnEmptyLine(selection: Selection): boolean {\r\n    const quoteLineElement = this.getClosestQuoteLineElement(selection)\r\n    if (!quoteLineElement) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.QUOTE_LINE_ELEMENT_NOT_FOUND)\r\n    }\r\n    const trimmedInnerHTML = quoteLineElement.innerHTML.trim()\r\n    return trimmedInnerHTML === \"<br>\" || trimmedInnerHTML === \"\"\r\n  }\r\n\r\n  private insertNewEmptyLine(selection: Selection): void {\r\n    if (!this.currentBlockquoteElement) return\r\n    const newLineElement = document.createElement(this.quoteLineTagName)\r\n    newLineElement.innerHTML = \"<br>\"\r\n    this.currentBlockquoteElement.appendChild(newLineElement)\r\n    CodeVCNEditorHelper.moveCaretToStartOfElement(newLineElement, selection, selection.getRangeAt(0))\r\n  }\r\n\r\n  private makeBlockquoteOnKeyboardEvent(e: KeyboardEvent): void {\r\n    if (e.key === \"Enter\") {\r\n      const selection = editorContent.checkIsFocusingInEditorContent()\r\n      if (!selection) return\r\n      const isInBlockquote = this.checkIfIsInBlockquote(selection)\r\n      if (!isInBlockquote) return\r\n      e.preventDefault()\r\n      // chỉ dc thực thi nếu caret nằm trong blockquote\r\n      if (this.isOnEmptyLine(selection)) {\r\n        this.exitBlockquote(selection)\r\n      } else {\r\n        this.insertNewEmptyLine(selection)\r\n      }\r\n    }\r\n  }\r\n\r\n  onAction(action?: EBlockquoteType, e?: KeyboardEvent) {\r\n    if (action) {\r\n      switch (action) {\r\n        case EBlockquoteType.BLOCKQUOTE:\r\n          this.makeBlockquoteOnButtonClick()\r\n          break\r\n      }\r\n    } else if (e) {\r\n      this.makeBlockquoteOnKeyboardEvent(e)\r\n    }\r\n  }\r\n}\r\n\r\nexport const blockquoteStylish = new BlockquoteStylish()\r\n","/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func, args) {\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySplice = unapply(Array.prototype.splice);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(func) {\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return construct(func, args);\n  };\n}\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ARIA_ATTR: ARIA_ATTR,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n  DATA_ATTR: DATA_ATTR,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  ERB_EXPR: ERB_EXPR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR\n});\n\n/* eslint-disable @typescript-eslint/indent */\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n  DOMPurify.version = '3.2.6';\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document || !window.Element) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (§7.3.3)\n   *   - DOM Tree Accessors (§3.1.5)\n   *   - Form Element Parent-Child Relations (§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n   *   - HTMLCollection (§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : clone({});\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : clone({});\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, element) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element\n      });\n    }\n    element.removeAttribute(name);\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(element) {\n    return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n  };\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function _isNode(value) {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n  function _executeHooks(hooks, currentNode, data) {\n    arrayForEach(hooks, hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (SAFE_FOR_XML && currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\\w!]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined\n    };\n    let l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      const initValue = attrValue;\n      let value = name === 'value' ? initValue : stringTrim(initValue);\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n      if (value !== initValue) {\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {\n          _removeAttribute(name, currentNode);\n        }\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function (entryPoint, hookFunction) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n      return index === -1 ? undefined : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.mjs.map\n","import { clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\nimport { render, type TemplateResult } from \"lit-html\"\r\nimport DOMPurify from \"dompurify\"\r\nimport type { TImageDimensions } from \"@/types/global-types\"\r\nimport { EErrorMessage } from \"@/enums/global-enums\"\r\n\r\nexport const cn = (...classes: string[]): string => {\r\n  return twMerge(clsx(classes))\r\n}\r\n\r\nexport const sanitizeHTML = (html: string): string => {\r\n  return DOMPurify.sanitize(html)\r\n}\r\n\r\nexport class LitHTMLHelper {\r\n  static createElementFromRenderer<T extends (...args: any[]) => TemplateResult<1>, R extends Element = HTMLElement>(\r\n    Renderer: T,\r\n    data: Parameters<T>\r\n  ): R {\r\n    const container = document.createElement(\"div\")\r\n    render(Renderer(...data), container)\r\n    return container.firstElementChild as R\r\n  }\r\n}\r\n\r\n/**\r\n * Kiểm tra string có phải URL hợp lệ không, chỉ chấp nhận protocol là https hoặc http\r\n * @param {string} str\r\n * @returns {boolean}\r\n */\r\nexport function isValidUrl(str: string): boolean {\r\n  try {\r\n    const urlProtocol = new URL(str).protocol\r\n    if (urlProtocol === \"https:\" || urlProtocol === \"http:\") {\r\n      return true\r\n    }\r\n    return false\r\n  } catch (_) {\r\n    return false\r\n  }\r\n}\r\n\r\nexport const getImageDimensions = (file: File): Promise<TImageDimensions> => {\r\n  return new Promise((resolve, reject) => {\r\n    if (!file.type.startsWith(\"image/\")) {\r\n      reject(new Error(EErrorMessage.ONLY_SUPPORT_IMAGE_FILE))\r\n      return\r\n    }\r\n    const img = new Image()\r\n    img.onload = () => {\r\n      resolve({ width: img.width, height: img.height })\r\n      URL.revokeObjectURL(img.src)\r\n    }\r\n    img.onerror = reject\r\n    img.src = URL.createObjectURL(file)\r\n  })\r\n}\r\n\r\nexport const copyTextToClipboard = (text: string, copyBoxElement?: HTMLElement): void => {\r\n  navigator.clipboard.writeText(text)\r\n  if (copyBoxElement) {\r\n    copyBoxElement.classList.add(\"STATE-copied\")\r\n    setTimeout(() => {\r\n      copyBoxElement.classList.remove(\"STATE-copied\")\r\n    }, 1500)\r\n  }\r\n}\r\n\r\nexport const nextFrame = (callback: () => void): void => {\r\n  requestAnimationFrame(() => {\r\n    requestAnimationFrame(callback)\r\n  })\r\n}\r\n\r\n/**\r\n * Chuyển đổi chữ cái đầu tiên thành chữ in hoa, các chữ cái còn lại thành chữ thường\r\n * @param word string cần chuyển đổi\r\n * @returns string đã chuyển đổi\r\n */\r\nexport const capitalizeWord = (word: string): string => {\r\n  if (typeof word !== \"string\" || word.length === 0) return word\r\n  return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()\r\n}\r\n","import { html, type TemplateResult } from \"lit-html\"\r\n\r\ntype ModalProps = {\r\n  body: TemplateResult<1>\r\n} & Partial<{\r\n  title: string\r\n  footer: TemplateResult<1>\r\n}>\r\n\r\nexport const Modal = ({ body, title, footer }: ModalProps): TemplateResult<1> => {\r\n  return html`\r\n    <div class=\"NAME-modal fixed inset-0 flex items-center justify-center p-4 z-[99] text-base\">\r\n      <div class=\"NAME-modal-overlay bg-black/50 absolute inset-0 z-10\"></div>\r\n      <div\r\n        class=\"NAME-modal-content flex flex-col bg-white rounded-2xl shadow-2xl w-full h-fit max-h-full max-w-[70vw] overflow-hidden relative z-11\"\r\n      >\r\n        <div class=\"NAME-modal-header flex items-center justify-between p-2 border-b border-gray-200\">\r\n          <h2 class=\"NAME-modal-title ml-3 text-xl font-bold text-black\">${title}</h2>\r\n          <button\r\n            class=\"NAME-modal-close p-2 cursor-pointer hover:bg-gray-100 rounded-full transition-colors duration-200\"\r\n          >\r\n            <i class=\"bi bi-x-lg text-gray-600 text-xl\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"NAME-modal-body flex flex-col grow overflow-y-auto h-fit\">${body}</div>\r\n        <div class=\"NAME-modal-footer w-full border-t border-gray-200 py-2 px-4 bg-white\">${footer}</div>\r\n      </div>\r\n    </div>\r\n  `\r\n}\r\n","import { Modal } from \"../modal\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers\"\r\nimport { html } from \"lit-html\"\r\n\r\nexport class ModalManager {\r\n  private static readonly modalElement: HTMLElement = this.initModal()\r\n\r\n  static getModalElement(): HTMLElement {\r\n    return this.modalElement\r\n  }\r\n\r\n  static showModal<TModal extends typeof Modal>(params: Parameters<TModal>): void {\r\n    const modalElement = this.modalElement\r\n    const { body, title, footer } = params[0]\r\n    modalElement\r\n      .querySelector(\".NAME-modal-body\")!\r\n      .replaceChildren(LitHTMLHelper.createElementFromRenderer(() => body, []))\r\n    if (title) {\r\n      const titleElement = modalElement.querySelector<HTMLElement>(\".NAME-modal-title\")!\r\n      titleElement.textContent = title\r\n      titleElement.hidden = false\r\n    } else {\r\n      modalElement.querySelector<HTMLLIElement>(\".NAME-modal-title\")!.hidden = true\r\n    }\r\n    if (footer) {\r\n      const modalFooterElement = modalElement.querySelector<HTMLElement>(\".NAME-modal-footer\")!\r\n      modalFooterElement.replaceChildren(LitHTMLHelper.createElementFromRenderer(() => footer, []))\r\n      modalFooterElement.hidden = false\r\n    } else {\r\n      modalElement.querySelector<HTMLLIElement>(\".NAME-modal-footer\")!.hidden = true\r\n    }\r\n    modalElement.classList.add(\"STATE-show\")\r\n  }\r\n\r\n  static hideModal(modalElement: HTMLElement): void {\r\n    modalElement.classList.remove(\"STATE-show\")\r\n  }\r\n\r\n  private static bindHideEventHandler(modalElement: HTMLElement): void {\r\n    modalElement.querySelector(\".NAME-modal-close\")?.addEventListener(\"click\", () => {\r\n      this.hideModal(modalElement)\r\n    })\r\n    modalElement.querySelector(\".NAME-modal-overlay\")?.addEventListener(\"click\", () => {\r\n      this.hideModal(modalElement)\r\n    })\r\n  }\r\n\r\n  private static initModal(): HTMLElement {\r\n    const modalElement = LitHTMLHelper.createElementFromRenderer<typeof Modal>(Modal, [{ body: html`` }])\r\n    document.body.appendChild(modalElement)\r\n    this.bindHideEventHandler(modalElement)\r\n    return modalElement\r\n  }\r\n}\r\n","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n}\n\n/**\n * Determine if a value is an empty object (safely handles Buffers)\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an empty object, otherwise false\n */\nconst isEmptyObject = (val) => {\n  // Early return for non-objects or Buffers to prevent RangeError\n  if (!isObject(val) || isBuffer(val)) {\n    return false;\n  }\n  \n  try {\n    return Object.keys(val).length === 0 && Object.getPrototypeOf(val) === Object.prototype;\n  } catch (e) {\n    // Fallback for any other objects that might cause RangeError with Object.keys()\n    return false;\n  }\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Buffer check\n    if (isBuffer(obj)) {\n      return;\n    }\n\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  if (isBuffer(obj)){\n    return null;\n  }\n\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      //Buffer check\n      if (isBuffer(source)) {\n        return source;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction(thing[iterator]);\n\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isEmptyObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (utils.isBoolean(value)) {\n      return value.toString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv,\n  _navigator as navigator,\n  origin\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), {\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    },\n    ...options\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data) ||\n      utils.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils.isResponse(data) || utils.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils.isObject(header) && utils.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite)\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn(...args);\n  }\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs)\n        }, threshold - passed);\n      }\n    }\n  }\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nexport default throttle;\n","import speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\n\nexport const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n}\n\nexport const progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n}\n\nexport const asyncDecorator = (fn) => (...args) => utils.asap(() => fn(...args));\n","import platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop , caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, prop , caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop , caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b , prop) => mergeDeepProperties(headersToObject(a), headersToObject(b),prop, true)\n  };\n\n  utils.forEach(Object.keys({...config1, ...config2}), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport isURLSameOrigin from \"./isURLSameOrigin.js\";\nimport cookies from \"./cookies.js\";\nimport buildFullPath from \"../core/buildFullPath.js\";\nimport mergeConfig from \"../core/mergeConfig.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport buildURL from \"./buildURL.js\";\n\nexport default (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let {data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth} = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  let contentType;\n\n  if (utils.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // Let the browser set it\n    } else if ((contentType = headers.getContentType()) !== false) {\n      // fix semicolon duplication issue for ReactNative FormData implementation\n      const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n      headers.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n    }\n  }\n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n}\n\n","import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport {progressEventReducer} from '../helpers/progressEventReducer.js';\nimport resolveConfig from \"../helpers/resolveConfig.js\";\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n","\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport composeSignals from \"../helpers/composeSignals.js\";\nimport {trackStream} from \"../helpers/trackStream.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport resolveConfig from \"../helpers/resolveConfig.js\";\nimport settle from \"../core/settle.js\";\n\nconst isFetchSupported = typeof fetch === 'function' && typeof Request === 'function' && typeof Response === 'function';\nconst isReadableStreamSupported = isFetchSupported && typeof ReadableStream === 'function';\n\n// used only inside the fetch adapter\nconst encodeText = isFetchSupported && (typeof TextEncoder === 'function' ?\n    ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) :\n    async (str) => new Uint8Array(await new Response(str).arrayBuffer())\n);\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsRequestStream = isReadableStreamSupported && test(() => {\n  let duplexAccessed = false;\n\n  const hasContentType = new Request(platform.origin, {\n    body: new ReadableStream(),\n    method: 'POST',\n    get duplex() {\n      duplexAccessed = true;\n      return 'half';\n    },\n  }).headers.has('Content-Type');\n\n  return duplexAccessed && !hasContentType;\n});\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst supportsResponseStream = isReadableStreamSupported &&\n  test(() => utils.isReadableStream(new Response('').body));\n\n\nconst resolvers = {\n  stream: supportsResponseStream && ((res) => res.body)\n};\n\nisFetchSupported && (((res) => {\n  ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n    !resolvers[type] && (resolvers[type] = utils.isFunction(res[type]) ? (res) => res[type]() :\n      (_, config) => {\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      })\n  });\n})(new Response));\n\nconst getBodyLength = async (body) => {\n  if (body == null) {\n    return 0;\n  }\n\n  if(utils.isBlob(body)) {\n    return body.size;\n  }\n\n  if(utils.isSpecCompliantForm(body)) {\n    const _request = new Request(platform.origin, {\n      method: 'POST',\n      body,\n    });\n    return (await _request.arrayBuffer()).byteLength;\n  }\n\n  if(utils.isArrayBufferView(body) || utils.isArrayBuffer(body)) {\n    return body.byteLength;\n  }\n\n  if(utils.isURLSearchParams(body)) {\n    body = body + '';\n  }\n\n  if(utils.isString(body)) {\n    return (await encodeText(body)).byteLength;\n  }\n}\n\nconst resolveBodyLength = async (headers, body) => {\n  const length = utils.toFiniteNumber(headers.getContentLength());\n\n  return length == null ? getBodyLength(body) : length;\n}\n\nexport default isFetchSupported && (async (config) => {\n  let {\n    url,\n    method,\n    data,\n    signal,\n    cancelToken,\n    timeout,\n    onDownloadProgress,\n    onUploadProgress,\n    responseType,\n    headers,\n    withCredentials = 'same-origin',\n    fetchOptions\n  } = resolveConfig(config);\n\n  responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n  let composedSignal = composeSignals([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n  let request;\n\n  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n  });\n\n  let requestContentLength;\n\n  try {\n    if (\n      onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n      (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n    ) {\n      let _request = new Request(url, {\n        method: 'POST',\n        body: data,\n        duplex: \"half\"\n      });\n\n      let contentTypeHeader;\n\n      if (utils.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n        headers.setContentType(contentTypeHeader)\n      }\n\n      if (_request.body) {\n        const [onProgress, flush] = progressEventDecorator(\n          requestContentLength,\n          progressEventReducer(asyncDecorator(onUploadProgress))\n        );\n\n        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n      }\n    }\n\n    if (!utils.isString(withCredentials)) {\n      withCredentials = withCredentials ? 'include' : 'omit';\n    }\n\n    // Cloudflare Workers throws when credentials are defined\n    // see https://github.com/cloudflare/workerd/issues/902\n    const isCredentialsSupported = \"credentials\" in Request.prototype;\n    request = new Request(url, {\n      ...fetchOptions,\n      signal: composedSignal,\n      method: method.toUpperCase(),\n      headers: headers.normalize().toJSON(),\n      body: data,\n      duplex: \"half\",\n      credentials: isCredentialsSupported ? withCredentials : undefined\n    });\n\n    let response = await fetch(request, fetchOptions);\n\n    const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n    if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n      const options = {};\n\n      ['status', 'statusText', 'headers'].forEach(prop => {\n        options[prop] = response[prop];\n      });\n\n      const responseContentLength = utils.toFiniteNumber(response.headers.get('content-length'));\n\n      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n        responseContentLength,\n        progressEventReducer(asyncDecorator(onDownloadProgress), true)\n      ) || [];\n\n      response = new Response(\n        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n          flush && flush();\n          unsubscribe && unsubscribe();\n        }),\n        options\n      );\n    }\n\n    responseType = responseType || 'text';\n\n    let responseData = await resolvers[utils.findKey(resolvers, responseType) || 'text'](response, config);\n\n    !isStreamResponse && unsubscribe && unsubscribe();\n\n    return await new Promise((resolve, reject) => {\n      settle(resolve, reject, {\n        data: responseData,\n        headers: AxiosHeaders.from(response.headers),\n        status: response.status,\n        statusText: response.statusText,\n        config,\n        request\n      })\n    })\n  } catch (err) {\n    unsubscribe && unsubscribe();\n\n    if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n      throw Object.assign(\n        new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n        {\n          cause: err.cause || err\n        }\n      )\n    }\n\n    throw AxiosError.from(err, err && err.code, config, request);\n  }\n});\n\n\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport fetchAdapter from './fetch.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: fetchAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","export const VERSION = \"1.11.0\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) {\n      // do nothing\n    } else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift(...requestInterceptorChain);\n      chain.push(...responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","import axios from './lib/axios.js';\n\n// This module is intended to unwrap Axios default export as named.\n// Keep top-level export same with static properties\n// so that it can keep same with es module or cjs\nconst {\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n} = axios;\n\nexport {\n  axios as default,\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n}\n","import type { TImageInfoRes, TUploadImageRes } from \"@/types/api-types\"\r\nimport axios from \"axios\"\r\n\r\nexport class CodeVCNEditorService {\r\n  static clientAxios = axios.create({\r\n    baseURL: \"http://localhost:3000/api\",\r\n  })\r\n\r\n  static async uploadImage(\r\n    endpoint: string,\r\n    files: File[],\r\n    onProgress: (progress: number) => void\r\n  ): Promise<TUploadImageRes> {\r\n    const formData = new FormData()\r\n    for (const file of files) {\r\n      formData.append(\"images\", file)\r\n    }\r\n    const { data } = await this.clientAxios.post<TUploadImageRes>(endpoint, formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n      onUploadProgress: (progressEvent) => {\r\n        const progress = Math.round((progressEvent.loaded * 100) / (progressEvent.total || 1))\r\n        onProgress(progress)\r\n      },\r\n    })\r\n    return data\r\n  }\r\n\r\n  static async fetchImageInfo(url: string): Promise<TImageInfoRes> {\r\n    return new Promise((resolve, reject) => {\r\n      const img = new Image()\r\n      img.onload = () => {\r\n        resolve({ width: img.naturalWidth, height: img.naturalHeight })\r\n      }\r\n      img.onerror = reject\r\n      img.src = url\r\n    })\r\n  }\r\n}\r\n","import{nothing as t}from\"../lit-html.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o=o=>o??t;export{o as ifDefined};\n//# sourceMappingURL=if-defined.js.map\n","import { html } from \"lit-html\"\r\nimport type { TemplateResult } from \"lit-html\"\r\nimport { ifDefined } from \"lit-html/directives/if-defined.js\"\r\n\r\ntype SkeletonProps = Partial<{\r\n  width: number\r\n  height: number\r\n  fullWidth: boolean\r\n  fullHeight: boolean\r\n}>\r\n\r\nexport const Skeleton = ({ width, height, fullWidth, fullHeight }: SkeletonProps): TemplateResult<1> => {\r\n  return html`<div\r\n    class=\"NAME-skeleton ${fullWidth ? \"w-full\" : \"\"} ${fullHeight\r\n      ? \"h-full\"\r\n      : \"\"} mb-3 rounded bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-pulse\"\r\n    style=${ifDefined(width || height ? `width: ${width || 0}px; height: ${height || 0}px;` : undefined)}\r\n  ></div>`\r\n}\r\n","import { CodeVCNEditorHelper } from \"@/helpers/codevcn-editor-helper\"\r\nimport { editorContent } from \"../../content/editor.content\"\r\nimport { EditorInternalErrorHelper } from \"@/helpers/error-helper\"\r\nimport { EErrorMessage } from \"@/enums/global-enums\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers\"\r\nimport { Skeleton } from \"@/lib/components/skeleton\"\r\nimport type { TImageSkeletonReplacer } from \"@/types/global-types\"\r\n\r\ntype TImageProperties = {\r\n  imgUrl: string\r\n  altText: string\r\n  height: number\r\n  width: number\r\n}\r\n\r\nclass ImageBlockingStylish {\r\n  private readonly imageBlockingTagName: string = \"IMG\"\r\n\r\n  constructor() {}\r\n\r\n  private createImageElement({ imgUrl, altText, height, width }: TImageProperties): HTMLImageElement {\r\n    const imageElement = document.createElement(this.imageBlockingTagName) as HTMLImageElement\r\n    imageElement.src = imgUrl\r\n    imageElement.alt = altText\r\n    imageElement.height = height\r\n    imageElement.width = width\r\n    return imageElement\r\n  }\r\n\r\n  private insertNewImageElement(\r\n    topBlockElement: HTMLElement,\r\n    { imgUrl, altText, height, width }: TImageProperties\r\n  ): void {\r\n    const imageElement = this.createImageElement({ imgUrl, altText, height, width })\r\n    topBlockElement.replaceChildren(imageElement)\r\n  }\r\n\r\n  private makeImageBlocking(\r\n    { imgUrl, altText, height, width }: TImageProperties,\r\n    skeletonReplacer?: TImageSkeletonReplacer\r\n  ): void {\r\n    const selection = CodeVCNEditorHelper.restoreCaretPosition()\r\n    if (!selection) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.SELECTION_NOT_FOUND)\r\n    }\r\n    if (skeletonReplacer) {\r\n      skeletonReplacer(this.createImageElement({ imgUrl, altText, height, width }))\r\n      return\r\n    }\r\n    CodeVCNEditorHelper.splitCurrentTopBlockElementAtCaret(selection, true)\r\n    const { topBlockElement, isEmpty } = CodeVCNEditorHelper.isEmptyTopBlock(selection)\r\n    if (topBlockElement) {\r\n      if (isEmpty) {\r\n        this.insertNewImageElement(topBlockElement, { imgUrl, altText, height, width })\r\n      } else {\r\n        const newBlockElement = CodeVCNEditorHelper.insertNewTopBlockElementAfterElement(selection, topBlockElement)\r\n        this.insertNewImageElement(newBlockElement, { imgUrl, altText, height, width })\r\n      }\r\n    }\r\n  }\r\n\r\n  private createImageSkeleton(height: number, width: number): HTMLElement {\r\n    return LitHTMLHelper.createElementFromRenderer(Skeleton, [{ width, height }])\r\n  }\r\n\r\n  private insertImageSkeleton(\r\n    topBlockElement: HTMLElement,\r\n    selection: Selection,\r\n    height: number,\r\n    width: number\r\n  ): HTMLElement {\r\n    const imageSkeleton = this.createImageSkeleton(height, width)\r\n    const pElement = document.createElement(\"p\")\r\n    pElement.innerHTML = \"<br>\"\r\n    topBlockElement.replaceChildren(pElement, imageSkeleton)\r\n    CodeVCNEditorHelper.moveCaretToStartOfElement(pElement, selection, selection.getRangeAt(0))\r\n    return imageSkeleton\r\n  }\r\n\r\n  renderImageSkeleton(height: number, width: number): TImageSkeletonReplacer {\r\n    const selection = CodeVCNEditorHelper.restoreCaretPosition()\r\n    if (!selection) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.SELECTION_NOT_FOUND)\r\n    }\r\n    CodeVCNEditorHelper.splitCurrentTopBlockElementAtCaret(selection, true)\r\n    const { topBlockElement, isEmpty } = CodeVCNEditorHelper.isEmptyTopBlock(selection)\r\n    if (!topBlockElement) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.TOP_BLOCK_NOT_FOUND)\r\n    }\r\n    let imageSkeleton: HTMLElement\r\n    if (isEmpty) {\r\n      imageSkeleton = this.insertImageSkeleton(topBlockElement, selection, height, width)\r\n    } else {\r\n      const newBlockElement = CodeVCNEditorHelper.insertNewTopBlockElementAfterElement(selection, topBlockElement)\r\n      imageSkeleton = this.insertImageSkeleton(newBlockElement, selection, height, width)\r\n    }\r\n    return (imageElement: HTMLImageElement) => {\r\n      imageSkeleton.replaceWith(imageElement)\r\n    }\r\n  }\r\n\r\n  onAction({ imgUrl, altText, height, width }: TImageProperties, skeletonReplacer?: TImageSkeletonReplacer) {\r\n    this.makeImageBlocking({ imgUrl, altText, height, width }, skeletonReplacer)\r\n  }\r\n}\r\n\r\nexport const imageBlockingStylish = new ImageBlockingStylish()\r\n","import { EErrorMessage, ENotifyType } from \"@/enums/global-enums\"\r\nimport { getImageDimensions, isValidUrl } from \"@/helpers/common-helpers\"\r\nimport { EditorInternalErrorHelper } from \"@/helpers/error-helper\"\r\nimport { ModalManager } from \"@/lib/components/managers/modal.manager\"\r\nimport { Modal } from \"@/lib/components/modal\"\r\nimport { CodeVCNEditorService } from \"@/services/codevcn-editor.service\"\r\nimport { html } from \"lit-html\"\r\nimport { imageBlockingStylish } from \"./image-blocking.stylish\"\r\nimport type { TImageDimensions, TImageSkeletonReplacer } from \"@/types/global-types\"\r\n\r\ntype TMemorizedImage = {\r\n  imgUrl: string\r\n  dimensions: TImageDimensions\r\n  caption: string\r\n}\r\n\r\nclass AddImageModalManager {\r\n  private addImageModal: HTMLElement\r\n  private uploadImageURL: string\r\n  private maxImageSizeAllowed: number\r\n  private maxImagesCountAllowed: number\r\n  private memorizedImage: TMemorizedImage | null = null\r\n\r\n  constructor() {\r\n    this.addImageModal = ModalManager.getModalElement()\r\n    this.uploadImageURL = \"\"\r\n    this.maxImageSizeAllowed = 10 * 1024 * 1024 // 10MB\r\n    this.maxImagesCountAllowed = 5\r\n  }\r\n\r\n  setUploadImageURL(url: string) {\r\n    if (!isValidUrl(url)) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.INVALID_UPLOAD_IMAGE_URL)\r\n    }\r\n    this.uploadImageURL = url\r\n  }\r\n\r\n  getUploadImageURL(): string {\r\n    return this.uploadImageURL\r\n  }\r\n\r\n  private switchAddImageType(e: PointerEvent) {\r\n    e.preventDefault()\r\n    const currentTarget = e.currentTarget as HTMLElement\r\n    const currentBtn = currentTarget.classList.contains(\"NAME-add-image-btn-upload\") ? \"upload\" : \"url\"\r\n    const addImageContent = this.addImageModal.querySelector(\".NAME-add-image-content\") as HTMLElement\r\n    const addImageTypeButtons = this.addImageModal.querySelector(\".NAME-add-image-type-buttons\") as HTMLElement\r\n    addImageContent.classList.remove(\"STATE-upload\", \"STATE-url\")\r\n    addImageTypeButtons.classList.remove(\"STATE-upload\", \"STATE-url\")\r\n    if (currentBtn === \"upload\") {\r\n      addImageContent.classList.add(\"STATE-upload\")\r\n      addImageTypeButtons.classList.add(\"STATE-upload\")\r\n    } else {\r\n      addImageContent.classList.add(\"STATE-url\")\r\n      addImageTypeButtons.classList.add(\"STATE-url\")\r\n    }\r\n  }\r\n\r\n  private pickImageFile(e: PointerEvent) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    const input = this.addImageModal.querySelector(\".NAME-add-image-upload-input\") as HTMLInputElement\r\n    input.click()\r\n  }\r\n\r\n  private notify(type: ENotifyType, message: string) {\r\n    console.error(\">>> notify:\", { message, type })\r\n  }\r\n\r\n  private validateImageFile(file: File): boolean {\r\n    if (file.size > this.maxImageSizeAllowed) {\r\n      this.notify(ENotifyType.ERROR, EErrorMessage.IMAGE_SIZE_TOO_LARGE)\r\n      return false\r\n    }\r\n    if (\r\n      file.type !== \"image/svg+xml\" &&\r\n      file.type !== \"image/png\" &&\r\n      file.type !== \"image/jpg\" &&\r\n      file.type !== \"image/jpeg\" &&\r\n      file.type !== \"image/gif\"\r\n    ) {\r\n      this.notify(ENotifyType.ERROR, EErrorMessage.INVALID_IMAGE_TYPE)\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  private validateImageFiles(files: File[]): boolean {\r\n    if (files.length > this.maxImagesCountAllowed) {\r\n      this.notify(ENotifyType.ERROR, EErrorMessage.MAX_IMAGES_COUNT_TOO_LARGE)\r\n      return false\r\n    }\r\n    for (const file of files) {\r\n      if (!this.validateImageFile(file)) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  private previewImage(imgAltText: string, url: string) {\r\n    const preview = this.addImageModal.querySelector(\".NAME-add-image-preview\") as HTMLElement\r\n    const image = new Image()\r\n    image.src = url\r\n    image.alt = imgAltText\r\n    image.className = \"w-full h-full object-contain\"\r\n    image.onload = () => {\r\n      preview.innerHTML = \"\"\r\n      preview.appendChild(image)\r\n    }\r\n    const imgUrlInputHidden = this.addImageModal.querySelector(\".NAME-add-image-img-url\") as HTMLInputElement\r\n    imgUrlInputHidden.value = url\r\n    const imgUrlInput = this.addImageModal.querySelector(\".NAME-add-image-url-input\") as HTMLInputElement\r\n    imgUrlInput.value = url\r\n  }\r\n\r\n  private checkIfImageFile(file: File): boolean {\r\n    return file.type.startsWith(\"image/\")\r\n  }\r\n\r\n  private memorizeImageData(imgUrl: string, dimensions: TImageDimensions, caption: string) {\r\n    this.memorizedImage = { imgUrl, dimensions, caption }\r\n  }\r\n\r\n  private renderImageSkeleton(height: number, width: number): TImageSkeletonReplacer {\r\n    return imageBlockingStylish.renderImageSkeleton(height, width)\r\n  }\r\n\r\n  private async uploadImageFile(file: File) {\r\n    return await CodeVCNEditorService.uploadImage(this.uploadImageURL, [file], (progress) => {\r\n      console.log(\">>> progress:\", progress)\r\n    })\r\n  }\r\n\r\n  async onPasteImage(e: ClipboardEvent) {\r\n    const clipboardData = e.clipboardData\r\n    if (clipboardData) {\r\n      const files = clipboardData.files\r\n      if (files && files.length > 0) {\r\n        const fileToUpload = files[0]\r\n        if (!this.checkIfImageFile(fileToUpload)) {\r\n          this.notify(ENotifyType.ERROR, EErrorMessage.ONLY_SUPPORT_IMAGE_FILE)\r\n          return\r\n        }\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        const dimensions = await getImageDimensions(fileToUpload)\r\n        const { width, height } = dimensions\r\n        const skeletonReplacer = this.renderImageSkeleton(height, width)\r\n        const result = await this.uploadImageFile(fileToUpload)\r\n        const imgUrl = result.files[0].url\r\n        const imgName = fileToUpload.name\r\n        this.memorizeImageData(imgUrl, dimensions, imgName)\r\n        imageBlockingStylish.onAction({ width, height, altText: imgName, imgUrl }, skeletonReplacer)\r\n      }\r\n    }\r\n  }\r\n\r\n  private async fillImageDimensions(imgDimensions: TImageDimensions) {\r\n    const { width, height } = imgDimensions\r\n    const widthInput = this.addImageModal.querySelector(\".NAME-add-image-width-input\") as HTMLInputElement\r\n    const heightInput = this.addImageModal.querySelector(\".NAME-add-image-height-input\") as HTMLInputElement\r\n    widthInput.value = `${width}`\r\n    heightInput.value = `${height}`\r\n  }\r\n\r\n  private async onImageFilePicked(e: PointerEvent) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    const input = e.currentTarget as HTMLInputElement\r\n    const filesList = input.files\r\n    if (filesList && filesList.length > 0) {\r\n      const files = Array.from(filesList)\r\n      if (!this.validateImageFiles(files)) return\r\n      const result = await this.uploadImageFile(files[0])\r\n      this.previewImage(files[0].name, result.files[0].url)\r\n      const dimensions = await getImageDimensions(files[0])\r\n      this.fillImageDimensions(dimensions)\r\n    }\r\n    input.value = \"\"\r\n    input.files = null\r\n    input.src = \"\"\r\n  }\r\n\r\n  private async onChangeImageURL(e: Event) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    const input = e.currentTarget as HTMLInputElement\r\n    const url = input.value\r\n    this.previewImage(\"\", url)\r\n    const imgInfo = await CodeVCNEditorService.fetchImageInfo(url)\r\n    this.fillImageDimensions(imgInfo)\r\n  }\r\n\r\n  private bindDragAndDropImageEvent() {\r\n    const dropZone = this.addImageModal.querySelector<HTMLElement>(\".NAME-add-image-drop-zone\")\r\n    if (!dropZone) return\r\n\r\n    // Ngăn trình duyệt mở ảnh khi kéo thả\r\n    for (const eventName of [\"dragenter\", \"dragover\", \"dragleave\", \"drop\"]) {\r\n      dropZone.addEventListener(eventName, (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      })\r\n    }\r\n\r\n    // Highlight khi kéo file vào\r\n    for (const eventName of [\"dragenter\", \"dragover\"]) {\r\n      dropZone.addEventListener(eventName, () => {\r\n        dropZone.classList.add(\"bg-gray-100\")\r\n      })\r\n    }\r\n\r\n    // Remove highlight khi kéo file ra\r\n    for (const eventName of [\"dragleave\", \"drop\"]) {\r\n      dropZone.addEventListener(eventName, () => {\r\n        dropZone.classList.remove(\"bg-gray-100\")\r\n      })\r\n    }\r\n\r\n    // Xử lý khi thả file\r\n    dropZone.addEventListener(\"drop\", async (e) => {\r\n      const files = e.dataTransfer?.files || []\r\n      if (files.length === 0) return\r\n\r\n      // Ví dụ: chỉ lấy file ảnh\r\n      const images = Array.from(files).filter((file) => this.checkIfImageFile(file))\r\n\r\n      if (images.length > 0) {\r\n        // Ở đây bạn có thể upload ảnh hoặc preview\r\n        const fileToUpload = files[0]\r\n        const result = await this.uploadImageFile(fileToUpload)\r\n        this.previewImage(fileToUpload.name, result.files[0].url)\r\n        const dimensions = await getImageDimensions(fileToUpload)\r\n        this.fillImageDimensions(dimensions)\r\n      }\r\n    })\r\n  }\r\n\r\n  private onAction(e: PointerEvent) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    const infoForm = this.addImageModal.querySelector(\".NAME-add-image-info-form\") as HTMLFormElement\r\n    const formData = new FormData(infoForm)\r\n    const width = parseInt(formData.get(\"img-width\") as string)\r\n    const height = parseInt(formData.get(\"img-height\") as string)\r\n    const imgUrl = formData.get(\"img-url\") as string\r\n    const caption = formData.get(\"img-caption\") as string\r\n    imageBlockingStylish.onAction({ width, height, altText: caption, imgUrl })\r\n  }\r\n\r\n  showAddImageModal() {\r\n    ModalManager.showModal<typeof Modal>([\r\n      {\r\n        title: \"Add Image\",\r\n        body: html`\r\n          <div class=\"NAME-add-image-container p-4 space-y-6 h-full\">\r\n            <div class=\"NAME-add-image-type-buttons STATE-upload flex gap-2 bg-gray-100 rounded-xl p-1\">\r\n              <button\r\n                @click=${(e: PointerEvent) => this.switchAddImageType(e)}\r\n                class=\"NAME-add-image-btn-upload flex-1 flex items-center justify-center cursor-pointer gap-2 p-2 leading-none rounded-lg font-medium transition-all duration-300 text-gray-600 hover:bg-white hover:shadow\"\r\n              >\r\n                <i class=\"bi bi-upload font-bold\"></i>\r\n                Upload File\r\n              </button>\r\n              <button\r\n                @click=${(e: PointerEvent) => this.switchAddImageType(e)}\r\n                class=\"NAME-add-image-btn-url flex-1 flex items-center justify-center cursor-pointer gap-2 p-2 leading-none rounded-lg font-medium transition-all duration-300 text-gray-600 hover:bg-white hover:shadow\"\r\n              >\r\n                <i class=\"bi bi-link-45deg font-bold\"></i>\r\n                Image URL\r\n              </button>\r\n            </div>\r\n\r\n            <div class=\"NAME-add-image-content STATE-upload space-y-4\">\r\n              <input\r\n                @change=${(e: PointerEvent) => this.onImageFilePicked(e)}\r\n                type=\"file\"\r\n                multiple\r\n                accept=\".svg,.png,.jpg,.jpeg,.gif\"\r\n                hidden\r\n                class=\"NAME-add-image-upload-input\"\r\n              />\r\n              <section\r\n                @click=${(e: PointerEvent) => this.pickImageFile(e)}\r\n                class=\"NAME-add-image-upload-section NAME-add-image-drop-zone hover:bg-gray-50 border-2 border-dashed rounded-xl p-8 text-center border-gray-400 transition-colors duration-200 cursor-pointer\"\r\n              >\r\n                <div class=\"flex flex-col items-center space-y-4\">\r\n                  <div class=\"p-4 rounded-full bg-gray-100 transition-colors duration-200\">\r\n                    <i class=\"bi bi-camera text-gray-600 text-2xl font-bold\"></i>\r\n                  </div>\r\n                  <div>\r\n                    <p class=\"text-lg font-medium text-black mb-2\">Click to upload or drag and drop</p>\r\n                    <p class=\"text-sm text-gray-600\">SVG, PNG, JPG or GIF (max: 10MB)</p>\r\n                  </div>\r\n                  <button\r\n                    @click=${(e: PointerEvent) => this.pickImageFile(e)}\r\n                    class=\"bg-black text-white px-6 py-1 cursor-pointer rounded-lg hover:scale-105 transition duration-200 font-medium\"\r\n                  >\r\n                    Choose File\r\n                  </button>\r\n                </div>\r\n              </section>\r\n              <section class=\"NAME-add-image-url-section space-y-2\">\r\n                <label class=\"block text-sm pl-1 font-medium text-black\">Image URL</label>\r\n                <input\r\n                  type=\"url\"\r\n                  @change=${(e: PointerEvent) => this.onChangeImageURL(e)}\r\n                  placeholder=\"Example: https://example.com/image.jpg\"\r\n                  class=\"NAME-add-image-url-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent transition-all duration-200\"\r\n                  value=${this.memorizedImage?.imgUrl || \"\"}\r\n                />\r\n              </section>\r\n            </div>\r\n\r\n            <div class=\"space-y-2\">\r\n              <label class=\"block text-sm pl-1 font-medium text-black\">Image Preview</label>\r\n              <div class=\"border border-gray-300 rounded-lg p-2 bg-gray-100\">\r\n                <div class=\"NAME-add-image-preview flex flex-col items-center justify-center text-gray-500\">\r\n                  ${this.memorizedImage\r\n                    ? html` <img src=${this.memorizedImage?.imgUrl || \"\"} alt=${this.memorizedImage?.caption || \"\"} /> `\r\n                    : html`<i class=\"bi bi-image text-4xl font-bold\"></i>\r\n                        <p class=\"text-sm mt-2\">No image selected</p>`}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <form\r\n              action=\"#\"\r\n              @submit=${(e: SubmitEvent) => e.preventDefault()}\r\n              class=\"NAME-add-image-info-form grid grid-cols-1 md:grid-cols-2 gap-6 pb-4\"\r\n            >\r\n              <input hidden name=\"img-url\" class=\"NAME-add-image-img-url\" />\r\n              <div class=\"space-y-4 grid-rows-2 flex flex-col justify-between\">\r\n                <div class=\"space-y-2\">\r\n                  <label class=\"block text-sm pl-1 font-medium text-black\">Width (px)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"800\"\r\n                    name=\"img-width\"\r\n                    class=\"NAME-add-image-width-input w-full px-4 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent transition-all duration-200\"\r\n                    value=${this.memorizedImage?.dimensions.width || \"\"}\r\n                  />\r\n                </div>\r\n                <div class=\"space-y-2\">\r\n                  <label class=\"block text-sm pl-1 font-medium text-black\">Height (px)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"600\"\r\n                    name=\"img-height\"\r\n                    class=\"NAME-add-image-height-input w-full px-4 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent transition-all duration-200\"\r\n                    value=${this.memorizedImage?.dimensions.height || \"\"}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"space-y-2 grid-rows-2 flex flex-col\">\r\n                <label class=\"block text-sm pl-1 font-medium text-black\">Description</label>\r\n                <textarea\r\n                  placeholder=\"Enter image caption...\"\r\n                  rows=\"5\"\r\n                  name=\"img-caption\"\r\n                  class=\"w-full grow px-4 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent transition-all duration-200 resize-none\"\r\n                >\r\n${this.memorizedImage?.caption || \"\"}</textarea\r\n                >\r\n              </div>\r\n            </form>\r\n          </div>\r\n        `,\r\n        footer: html`\r\n          <div class=\"flex items-center justify-end gap-3 text-base\">\r\n            <button\r\n              @click=${() => ModalManager.hideModal(this.addImageModal)}\r\n              class=\"px-6 py-1 cursor-pointer text-gray-600 hover:scale-105 transition duration-200 font-medium\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              @click=${(e: PointerEvent) => this.onAction(e)}\r\n              class=\"px-6 py-1 cursor-pointer bg-black text-white rounded-lg hover:scale-105 transition duration-200 font-medium shadow-lg hover:shadow-xl\"\r\n            >\r\n              Insert Image\r\n            </button>\r\n          </div>\r\n        `,\r\n      },\r\n    ])\r\n    this.bindDragAndDropImageEvent()\r\n  }\r\n}\r\n\r\nexport const addImageModalManager = new AddImageModalManager()\r\n","import { EInternalEvents } from \"@/enums/global-enums\"\r\n\r\ninterface IInternalEvents {\r\n  [EInternalEvents.BIND_TEXT_LINK_POPOVER_EVENT]: (textLinkElement: HTMLAnchorElement) => void\r\n}\r\n\r\nclass EventEmitter<IEvents extends IInternalEvents> {\r\n  private listeners: {\r\n    [K in keyof IEvents]?: IEvents[K][]\r\n  } = {}\r\n\r\n  on<K extends keyof IEvents>(name: K, handler: IEvents[K]): void {\r\n    if (this.listeners[name]) {\r\n      this.listeners[name].push(handler)\r\n    } else {\r\n      this.listeners[name] = [handler]\r\n    }\r\n  }\r\n\r\n  off<K extends keyof IEvents>(name: K, handler?: IEvents[K]): void {\r\n    if (handler) {\r\n      this.listeners[name] = (this.listeners[name] ?? []).filter((h) => h !== handler)\r\n    } else {\r\n      delete this.listeners[name]\r\n    }\r\n  }\r\n\r\n  emit<K extends keyof IEvents>(name: K, ...args: IEvents[K] extends (...args: infer P) => any ? P : never): void {\r\n    for (const handler of this.listeners[name] ?? []) {\r\n      queueMicrotask(() => {\r\n        ;(handler as any)(...args)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const eventEmitter = new EventEmitter<IInternalEvents>()\r\n","import { ETextStylingType } from \"@/enums/global-enums.js\"\r\nimport { CodeVCNEditorHelper } from \"@/helpers/codevcn-editor-helper.js\"\r\nimport { editorContent } from \"@/lib/artifact/content/editor.content.js\"\r\n\r\nclass TextStylingStylish {\r\n  private currentStylingType: ETextStylingType | null = null\r\n  private parentStylingElement: HTMLElement | null = null\r\n  /**\r\n   * Tên các thẻ styling cho từng loại styling (index theo thứ tự ưu tiên, 0 là ưu tiên nhất rồi đến 1, 2, 3, ...)\r\n   */\r\n  private readonly tagNamesForStyling: Record<ETextStylingType, string[]> = {\r\n    [ETextStylingType.BOLD]: [\"B\", \"STRONG\"],\r\n    [ETextStylingType.ITALIC]: [\"I\", \"EM\"],\r\n    [ETextStylingType.UNDERLINE]: [\"U\", \"INS\"],\r\n    [ETextStylingType.STRIKE_THROUGH]: [\"S\", \"DEL\", \"STRIKE\"],\r\n    [ETextStylingType.HEADING_1]: [\"H1\"],\r\n    [ETextStylingType.HEADING_2]: [\"H2\"],\r\n    [ETextStylingType.HEADING_3]: [\"H3\"],\r\n    [ETextStylingType.PARAGRAPH]: [\"P\"],\r\n  }\r\n\r\n  constructor() {}\r\n\r\n  getBoldTagNameMostPrioritied(): string {\r\n    return this.tagNamesForStyling[ETextStylingType.BOLD][0]\r\n  }\r\n\r\n  private getAllAvailableTagNames(): string[] {\r\n    return Object.values(this.tagNamesForStyling).flat()\r\n  }\r\n\r\n  private ifTagNameIsCurrentStyling(tagName: string): boolean {\r\n    return this.getCurrentStylingTagNames().includes(tagName)\r\n  }\r\n\r\n  private setCurrentStylingType(stylingType: ETextStylingType): void {\r\n    this.currentStylingType = stylingType\r\n  }\r\n\r\n  private getCurrentStylingTagNames(): string[] {\r\n    return this.tagNamesForStyling[this.currentStylingType!]\r\n  }\r\n\r\n  private getCurrentStylingTagName(): string {\r\n    return this.getCurrentStylingTagNames()[0]\r\n  }\r\n\r\n  /**\r\n   * Lấy thẻ <styling tag> gần nhất chứa đầy đủ vùng bôi đen.\r\n   */\r\n  private setParentStylingElement(selectionRange: Range): void {\r\n    const startContainer = selectionRange.startContainer\r\n    let node =\r\n      startContainer.nodeType === Node.TEXT_NODE ? startContainer.parentElement : (startContainer as HTMLElement)\r\n    if (!node) return\r\n    this.parentStylingElement = CodeVCNEditorHelper.getClosestElementOfNode(\r\n      node,\r\n      (node) => this.ifTagNameIsCurrentStyling(node.tagName) && node.contains(selectionRange.endContainer)\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Gộp 2 tag giống nhau liền kề thành 1 tag, VD: <b>Hello</b><b> World</b> => <b>Hello World</b>\r\n   */\r\n  private mergeAdjacentStyling(parent: HTMLElement): void {\r\n    let node = parent.firstChild as HTMLElement | null\r\n    while (node) {\r\n      const next = node.nextSibling as HTMLElement | null\r\n      if (\r\n        node.nodeType === Node.ELEMENT_NODE &&\r\n        next &&\r\n        next.nodeType === Node.ELEMENT_NODE &&\r\n        this.ifTagNameIsCurrentStyling(node.tagName) &&\r\n        node.tagName === next.tagName\r\n      ) {\r\n        // chuyển toàn bộ con của next sang node rồi xóa next\r\n        while (next.firstChild) node.appendChild(next.firstChild)\r\n        parent.removeChild(next)\r\n        continue // kiểm tra lại node hiện tại với phần tử kế tiếp mới\r\n      }\r\n      node = next\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hàm xử lý xóa styling tag khỏi selection.\r\n   */\r\n  private unstylingFromSelection(selectionRange: Range): void {\r\n    // Tìm thẻ styling tag NHỎ NHẤT bao trọn selection\r\n    const parentStylingElement = this.parentStylingElement\r\n    if (!parentStylingElement) return // selection không nằm trọn trong 1 styling tag\r\n\r\n    const doc = parentStylingElement.ownerDocument\r\n    const tagName = parentStylingElement.tagName // styling tag name\r\n\r\n    // Clone nội dung của 3 đoạn: trái | selection | phải (không đụng DOM gốc)\r\n    const clonedRange = selectionRange.cloneRange()\r\n\r\n    const leftRange = doc.createRange()\r\n    leftRange.setStart(parentStylingElement, 0)\r\n    leftRange.setEnd(clonedRange.startContainer, clonedRange.startOffset)\r\n\r\n    const rightRange = doc.createRange()\r\n    rightRange.setStart(clonedRange.endContainer, clonedRange.endOffset)\r\n    rightRange.setEnd(parentStylingElement, parentStylingElement.childNodes.length)\r\n\r\n    const leftFragment = leftRange.cloneContents()\r\n    const midFragment = clonedRange.cloneContents() // phần cần bỏ styling tag\r\n    const rightFragment = rightRange.cloneContents()\r\n\r\n    // Xây fragment thay thế, fragment này chứa: <styling tag>left</styling tag> + mid + <styling tag>right</styling tag>\r\n    const replacement = doc.createDocumentFragment()\r\n\r\n    if (leftFragment.hasChildNodes()) {\r\n      const leftElement = doc.createElement(tagName)\r\n      leftElement.appendChild(leftFragment)\r\n      replacement.appendChild(leftElement)\r\n    }\r\n\r\n    if (midFragment.hasChildNodes()) {\r\n      replacement.appendChild(midFragment) // KHÔNG bị bọc bởi styling tag\r\n    }\r\n\r\n    if (rightFragment.hasChildNodes()) {\r\n      const rightElement = doc.createElement(tagName)\r\n      rightElement.appendChild(rightFragment)\r\n      replacement.appendChild(rightElement)\r\n    }\r\n\r\n    // Thay thẻ cha <styling tag> cũ bằng cấu trúc mới\r\n    parentStylingElement.replaceWith(replacement)\r\n  }\r\n\r\n  private warpContentByStylingTag(selectionRange: Range): HTMLElement {\r\n    const content = selectionRange.extractContents()\r\n    const element = document.createElement(this.getCurrentStylingTagName())\r\n    element.appendChild(content)\r\n    selectionRange.insertNode(element)\r\n    return element\r\n  }\r\n\r\n  private findDescendantsSameTag(parent: HTMLElement): string[] {\r\n    const tagName = parent.tagName\r\n    // liệt kê tất cả các tagName cùng loại với tagName của parent\r\n    const descendantTagNames: string[] = []\r\n    for (const stylingType in this.tagNamesForStyling) {\r\n      const tagNames = this.tagNamesForStyling[stylingType as ETextStylingType]\r\n      if (tagNames.includes(tagName)) {\r\n        descendantTagNames.push(...tagNames)\r\n      }\r\n    }\r\n    return descendantTagNames\r\n  }\r\n\r\n  private removeOverlapChildTags(parentStylingElement: HTMLElement): void {\r\n    CodeVCNEditorHelper.removeOverlapChildTags(parentStylingElement, this.findDescendantsSameTag(parentStylingElement))\r\n  }\r\n\r\n  /**\r\n   * Kiểm tra xem phần tử parent có chứa text node nào ko được bọc bởi tagNameAllowed hay ko\r\n   * @param {HTMLElement} parent - Phần tử parent\r\n   */\r\n  private makeStylingToTextNodeOutsideTags(parent: HTMLElement): void {\r\n    const tagNamesAllowed = this.getAllAvailableTagNames()\r\n    const childNodes = parent.childNodes\r\n    for (const node of childNodes) {\r\n      if (node.nodeType === Node.TEXT_NODE) {\r\n        if (node.textContent!.trim() !== \"\") {\r\n          // tìm ra text node không có tag bao bọc\r\n          const newNode = document.createElement(this.getCurrentStylingTagName())\r\n          newNode.appendChild(node.cloneNode(true))\r\n          node.replaceWith(newNode)\r\n          return\r\n        }\r\n      } else if (node.nodeType === Node.ELEMENT_NODE) {\r\n        const el = node as HTMLElement\r\n        // nếu không phải tag được phép thì kiểm tra tiếp đệ quy\r\n        if (!tagNamesAllowed.includes(el.tagName)) {\r\n          this.makeStylingToTextNodeOutsideTags(el)\r\n        } else {\r\n          // nếu nằm trong tag được phép, bỏ qua đệ quy\r\n          continue\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Xóa các tag rỗng\r\n   */\r\n  private removeEmptyTags(parent: HTMLElement): void {\r\n    const elements = parent.children\r\n    for (const element of elements) {\r\n      if (element.innerHTML === \"\") {\r\n        element.remove()\r\n        continue\r\n      } else if (element.hasChildNodes()) {\r\n        this.removeEmptyTags(element as HTMLElement)\r\n      }\r\n    }\r\n  }\r\n\r\n  private makeStyling(selectionRange: Range, stylingType: ETextStylingType): void {\r\n    this.setCurrentStylingType(stylingType)\r\n    this.setParentStylingElement(selectionRange)\r\n\r\n    if (this.parentStylingElement) {\r\n      // nếu selection nằm hoàn toàn trong 1 styling tag thì xóa styling của selection\r\n      this.unstylingFromSelection(selectionRange)\r\n    } else {\r\n      // nếu không nằm hoàn toàn trong styling tag thì bọc content bởi styling tag và xóa các tag giống styling tag\r\n      const parentStylingElement = this.warpContentByStylingTag(selectionRange)\r\n      this.removeOverlapChildTags(parentStylingElement)\r\n    }\r\n\r\n    if (this.parentStylingElement) {\r\n      this.mergeAdjacentStyling(this.parentStylingElement)\r\n    }\r\n  }\r\n\r\n  onAction(stylingType: ETextStylingType): void {\r\n    const selection = editorContent.checkIsFocusingInEditorContent()\r\n    if (!selection) return\r\n    const range = selection.getRangeAt(0)\r\n    if (range.collapsed) return\r\n    this.makeStyling(range, stylingType)\r\n  }\r\n}\r\n\r\nexport const textStylingStylish = new TextStylingStylish()\r\n","import { EditorInternalErrorHelper } from \"@/helpers/error-helper\"\r\nimport { editorContent } from \"../../content/editor.content\"\r\nimport { CodeVCNEditorHelper } from \"@/helpers/codevcn-editor-helper\"\r\nimport { EErrorMessage, EInternalEvents } from \"@/enums/global-enums\"\r\nimport type { TOnSaveLink } from \"@/types/api-types\"\r\nimport { eventEmitter } from \"../../event/event-emitter\"\r\nimport { textStylingStylish } from \"../text-styling/text-styling.stylish\"\r\n\r\ntype TInsertType = \"insert-new\" | \"wrap-existing\"\r\n\r\ntype TShowLinkModalHandler = (\r\n  link: string | null,\r\n  textOfLink: string | null,\r\n  textLinkElement: HTMLAnchorElement | null,\r\n  onSaveLink: TOnSaveLink\r\n) => void\r\n\r\nclass TextLinkingStylish {\r\n  private readonly linkTagName: string = \"A\"\r\n\r\n  constructor() {}\r\n\r\n  getTextLinkTagName(): string {\r\n    return this.linkTagName\r\n  }\r\n\r\n  private createTextLinkElement(link: string, innerHTML: string): HTMLAnchorElement {\r\n    const textLinkElement = document.createElement(this.linkTagName) as HTMLAnchorElement\r\n    textLinkElement.setAttribute(\"href\", link)\r\n    textLinkElement.setAttribute(\"target\", \"_blank\")\r\n    textLinkElement.setAttribute(\"rel\", \"noopener noreferrer\")\r\n    const boldElement = document.createElement(textStylingStylish.getBoldTagNameMostPrioritied())\r\n    boldElement.innerHTML = innerHTML\r\n    textLinkElement.replaceChildren(boldElement)\r\n    return textLinkElement\r\n  }\r\n\r\n  updateLink(link: string, textOfLink: string | null, textLinkElement: HTMLAnchorElement): void {\r\n    textLinkElement.setAttribute(\"href\", link)\r\n    textLinkElement.textContent = textOfLink || link\r\n  }\r\n\r\n  /**\r\n   * Kiểm tra xem caret có nằm trên text link không, dùng được cho cả khi bôi đen và khi ko bôi đen\r\n   */\r\n  private checkIfIsOnTextLink(selection: Selection): HTMLAnchorElement | null {\r\n    let anchorNode = selection.anchorNode\r\n    if (anchorNode && anchorNode.nodeType === Node.TEXT_NODE) {\r\n      anchorNode = anchorNode.parentElement\r\n    }\r\n    if (!anchorNode || !(anchorNode instanceof HTMLElement)) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.ANCHOR_NODE_NOT_FOUND_OR_NOT_ELEMENT)\r\n    }\r\n    if (anchorNode.tagName === this.linkTagName) {\r\n      return anchorNode as HTMLAnchorElement\r\n    }\r\n    return CodeVCNEditorHelper.getClosestElementOfNode<HTMLAnchorElement>(\r\n      anchorNode,\r\n      (element) => element.tagName === this.linkTagName\r\n    )\r\n  }\r\n\r\n  private insertNewLinkToCurrentCaret(link: string, textOfLink: string, selection: Selection, type: TInsertType): void {\r\n    const range = selection.getRangeAt(0)\r\n    const textLinkElement = this.createTextLinkElement(link, textOfLink)\r\n    if (type === \"wrap-existing\") {\r\n      range.deleteContents()\r\n    }\r\n    eventEmitter.emit(EInternalEvents.BIND_TEXT_LINK_POPOVER_EVENT, textLinkElement)\r\n    range.insertNode(textLinkElement)\r\n  }\r\n\r\n  private showModalToUpdateLink(textLinkElement: HTMLAnchorElement, showLinkModalHandler: TShowLinkModalHandler): void {\r\n    showLinkModalHandler(\r\n      textLinkElement.getAttribute(\"href\"),\r\n      textLinkElement.textContent,\r\n      textLinkElement,\r\n      (link, textOfLink) => {\r\n        if (link) {\r\n          const trimmedLink = link.trim()\r\n          if (trimmedLink.length > 0) {\r\n            this.updateLink(trimmedLink, textOfLink, textLinkElement)\r\n          }\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  private showModalToMakeNewLink(\r\n    showLinkModalHandler: TShowLinkModalHandler,\r\n    selection: Selection,\r\n    type: TInsertType\r\n  ): void {\r\n    showLinkModalHandler(\r\n      null,\r\n      type === \"insert-new\" ? null : selection.getRangeAt(0).cloneContents().textContent,\r\n      null,\r\n      (link, textOfLink) => {\r\n        if (link) {\r\n          const trimmedLink = link.trim()\r\n          if (trimmedLink.length > 0) {\r\n            const selection = CodeVCNEditorHelper.restoreCaretPosition()\r\n            if (selection) {\r\n              this.insertNewLinkToCurrentCaret(trimmedLink, textOfLink || trimmedLink, selection, type)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  private makeLinking(showLinkModalHandler: TShowLinkModalHandler): void {\r\n    const selection = editorContent.checkIsFocusingInEditorContent()\r\n    if (!selection) return\r\n    CodeVCNEditorHelper.saveCurrentCaretPosition(selection)\r\n    if (CodeVCNEditorHelper.isSelectingText()) {\r\n      const textLinkElement = this.checkIfIsOnTextLink(selection)\r\n      if (textLinkElement) {\r\n        this.showModalToUpdateLink(textLinkElement, showLinkModalHandler)\r\n      } else {\r\n        this.showModalToMakeNewLink(showLinkModalHandler, selection, \"wrap-existing\")\r\n      }\r\n    } else {\r\n      const textLinkElement = this.checkIfIsOnTextLink(selection)\r\n      if (textLinkElement) {\r\n        this.showModalToUpdateLink(textLinkElement, showLinkModalHandler)\r\n      } else {\r\n        this.showModalToMakeNewLink(showLinkModalHandler, selection, \"insert-new\")\r\n      }\r\n    }\r\n  }\r\n\r\n  onAction(showLinkModalHandler: TShowLinkModalHandler) {\r\n    this.makeLinking(showLinkModalHandler)\r\n  }\r\n}\r\n\r\nexport const textLinkingStylish = new TextLinkingStylish()\r\n","import { html, type TemplateResult } from \"lit-html\"\r\n\r\ntype TCustomPopoverProps = {\r\n  content: TemplateResult<1>\r\n}\r\n\r\nexport const Popover = ({ content }: TCustomPopoverProps) => {\r\n  return html`\r\n    <div class=\"NAME-popover fixed z-[80] top-0 left-0 pt-1.5\">\r\n      <div class=\"NAME-popover-content-wrapper bg-white border border-gray-400 shadow-md rounded-md relative\">\r\n        <div\r\n          class=\"NAME-popover-arrow bg-inherit border border-inherit h-2 w-2 rotate-45 absolute -top-1 left-1/2 -translate-x-1/2 z-10\"\r\n        ></div>\r\n        <div class=\"NAME-popover-content relative z-20 bg-inherit rounded-md\">${content}</div>\r\n      </div>\r\n    </div>\r\n  `\r\n}\r\n","export class PageLayoutHelper {\r\n  static detectCollisionWithViewportEdges(target: HTMLElement, margin: number = 10): void {\r\n    const popoverRect = target.getBoundingClientRect()\r\n    const viewportWidth = window.innerWidth\r\n    const viewportHeight = window.innerHeight\r\n    if (popoverRect.left < 0) {\r\n      target.style.left = `${margin}px`\r\n    }\r\n    if (popoverRect.right > viewportWidth) {\r\n      target.style.left = `${viewportWidth - target.offsetWidth - margin}px`\r\n    }\r\n    if (popoverRect.top < 0) {\r\n      target.style.top = `${margin}px`\r\n    }\r\n    if (popoverRect.bottom > viewportHeight) {\r\n      target.style.top = `${viewportHeight - target.offsetHeight - margin}px`\r\n    }\r\n  }\r\n}\r\n","import { LitHTMLHelper } from \"@/helpers/common-helpers\"\r\nimport { html } from \"lit-html\"\r\nimport { Popover } from \"../popover\"\r\nimport { PageLayoutHelper } from \"@/helpers/page-layout-helper\"\r\n\r\nexport class PopoverManager {\r\n  private static readonly popoverElement: HTMLElement = this.initPopover()\r\n\r\n  private static moveArrowPosition(popover: HTMLElement): void {\r\n    const arrowElement = popover.querySelector<HTMLElement>(\".NAME-popover-arrow\")\r\n    if (arrowElement) {\r\n      arrowElement.style.cssText += `\r\n        left: 10px;\r\n      `\r\n    }\r\n  }\r\n\r\n  private static movePopoverToTriggerPosition(trigger: HTMLElement, popover: HTMLElement): void {\r\n    const triggerRect = trigger.getBoundingClientRect()\r\n    popover.style.cssText += `\r\n      left: ${triggerRect.left}px;\r\n      top: ${triggerRect.top + triggerRect.height}px;\r\n    `\r\n    PageLayoutHelper.detectCollisionWithViewportEdges(popover, 10)\r\n    this.moveArrowPosition(popover)\r\n  }\r\n\r\n  static showPopover<TPopover extends typeof Popover>(trigger: HTMLElement, params: Parameters<TPopover>): void {\r\n    const popoverElement = this.popoverElement\r\n    const { content } = params[0]\r\n    const contentElement = popoverElement.querySelector(\".NAME-popover-content\")\r\n    if (contentElement) {\r\n      contentElement.replaceChildren(LitHTMLHelper.createElementFromRenderer(() => content, []))\r\n    }\r\n    popoverElement.classList.add(\"STATE-show\")\r\n    this.movePopoverToTriggerPosition(trigger, popoverElement)\r\n  }\r\n\r\n  static forceHidePopover(): void {\r\n    this.popoverElement.classList.remove(\"STATE-show\")\r\n  }\r\n\r\n  private static hidePopoverOnMouseEvent(trigger: HTMLElement, e: MouseEvent, delay?: number): void {\r\n    const relatedTarget = e.relatedTarget\r\n    if (\r\n      this.popoverElement &&\r\n      relatedTarget &&\r\n      relatedTarget instanceof Node &&\r\n      !trigger.contains(relatedTarget) &&\r\n      !this.popoverElement.contains(relatedTarget)\r\n    ) {\r\n      if (delay && delay > 0) {\r\n        setTimeout(() => {\r\n          this.popoverElement.classList.remove(\"STATE-show\")\r\n        }, delay)\r\n      } else {\r\n        this.popoverElement.classList.remove(\"STATE-show\")\r\n      }\r\n    }\r\n  }\r\n\r\n  static bindHideEventToPopover(trigger: HTMLElement, delay?: number): void {\r\n    this.popoverElement.onmouseleave = (e) => {\r\n      this.hidePopoverOnMouseEvent(trigger, e, delay)\r\n    }\r\n  }\r\n\r\n  static bindHideEventToTrigger(trigger: HTMLElement, delay?: number): void {\r\n    trigger.onmouseleave = (e) => {\r\n      this.hidePopoverOnMouseEvent(trigger, e, delay)\r\n    }\r\n  }\r\n\r\n  static getPopoverElement(): HTMLElement {\r\n    return this.popoverElement\r\n  }\r\n\r\n  private static initPopover(): HTMLElement {\r\n    const popoverElement = LitHTMLHelper.createElementFromRenderer<typeof Popover>(Popover, [{ content: html`` }])\r\n    document.body.appendChild(popoverElement)\r\n    return popoverElement\r\n  }\r\n}\r\n","import { html } from \"lit-html\"\r\nimport { editorContent } from \"../../content/editor.content\"\r\nimport { textLinkingStylish } from \"./text-linking.stylish\"\r\nimport { PopoverManager } from \"@/lib/components/managers/popover.manager\"\r\nimport { ModalManager } from \"@/lib/components/managers/modal.manager\"\r\nimport { EditorInternalErrorHelper } from \"@/helpers/error-helper\"\r\nimport { EErrorMessage, EInternalEvents } from \"@/enums/global-enums\"\r\nimport { copyTextToClipboard, isValidUrl } from \"@/helpers/common-helpers\"\r\nimport type { TOnSaveLink } from \"@/types/api-types\"\r\nimport { eventEmitter } from \"../../event/event-emitter\"\r\n\r\ntype TTextLinkFormData = {\r\n  link: string\r\n  textOfLink: string | null\r\n}\r\n\r\nclass TextLinkingManager {\r\n  private linkTyping: string = \"\"\r\n  private onSaveLink?: TOnSaveLink\r\n  private textLinkForm: HTMLFormElement | null = null\r\n  private debounceTimer: NodeJS.Timeout | undefined = undefined\r\n  private currentLink: string | null = null\r\n  private currentTextOfLink: string | null = null\r\n  private currentTextLinkElement: HTMLAnchorElement | null = null\r\n\r\n  constructor() {\r\n    eventEmitter.on(EInternalEvents.BIND_TEXT_LINK_POPOVER_EVENT, (textLinkElement) => {\r\n      this.setupTextLinkElementToShowPopover(textLinkElement)\r\n    })\r\n  }\r\n\r\n  private copyTextLinkToClipboard(link: string, copyBoxElement: HTMLElement): void {\r\n    copyTextToClipboard(link, copyBoxElement)\r\n  }\r\n\r\n  private unlinkFromText(): void {\r\n    if (!this.currentTextLinkElement) return\r\n    const textLinkElement = this.currentTextLinkElement\r\n    if (textLinkElement.tagName !== textLinkingStylish.getTextLinkTagName()) return\r\n    const textLinkChildNodes = textLinkElement.childNodes\r\n    textLinkElement.replaceChildren(...textLinkChildNodes)\r\n  }\r\n\r\n  private handleLinkTyping(e: InputEvent): void {\r\n    const inputElement = e.currentTarget as HTMLInputElement\r\n    clearTimeout(this.debounceTimer)\r\n    this.debounceTimer = setTimeout(() => {\r\n      this.linkTyping = inputElement.value\r\n      const textOfLinkInput = this.textLinkForm?.querySelector<HTMLInputElement>(\".NAME-text-of-link\")\r\n      if (textOfLinkInput && !textOfLinkInput.value) {\r\n        textOfLinkInput.setAttribute(\"value\", this.linkTyping)\r\n      }\r\n    }, 300)\r\n  }\r\n\r\n  private notify(message: string): void {\r\n    console.error(\">>> notify:\", message)\r\n  }\r\n\r\n  private validateFormData(form: HTMLFormElement): TTextLinkFormData | null {\r\n    const formData = new FormData(form)\r\n    const link = formData.get(\"link\") as string | null\r\n    const textOfLink = formData.get(\"text-of-link\") as string | null\r\n    if (!link) {\r\n      this.notify(\"Link and text of link are required\")\r\n      return null\r\n    }\r\n    if (!isValidUrl(link)) {\r\n      this.notify(\"Link is not valid\")\r\n      return null\r\n    }\r\n    return { link, textOfLink }\r\n  }\r\n\r\n  private extractFormData(): TTextLinkFormData | null {\r\n    if (!this.textLinkForm) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.TEXT_LINK_FORM_NOT_FOUND)\r\n    }\r\n    const formData = this.validateFormData(this.textLinkForm)\r\n    if (!formData) return null\r\n    const { link, textOfLink } = formData\r\n    return { link, textOfLink }\r\n  }\r\n\r\n  private saveLinkHandler(e: Event): void {\r\n    e.preventDefault()\r\n    const formData = this.extractFormData()\r\n    if (!formData) return\r\n    if (this.currentTextLinkElement) {\r\n      textLinkingStylish.updateLink(formData.link, formData.textOfLink, this.currentTextLinkElement)\r\n    } else if (this.onSaveLink) {\r\n      this.onSaveLink(formData.link, formData.textOfLink)\r\n    }\r\n  }\r\n\r\n  private catchEnterKey(e: KeyboardEvent): void {\r\n    if (e.key === \"Enter\") {\r\n      this.saveLinkHandler(e)\r\n    }\r\n  }\r\n\r\n  showEditLinkModal(): void {\r\n    ModalManager.showModal([\r\n      {\r\n        title: \"Edit link\",\r\n        body: html`\r\n          <div class=\"bg-white px-4 pt-2 pb-4 rounded-lg shadow-lg\">\r\n            <form\r\n              class=\"NAME-text-link-form space-y-4\"\r\n              action=\"#\"\r\n              @submit=${(e: Event) => this.saveLinkHandler(e)}\r\n              @keydown=${(e: KeyboardEvent) => this.catchEnterKey(e)}\r\n            >\r\n              <div>\r\n                <label class=\"block text-sm font-medium text-black mb-2\">Link</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value=\"${this.currentLink || this.linkTyping || \"\"}\"\r\n                  class=\"NAME-link-input w-full px-3 py-1 border border-gray-400 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent\"\r\n                  placeholder=\"Enter link\"\r\n                  @input=${(e: InputEvent) => this.handleLinkTyping(e)}\r\n                  name=\"link\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label class=\"block text-sm font-medium text-black mb-2\">Text of link</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"NAME-text-of-link w-full px-3 py-1 border border-gray-400 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent\"\r\n                  placeholder=\"Enter text of link\"\r\n                  value=\"${this.currentTextOfLink}\"\r\n                  name=\"text-of-link\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"pt-2 flex items-center gap-2\">\r\n                ${this.currentTextLinkElement\r\n                  ? html`\r\n                      <button\r\n                        @click=${() => this.unlinkFromText()}\r\n                        class=\"flex items-center justify-center flex-1 gap-2 text-white hover:scale-105 transition duration-200 bg-red-600 rounded-md py-1 px-2 text-sm font-medium cursor-pointer\"\r\n                      >\r\n                        <i class=\"bi bi-trash\"></i>\r\n                        <span>Remove link</span>\r\n                      </button>\r\n                    `\r\n                  : \"\"}\r\n                <button\r\n                  @click=${(e: Event) => this.saveLinkHandler(e)}\r\n                  class=\"flex items-center justify-center flex-1 gap-2 text-white hover:scale-105 transition duration-200 bg-black rounded-md py-1 px-2 cursor-pointer text-sm font-medium\"\r\n                >\r\n                  <i class=\"bi bi-save\"></i>\r\n                  <span>Save link</span>\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        `,\r\n      },\r\n    ])\r\n    this.textLinkForm = ModalManager.getModalElement().querySelector(\".NAME-text-link-form\") as HTMLFormElement\r\n    this.textLinkForm.querySelector<HTMLInputElement>(\".NAME-link-input\")?.focus()\r\n  }\r\n\r\n  showModalOnAction(): void {\r\n    textLinkingStylish.onAction((link, textOfLink, textLinkElement, onSaveLink) => {\r\n      this.currentLink = link\r\n      this.currentTextLinkElement = textLinkElement\r\n      this.currentTextOfLink = textOfLink\r\n      this.onSaveLink = onSaveLink\r\n      this.showEditLinkModal()\r\n    })\r\n  }\r\n\r\n  private showModalOnPopover(link: string | null, textLinkElement: HTMLAnchorElement): void {\r\n    this.currentLink = link\r\n    this.currentTextOfLink = textLinkElement.textContent\r\n    this.currentTextLinkElement = textLinkElement\r\n    this.showEditLinkModal()\r\n  }\r\n\r\n  private showTextLinkPopover(): void {\r\n    const link = this.currentLink\r\n    const textLinkElement = this.currentTextLinkElement\r\n    if (!link || !textLinkElement) return\r\n    PopoverManager.showPopover(textLinkElement, [\r\n      {\r\n        content: html`<div class=\"flex items-center gap-1 text-gray-800 rounded-md py-1 px-2\">\r\n          <div class=\"text-gray-600 text-xs truncate max-w-[250px] w-fit\">${link}</div>\r\n          <button\r\n            class=\"NAME-copy-box cursor-pointer p-1 hover:bg-gray-200 rounded-md\"\r\n            @click=${(e: MouseEvent) => this.copyTextLinkToClipboard(link, e.currentTarget as HTMLElement)}\r\n          >\r\n            <i class=\"bi bi-copy text-base NAME-copy-copy\"></i>\r\n            <i class=\"bi bi-check-all text-base NAME-copy-copied\"></i>\r\n          </button>\r\n          <button\r\n            class=\"cursor-pointer p-1 hover:bg-gray-200 rounded-md\"\r\n            @click=${() => this.showModalOnPopover(link, textLinkElement)}\r\n          >\r\n            <i class=\"bi bi-pencil text-base\"></i>\r\n          </button>\r\n          <button class=\"cursor-pointer p-1 hover:bg-gray-200 rounded-md\" @click=${() => this.unlinkFromText()}>\r\n            <i class=\"bi bi-trash text-base\"></i>\r\n          </button>\r\n        </div>`,\r\n      },\r\n    ])\r\n    PopoverManager.bindHideEventToTrigger(textLinkElement, 300)\r\n    PopoverManager.bindHideEventToPopover(textLinkElement, 300)\r\n  }\r\n\r\n  setupTextLinkElementToShowPopover(textLinkElement: HTMLAnchorElement): void {\r\n    textLinkElement.addEventListener(\"mouseenter\", () => {\r\n      this.currentLink = textLinkElement.getAttribute(\"href\")\r\n      this.currentTextOfLink = textLinkElement.textContent\r\n      this.currentTextLinkElement = textLinkElement\r\n      this.showTextLinkPopover()\r\n    })\r\n  }\r\n\r\n  private showPopoverWithLinkInfo(link: string, textLinkElement: HTMLAnchorElement): void {\r\n    this.currentLink = link\r\n    this.currentTextLinkElement = textLinkElement\r\n    this.showTextLinkPopover()\r\n  }\r\n\r\n  showModalOnCaretMoves(): void {\r\n    const selection = editorContent.checkIsFocusingInEditorContent()\r\n    if (selection) {\r\n      const node = selection.anchorNode\r\n      const element = node?.nodeType === Node.TEXT_NODE ? node.parentElement : (node as HTMLElement)\r\n      if (element?.tagName === textLinkingStylish.getTextLinkTagName()) {\r\n        const link = element.getAttribute(\"href\")\r\n        if (link) {\r\n          this.showPopoverWithLinkInfo(link, element as HTMLAnchorElement)\r\n        }\r\n      } else {\r\n        const linkElement = element?.closest<HTMLAnchorElement>(textLinkingStylish.getTextLinkTagName())\r\n        if (linkElement && editorContent.getContentElement().contains(linkElement)) {\r\n          const link = linkElement.getAttribute(\"href\")\r\n          if (link) {\r\n            this.showPopoverWithLinkInfo(link, linkElement)\r\n          }\r\n        } else {\r\n          PopoverManager.forceHidePopover()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  activateLinksOnEditorContentClick(e: MouseEvent) {\r\n    const target = e.target as HTMLElement\r\n    if (target.tagName === textLinkingStylish.getTextLinkTagName()) {\r\n      const href = target.getAttribute(\"href\")\r\n      if (href) {\r\n        window.open(href, \"_blank\")\r\n      }\r\n    } else {\r\n      const textLinkElement = target.closest(textLinkingStylish.getTextLinkTagName())\r\n      if (textLinkElement) {\r\n        const href = textLinkElement.getAttribute(\"href\")\r\n        if (href) {\r\n          window.open(href, \"_blank\")\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  scanEditorContentForTextLink(): void {\r\n    const editorContentElement = editorContent.getContentElement()\r\n    const textLinkElements = editorContentElement.querySelectorAll<HTMLAnchorElement>(\r\n      textLinkingStylish.getTextLinkTagName()\r\n    )\r\n    for (const textLinkElement of textLinkElements) {\r\n      const link = textLinkElement.getAttribute(\"href\")\r\n      if (link) {\r\n        this.setupTextLinkElementToShowPopover(textLinkElement)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const textLinkingManager = new TextLinkingManager()\r\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{_$LH as o}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{I:t}=o,i=o=>null===o||\"object\"!=typeof o&&\"function\"!=typeof o,n={HTML:1,SVG:2,MATHML:3},e=(o,t)=>void 0===t?void 0!==o?._$litType$:o?._$litType$===t,l=o=>null!=o?._$litType$?.h,d=o=>void 0!==o?._$litDirective$,c=o=>o?._$litDirective$,f=o=>void 0===o.strings,r=()=>document.createComment(\"\"),s=(o,i,n)=>{const e=o._$AA.parentNode,l=void 0===i?o._$AB:i._$AA;if(void 0===n){const i=e.insertBefore(r(),l),d=e.insertBefore(r(),l);n=new t(i,d,o,o.options)}else{const t=n._$AB.nextSibling,i=n._$AM,d=i!==o;if(d){let t;n._$AQ?.(o),n._$AM=o,void 0!==n._$AP&&(t=o._$AU)!==i._$AU&&n._$AP(t)}if(t!==l||d){let o=n._$AA;for(;o!==t;){const t=o.nextSibling;e.insertBefore(o,l),o=t}}}return n},v=(o,t,i=o)=>(o._$AI(t,i),o),u={},m=(o,t=u)=>o._$AH=t,p=o=>o._$AH,M=o=>{o._$AR(),o._$AA.remove()},h=o=>{o._$AR()};export{n as TemplateResultType,h as clearPart,p as getCommittedValue,c as getDirectiveClass,s as insertPart,l as isCompiledTemplateResult,d as isDirectiveResult,i as isPrimitive,f as isSingleExpression,e as isTemplateResult,M as removePart,v as setChildPartValue,m as setCommittedValue};\n//# sourceMappingURL=directive-helpers.js.map\n","import{noChange as e}from\"../lit-html.js\";import{directive as s,Directive as t,PartType as r}from\"../directive.js\";import{getCommittedValue as l,setChildPartValue as o,insertPart as i,removePart as n,setCommittedValue as f}from\"../directive-helpers.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst u=(e,s,t)=>{const r=new Map;for(let l=s;l<=t;l++)r.set(e[l],l);return r},c=s(class extends t{constructor(e){if(super(e),e.type!==r.CHILD)throw Error(\"repeat() can only be used in text expressions\")}dt(e,s,t){let r;void 0===t?t=s:void 0!==s&&(r=s);const l=[],o=[];let i=0;for(const s of e)l[i]=r?r(s,i):i,o[i]=t(s,i),i++;return{values:o,keys:l}}render(e,s,t){return this.dt(e,s,t).values}update(s,[t,r,c]){const d=l(s),{values:p,keys:a}=this.dt(t,r,c);if(!Array.isArray(d))return this.ut=a,p;const h=this.ut??=[],v=[];let m,y,x=0,j=d.length-1,k=0,w=p.length-1;for(;x<=j&&k<=w;)if(null===d[x])x++;else if(null===d[j])j--;else if(h[x]===a[k])v[k]=o(d[x],p[k]),x++,k++;else if(h[j]===a[w])v[w]=o(d[j],p[w]),j--,w--;else if(h[x]===a[w])v[w]=o(d[x],p[w]),i(s,v[w+1],d[x]),x++,w--;else if(h[j]===a[k])v[k]=o(d[j],p[k]),i(s,d[x],d[j]),j--,k++;else if(void 0===m&&(m=u(a,k,w),y=u(h,x,j)),m.has(h[x]))if(m.has(h[j])){const e=y.get(a[k]),t=void 0!==e?d[e]:null;if(null===t){const e=i(s,d[x]);o(e,p[k]),v[k]=e}else v[k]=o(t,p[k]),i(s,d[x],t),d[e]=null;k++}else n(d[j]),j--;else n(d[x]),x++;for(;k<=w;){const e=i(s,v[w+1]);o(e,p[k]),v[k++]=e}for(;x<=j;){const e=d[x++];null!==e&&n(e)}return this.ut=a,f(s,v),e}});export{c as repeat};\n//# sourceMappingURL=repeat.js.map\n","import{nothing as t,noChange as i}from\"../lit-html.js\";import{Directive as r,PartType as s,directive as n}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class e extends r{constructor(i){if(super(i),this.it=t,i.type!==s.CHILD)throw Error(this.constructor.directiveName+\"() can only be used in child bindings\")}render(r){if(r===t||null==r)return this._t=void 0,this.it=r;if(r===i)return r;if(\"string\"!=typeof r)throw Error(this.constructor.directiveName+\"() called with a non-string value\");if(r===this.it)return this._t;this.it=r;const s=[r];return s.raw=s,this._t={_$litType$:this.constructor.resultType,strings:s,values:[]}}}e.directiveName=\"unsafeHTML\",e.resultType=1;const o=n(e);export{e as UnsafeHTMLDirective,o as unsafeHTML};\n//# sourceMappingURL=unsafe-html.js.map\n","import { html, type TemplateResult } from \"lit-html\"\r\nimport { repeat } from \"lit-html/directives/repeat.js\"\r\nimport { unsafeHTML } from \"lit-html/directives/unsafe-html.js\"\r\n\r\ntype TCustomDropDownProps = {\r\n  options: ({\r\n    value: string\r\n    label: string\r\n  } & Partial<{\r\n    className: string\r\n  }>)[]\r\n} & Partial<{\r\n  classNames: Partial<{\r\n    btn: string\r\n    container: string\r\n  }>\r\n}>\r\n\r\nexport const DropdownMenu = ({ options, classNames }: TCustomDropDownProps): TemplateResult<1> => {\r\n  return html`\r\n    <div class=\"NAME-dropdown-menu fixed top-0 left-0\">\r\n      <div\r\n        class=\"NAME-dropdown-menu-options flex flex-col gap-1 rounded-lg duration-200 ease-in-out bg-white border border-regular-border-cl z-50 p-1.5 ${classNames?.container ||\r\n        \"\"}\"\r\n      >\r\n        ${options && options.length > 0\r\n          ? repeat(\r\n              options,\r\n              ({ value }) => value,\r\n              ({ value, label, className }) =>\r\n                html`\r\n                  <button\r\n                    class=\"NAME-dropdown-option flex items-center px-1.5 py-0.5 leading-[1.5] w-full cursor-pointer rounded ${className ||\r\n                    \"\"}\"\r\n                    data-value=\"${value}\"\r\n                  >\r\n                    ${unsafeHTML(label)}\r\n                  </button>\r\n                `\r\n            )\r\n          : \"\"}\r\n      </div>\r\n    </div>\r\n  `\r\n}\r\n\r\ntype TCustomDropDownTriggerProps = {\r\n  label: string\r\n  action: string\r\n} & Partial<{\r\n  initialValue: string\r\n  classNames: Partial<{\r\n    btn: string\r\n    container: string\r\n  }>\r\n}>\r\n\r\nexport const DropdownTrigger = ({\r\n  label,\r\n  classNames,\r\n  initialValue,\r\n  action,\r\n}: TCustomDropDownTriggerProps): TemplateResult<1> => {\r\n  return html`\r\n    <div\r\n      class=\"NAME-dropdown-trigger flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer h-full ${classNames?.container ||\r\n      \"\"}\"\r\n      ?data-value=${initialValue}\r\n      data-action=${action}\r\n    >\r\n      <button\r\n        class=\"NAME-dropdown-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer h-full ${classNames?.btn ||\r\n        \"\"}\"\r\n      >\r\n        ${unsafeHTML(label)}\r\n      </button>\r\n    </div>\r\n  `\r\n}\r\n","import { LitHTMLHelper, nextFrame } from \"@/helpers/common-helpers.js\"\r\nimport { DropdownMenu } from \"../dropdown.js\"\r\nimport { PageLayoutHelper } from \"@/helpers/page-layout-helper.js\"\r\n\r\ntype TOnPickOption = (activeValue: string, item: HTMLElement) => void\r\n\r\nexport class DropdownManager {\r\n  private static readonly dropdownMenuElement: HTMLElement = this.initDropdownMenu()\r\n\r\n  private static moveDropdownMenuToTriggerPosition(trigger: HTMLElement): void {\r\n    const triggerRect = trigger.getBoundingClientRect()\r\n    this.dropdownMenuElement.style.cssText = `\r\n      left: ${triggerRect.left}px;\r\n      top: ${triggerRect.top + triggerRect.height - 5}px;\r\n      padding-top: 8px;\r\n    `\r\n  }\r\n\r\n  private static showDropdownMenu(trigger: HTMLElement, params: Parameters<typeof DropdownMenu>): void {\r\n    const dropdownMenuElement = this.dropdownMenuElement\r\n    dropdownMenuElement.replaceChildren(\r\n      ...LitHTMLHelper.createElementFromRenderer(DropdownMenu, [{ options: params[0].options }]).children\r\n    )\r\n    this.moveDropdownMenuToTriggerPosition(trigger)\r\n    PageLayoutHelper.detectCollisionWithViewportEdges(dropdownMenuElement)\r\n    nextFrame(() => {\r\n      dropdownMenuElement.classList.add(\"STATE-show\")\r\n      dropdownMenuElement.dataset.showing = \"true\"\r\n    })\r\n  }\r\n\r\n  static hideDropdownMenu(e?: MouseEvent): void {\r\n    if (e && this.dropdownMenuElement.contains(e.target as Node)) return\r\n    this.dropdownMenuElement.classList.remove(\"STATE-show\")\r\n    this.dropdownMenuElement.dataset.showing = \"false\"\r\n  }\r\n\r\n  static onTriggerClick(\r\n    trigger: HTMLElement,\r\n    params: Parameters<typeof DropdownMenu>,\r\n    onPickOption: TOnPickOption\r\n  ): void {\r\n    if (this.dropdownMenuElement.dataset.showing === \"true\") {\r\n      this.hideDropdownMenu()\r\n    } else {\r\n      this.showDropdownMenu(trigger, params)\r\n      this.bindPickOptionEvent(onPickOption)\r\n    }\r\n  }\r\n\r\n  static bindShowDropdownMenuEventToTrigger(\r\n    trigger: HTMLElement,\r\n    params: Parameters<typeof DropdownMenu>,\r\n    onPickOption: TOnPickOption\r\n  ): void {\r\n    trigger.addEventListener(\"click\", () => {\r\n      this.onTriggerClick(trigger, params, onPickOption)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Dropdown component được bind chỉ nên chứa 1 button và 1 content (content gồm các option)\r\n   */\r\n  private static bindPickOptionEvent(onPickOption: TOnPickOption): void {\r\n    this.dropdownMenuElement.onclick = (e) => {\r\n      e.preventDefault()\r\n      let target = e.target as HTMLElement\r\n      while (\r\n        target &&\r\n        !target.classList.contains(\"NAME-dropdown-option\") &&\r\n        this.dropdownMenuElement.contains(target)\r\n      ) {\r\n        target = target.parentElement as HTMLElement\r\n        if (target.tagName === \"BODY\") break\r\n      }\r\n      if (target && target.classList.contains(\"NAME-dropdown-option\")) {\r\n        const items = this.dropdownMenuElement.querySelectorAll<HTMLElement>(\".NAME-dropdown-option\")\r\n        for (const item of items) {\r\n          item.classList.remove(\"active\")\r\n        }\r\n        target.classList.add(\"active\")\r\n        onPickOption(target.dataset.value!, target)\r\n        this.hideDropdownMenu()\r\n      }\r\n    }\r\n  }\r\n\r\n  private static initDropdownMenu(): HTMLElement {\r\n    const dropdownElement = LitHTMLHelper.createElementFromRenderer(DropdownMenu, [{ options: [] }])\r\n    document.body.appendChild(dropdownElement)\r\n    return dropdownElement\r\n  }\r\n}\r\n","import type { TSkeletonReplacer } from \"@/types/global-types\"\r\nimport { capitalizeWord, LitHTMLHelper } from \"@/helpers/common-helpers\"\r\nimport { Skeleton } from \"@/lib/components/skeleton\"\r\nimport type { Extension } from \"@codemirror/state\"\r\nimport { Compartment, EditorState } from \"@codemirror/state\"\r\nimport {\r\n  EditorView,\r\n  keymap,\r\n  highlightSpecialChars,\r\n  drawSelection,\r\n  highlightActiveLine,\r\n  lineNumbers,\r\n} from \"@codemirror/view\"\r\nimport {\r\n  defaultHighlightStyle,\r\n  syntaxHighlighting,\r\n  indentOnInput,\r\n  bracketMatching,\r\n  foldGutter,\r\n  foldKeymap,\r\n} from \"@codemirror/language\"\r\nimport { closeBrackets, closeBracketsKeymap } from \"@codemirror/autocomplete\"\r\nimport { history, historyKeymap, defaultKeymap, indentWithTab, undo, redo } from \"@codemirror/commands\"\r\nimport { vscodeDark, vscodeLight } from \"@uiw/codemirror-theme-vscode\"\r\nimport { javascript } from \"@codemirror/lang-javascript\"\r\nimport { python } from \"@codemirror/lang-python\"\r\nimport { cpp } from \"@codemirror/lang-cpp\"\r\nimport { CodeVCNEditorHelper } from \"@/helpers/codevcn-editor-helper\"\r\nimport { EditorInternalErrorHelper } from \"@/helpers/error-helper\"\r\nimport { ECodeBlockingLanguage, EErrorMessage } from \"@/enums/global-enums\"\r\nimport { html } from \"lit-html\"\r\nimport { DropdownManager } from \"@/lib/components/managers/dropdown.manager\"\r\nimport { codeBlockingManager } from \"./code-blocking.manager\"\r\n\r\ntype TCodeBlockView = EditorView\r\n\r\ntype TInitCodeBlockViewResult = {\r\n  codeBlockView: TCodeBlockView\r\n  boxElement: HTMLElement\r\n  parentElement: HTMLElement\r\n}\r\n\r\ntype TCodeBlockName = `name-${string}`\r\n\r\ntype TCreateCodeBlockBoxElementResult = {\r\n  boxElement: HTMLElement\r\n  parentElement: HTMLElement\r\n}\r\n\r\ntype TCompartments = {\r\n  languageCompartment: Compartment\r\n  themeCompartment: Compartment\r\n}\r\n\r\nexport class CodeBlockViewManager {\r\n  private savedCodeBlocks: Map<TCodeBlockName, TCodeBlockView> = new Map()\r\n  private languageCompartment: Compartment | null = null\r\n  private themeCompartment: Compartment | null = null\r\n\r\n  constructor(private readonly codeBlockBoxElementTagName: string, private readonly codeBlockBoxClassName: string) {}\r\n\r\n  private initCompartments(): TCompartments {\r\n    this.languageCompartment = this.languageCompartment || new Compartment()\r\n    this.themeCompartment = this.themeCompartment || new Compartment()\r\n    return {\r\n      languageCompartment: this.languageCompartment,\r\n      themeCompartment: this.themeCompartment,\r\n    }\r\n  }\r\n\r\n  private async getLanguageExtension(language: ECodeBlockingLanguage): Promise<Extension> {\r\n    if (language === ECodeBlockingLanguage.JAVASCRIPT) {\r\n      return javascript()\r\n    }\r\n    if (language === ECodeBlockingLanguage.PYTHON) {\r\n      return python()\r\n    }\r\n    return cpp()\r\n  }\r\n\r\n  private createCodeBlockBoxName(): TCodeBlockName {\r\n    return `name-${crypto.randomUUID()}`\r\n  }\r\n\r\n  private createCodeBlockParentName(): TCodeBlockName {\r\n    return `name-${crypto.randomUUID()}`\r\n  }\r\n\r\n  private saveNewCodeBlock(codeBlockName: TCodeBlockName, codeBlock: TCodeBlockView) {\r\n    this.savedCodeBlocks.set(codeBlockName, codeBlock)\r\n  }\r\n\r\n  private switchTheme(e: MouseEvent) {\r\n    const themeCompartment = this.themeCompartment\r\n    if (!themeCompartment) return\r\n    const btn = e.currentTarget as HTMLElement\r\n    const codeBlockBox = btn.closest(`.${this.codeBlockBoxClassName}`) as HTMLElement\r\n    const isDarkTheme = codeBlockBox.dataset.isDarkTheme === \"true\"\r\n    if (isDarkTheme) {\r\n      codeBlockBox.dataset.isDarkTheme = \"false\"\r\n      const view = this.savedCodeBlocks.get(codeBlockBox.dataset.codeBlockBoxName as TCodeBlockName)\r\n      if (view) {\r\n        view.dispatch({\r\n          effects: themeCompartment.reconfigure(vscodeLight),\r\n        })\r\n        const themeLabel = btn.querySelector(\".NAME-theme-label\")\r\n        if (themeLabel) {\r\n          themeLabel.innerHTML = `<i class=\"bi bi-sun-fill\"></i>`\r\n        }\r\n      }\r\n    } else {\r\n      codeBlockBox.dataset.isDarkTheme = \"true\"\r\n      const view = this.savedCodeBlocks.get(codeBlockBox.dataset.codeBlockBoxName as TCodeBlockName)\r\n      if (view) {\r\n        view.dispatch({\r\n          effects: themeCompartment.reconfigure(vscodeDark),\r\n        })\r\n        const themeLabel = btn.querySelector(\".NAME-theme-label\")\r\n        if (themeLabel) {\r\n          themeLabel.innerHTML = `<i class=\"bi bi-moon-fill\"></i>`\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private switchLanguage(trigger: HTMLElement, language: ECodeBlockingLanguage) {\r\n    this.getLanguageExtension(language).then((languageExtension) => {\r\n      const languageCompartment = this.languageCompartment\r\n      if (!languageCompartment) return\r\n      const codeBlockBox = trigger.closest<HTMLElement>(`.${this.codeBlockBoxClassName}`)\r\n      if (!codeBlockBox) return\r\n      const view = this.savedCodeBlocks.get(codeBlockBox.dataset.codeBlockBoxName as TCodeBlockName)\r\n      if (!view) return\r\n      view.dispatch({\r\n        effects: languageCompartment.reconfigure(languageExtension),\r\n      })\r\n      const languageLabel = trigger.querySelector(\".NAME-language-label\")\r\n      if (languageLabel) {\r\n        languageLabel.textContent = capitalizeWord(language)\r\n      }\r\n    })\r\n  }\r\n\r\n  private onClickButtonSwitchLanguage(e: MouseEvent) {\r\n    const currentTarget = e.currentTarget as HTMLElement\r\n    DropdownManager.onTriggerClick(\r\n      currentTarget,\r\n      [\r\n        {\r\n          options: Object.values(ECodeBlockingLanguage).map((language) => ({\r\n            value: language,\r\n            label: capitalizeWord(language),\r\n            className: \"text-sm\",\r\n          })),\r\n        },\r\n      ],\r\n      (activeValue) => {\r\n        this.switchLanguage(currentTarget, activeValue as ECodeBlockingLanguage)\r\n      }\r\n    )\r\n  }\r\n\r\n  private onClickButtonUndoRedo(e: MouseEvent, action: \"undo\" | \"redo\") {\r\n    const currentTarget = e.currentTarget as HTMLElement\r\n    const codeBlockBox = currentTarget.closest<HTMLElement>(`.${this.codeBlockBoxClassName}`)\r\n    if (!codeBlockBox) return\r\n    const view = this.savedCodeBlocks.get(codeBlockBox.dataset.codeBlockBoxName as TCodeBlockName)\r\n    if (!view) return\r\n    if (action === \"undo\") {\r\n      undo(view)\r\n    } else {\r\n      redo(view)\r\n    }\r\n  }\r\n\r\n  private createNewCodeBlockBoxElement(\r\n    language: ECodeBlockingLanguage,\r\n    isDarkTheme: boolean\r\n  ): TCreateCodeBlockBoxElementResult {\r\n    const parentElement = document.createElement(this.codeBlockBoxElementTagName)\r\n    parentElement.dataset.codeBlockParentName = this.createCodeBlockParentName()\r\n\r\n    const boxElement = document.createElement(this.codeBlockBoxElementTagName)\r\n    boxElement.contentEditable = \"false\"\r\n    boxElement.className = this.codeBlockBoxClassName + \" border border-regular-border-cl rounded overflow-hidden\"\r\n    boxElement.dataset.codeBlockBoxName = this.createCodeBlockBoxName()\r\n    boxElement.dataset.language = language\r\n    boxElement.dataset.isDarkTheme = isDarkTheme.toString()\r\n    boxElement.appendChild(\r\n      LitHTMLHelper.createElementFromRenderer(\r\n        () => html`\r\n          <div class=\"flex gap-2 items-stretch justify-between w-full py-1 px-2 text-sm\">\r\n            <div class=\"flex gap-2 items-stretch\">\r\n              <button\r\n                @click=${(e: MouseEvent) => this.switchTheme(e)}\r\n                class=\"flex items-center gap-2 px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 cursor-pointer\"\r\n              >\r\n                <span class=\"NAME-theme-label\"\r\n                  >${isDarkTheme ? html`<i class=\"bi bi-moon-fill\"></i>` : html`<i class=\"bi bi-sun-fill\"></i>`}</span\r\n                >\r\n              </button>\r\n              <button\r\n                @click=${(e: MouseEvent) => this.onClickButtonSwitchLanguage(e)}\r\n                class=\"NAME-dropdown-trigger flex items-center gap-2 px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 cursor-pointer\"\r\n              >\r\n                <i class=\"bi bi-braces\"></i>\r\n                <span class=\"NAME-language-label\">${capitalizeWord(language)}</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"flex gap-2 items-stretch\">\r\n              <button\r\n                @click=${(e: MouseEvent) => this.onClickButtonUndoRedo(e, \"undo\")}\r\n                class=\"flex items-center gap-2 px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 cursor-pointer\"\r\n              >\r\n                <i class=\"bi bi-arrow-counterclockwise\"></i>\r\n                <span>Undo</span>\r\n              </button>\r\n              <button\r\n                @click=${(e: MouseEvent) => this.onClickButtonUndoRedo(e, \"redo\")}\r\n                class=\"flex items-center gap-2 px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 cursor-pointer\"\r\n              >\r\n                <i class=\"bi bi-arrow-clockwise\"></i>\r\n                <span>Redo</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        `,\r\n        []\r\n      )\r\n    )\r\n    boxElement.appendChild(parentElement)\r\n\r\n    return {\r\n      boxElement,\r\n      parentElement,\r\n    }\r\n  }\r\n\r\n  private handleArroyKeys(view: EditorView, direction: \"up\" | \"down\" | \"left\" | \"right\"): boolean {\r\n    const state = view.state\r\n    const stateDoc = state.doc\r\n    const totalLines = stateDoc.lines\r\n    const cursorPos = state.selection.main.head\r\n    const currentLine = stateDoc.lineAt(cursorPos).number\r\n    if (direction === \"up\" && currentLine === 1) {\r\n      codeBlockingManager.jumpToPreviousLineFromInsideCodeBlock(view.dom)\r\n      return true\r\n    } else if (direction === \"down\" && currentLine === totalLines) {\r\n      codeBlockingManager.jumpToNewLineFromInsideCodeBlock(view.dom)\r\n      return true\r\n    } else {\r\n      const firstLine = stateDoc.line(1) // dòng đầu\r\n      const lastLine = stateDoc.line(totalLines) // dòng cuối\r\n      // Trường hợp 1: con trỏ ở đầu dòng đầu tiên\r\n      if (direction === \"left\" && cursorPos === firstLine.from) {\r\n        codeBlockingManager.jumpToPreviousLineFromInsideCodeBlock(view.dom)\r\n        return true\r\n      }\r\n      // Trường hợp 2: con trỏ ở cuối dòng cuối cùng\r\n      if (direction === \"right\" && cursorPos === lastLine.to) {\r\n        codeBlockingManager.jumpToNewLineFromInsideCodeBlock(view.dom)\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  private initDOMEventHandlers(): Extension {\r\n    return EditorView.domEventHandlers({\r\n      keydown: (e, view) => {\r\n        e.stopPropagation()\r\n        return false\r\n      },\r\n      beforeinput: (e, view) => {\r\n        e.stopPropagation()\r\n        return false\r\n      },\r\n      click: (e, view) => {\r\n        e.stopPropagation()\r\n        return false\r\n      },\r\n      selectionchange: (e, view) => {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n        return false\r\n      },\r\n      paste: (e, view) => {\r\n        e.stopPropagation()\r\n        return false\r\n      },\r\n    })\r\n  }\r\n\r\n  private createCodeBlockSkeleton(): HTMLElement {\r\n    return LitHTMLHelper.createElementFromRenderer(Skeleton, [{ fullWidth: true, height: 200 }])\r\n  }\r\n\r\n  private insertCodeBlockSkeleton(selection: Selection): TSkeletonReplacer {\r\n    const skeleton = this.createCodeBlockSkeleton()\r\n    const topBlockElement = CodeVCNEditorHelper.getTopBlockElementFromSelection(selection)\r\n    if (!topBlockElement) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.TOP_BLOCK_NOT_FOUND)\r\n    }\r\n    topBlockElement.replaceChildren(skeleton)\r\n    return (codeBlockElement: HTMLElement) => {\r\n      skeleton.replaceWith(codeBlockElement)\r\n    }\r\n  }\r\n\r\n  private async generateStartState(language: ECodeBlockingLanguage, isDarkTheme: boolean): Promise<EditorState> {\r\n    const { languageCompartment, themeCompartment } = this.initCompartments()\r\n\r\n    const languageExtension = languageCompartment.of(await this.getLanguageExtension(language))\r\n\r\n    const themeExtension = themeCompartment.of(isDarkTheme ? vscodeDark : vscodeLight)\r\n\r\n    return EditorState.create({\r\n      doc: \"\",\r\n      extensions: [\r\n        lineNumbers(),\r\n        foldGutter(),\r\n        highlightSpecialChars(),\r\n        history(),\r\n        drawSelection(),\r\n        indentOnInput(),\r\n        bracketMatching(),\r\n        highlightActiveLine(),\r\n        closeBrackets(),\r\n        syntaxHighlighting(defaultHighlightStyle, { fallback: true }),\r\n        keymap.of([\r\n          { key: \"ArrowDown\", run: (view) => this.handleArroyKeys(view, \"down\") },\r\n          { key: \"ArrowUp\", run: (view) => this.handleArroyKeys(view, \"up\") },\r\n          { key: \"ArrowLeft\", run: (view) => this.handleArroyKeys(view, \"left\") },\r\n          { key: \"ArrowRight\", run: (view) => this.handleArroyKeys(view, \"right\") },\r\n          ...defaultKeymap,\r\n          ...historyKeymap,\r\n          ...foldKeymap,\r\n          indentWithTab,\r\n          ...closeBracketsKeymap,\r\n        ]),\r\n        languageExtension,\r\n        themeExtension,\r\n        this.initDOMEventHandlers(),\r\n      ],\r\n    })\r\n  }\r\n\r\n  async initCodeBlockView(\r\n    selection: Selection,\r\n    language: ECodeBlockingLanguage,\r\n    isDarkTheme: boolean = false\r\n  ): Promise<TInitCodeBlockViewResult> {\r\n    const skeletonReplacer = this.insertCodeBlockSkeleton(selection)\r\n\r\n    const { boxElement, parentElement } = this.createNewCodeBlockBoxElement(language, isDarkTheme)\r\n    skeletonReplacer(boxElement)\r\n\r\n    const startState = await this.generateStartState(language, isDarkTheme)\r\n\r\n    const codeBlockView = new EditorView({\r\n      state: startState,\r\n      parent: parentElement,\r\n    })\r\n    codeBlockView.focus()\r\n\r\n    this.saveNewCodeBlock(boxElement.dataset.codeBlockBoxName as TCodeBlockName, codeBlockView)\r\n\r\n    return { codeBlockView, boxElement, parentElement }\r\n  }\r\n}\r\n","import { ECodeBlockingLanguage, EErrorMessage } from \"@/enums/global-enums\"\r\nimport { CodeVCNEditorHelper } from \"@/helpers/codevcn-editor-helper\"\r\nimport { EditorInternalErrorHelper } from \"@/helpers/error-helper\"\r\nimport { CodeBlockViewManager } from \"./code-block-view.manager\"\r\n\r\nclass CodeBlockingManager {\r\n  private readonly codeBlockBoxElementTagName: string = \"DIV\"\r\n  private readonly codeBlockBoxClassName: string = \"NAME-code-block-box\"\r\n  private readonly codeBlockViewManager: CodeBlockViewManager\r\n\r\n  constructor() {\r\n    this.codeBlockViewManager = new CodeBlockViewManager(this.codeBlockBoxElementTagName, this.codeBlockBoxClassName)\r\n  }\r\n\r\n  getCodeBlockBoxClassName(): string {\r\n    return this.codeBlockBoxClassName\r\n  }\r\n\r\n  private async initCodeBlockView(\r\n    selection: Selection,\r\n    language: ECodeBlockingLanguage,\r\n    isDarkTheme = false\r\n  ): Promise<void> {\r\n    await this.codeBlockViewManager.initCodeBlockView(selection, language, isDarkTheme)\r\n  }\r\n\r\n  private insertNewCodeBlock(language: ECodeBlockingLanguage, isDarkTheme = false): void {\r\n    let selection = CodeVCNEditorHelper.restoreCaretPosition()\r\n    if (!selection) {\r\n      selection = CodeVCNEditorHelper.focusCaretAtEndOfEditorContent()\r\n    }\r\n    if (!selection) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.SELECTION_NOT_FOUND_AFTER_RESTORE)\r\n    }\r\n    const { topBlockElement, isEmpty } = CodeVCNEditorHelper.isEmptyTopBlock(selection)\r\n    if (topBlockElement) {\r\n      if (!isEmpty) {\r\n        CodeVCNEditorHelper.splitCurrentTopBlockElementAtCaret(selection, true)\r\n      }\r\n      this.initCodeBlockView(selection, language, isDarkTheme)\r\n    }\r\n  }\r\n\r\n  jumpToPreviousLineFromInsideCodeBlock(codeBlockParent: HTMLElement): void {\r\n    const topBlockElement = CodeVCNEditorHelper.getTopBlockElementFromNode(codeBlockParent)\r\n    if (!topBlockElement) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.TOP_BLOCK_NOT_FOUND)\r\n    }\r\n    const selection = window.getSelection()\r\n    if (!selection || selection.rangeCount === 0) return\r\n    CodeVCNEditorHelper.moveCaretToPreviousTopBlock(selection)\r\n  }\r\n\r\n  jumpToNewLineFromInsideCodeBlock(codeBlockParent: HTMLElement): void {\r\n    const topBlockElement = CodeVCNEditorHelper.getTopBlockElementFromNode(codeBlockParent)\r\n    if (!topBlockElement) {\r\n      throw EditorInternalErrorHelper.createError(EErrorMessage.TOP_BLOCK_NOT_FOUND)\r\n    }\r\n    const selection = window.getSelection()\r\n    if (!selection || selection.rangeCount === 0) return\r\n    CodeVCNEditorHelper.moveCaretToStartOfNextTopBlock(selection)\r\n  }\r\n\r\n  insertCodeBlockForEditing(language: ECodeBlockingLanguage = ECodeBlockingLanguage.CPP, isDarkTheme = false) {\r\n    this.insertNewCodeBlock(language, isDarkTheme)\r\n  }\r\n}\r\n\r\nexport const codeBlockingManager = new CodeBlockingManager()\r\n","import { html } from \"lit-html\"\r\nimport { textListingStylish } from \"../toolbar/text-listing/text-listing.stylish.js\"\r\nimport { CodeVCNEditorHelper } from \"@/helpers/codevcn-editor-helper.js\"\r\nimport { blockquoteStylish } from \"../toolbar/text-blocking/blockquote/blockquote.stylish.js\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers.js\"\r\nimport { addImageModalManager } from \"../toolbar/image-blocking/add-image.manager.js\"\r\nimport { textLinkingManager } from \"../toolbar/text-linking/text-linking.manager.js\"\r\nimport { codeBlockingManager } from \"../toolbar/code-blocking/code-blocking.manager.js\"\r\n\r\nclass EditorContent {\r\n  private contentElement: HTMLElement\r\n  private contentElementName: string = \"NAME-editor-content\"\r\n\r\n  constructor() {\r\n    this.contentElement = this.createContentElement()\r\n    this.setupContentArea()\r\n  }\r\n\r\n  private setupContentArea(): void {\r\n    this.bindContentEventListeners()\r\n    this.bindSelectionChangeEventListener()\r\n    this.bindKeydownEventListener()\r\n    this.bindBeforeInputEventListener()\r\n    this.bindPasteEventListener()\r\n  }\r\n\r\n  private isEventAllowed(e: Event): boolean {\r\n    const target = e.target\r\n    if (target instanceof HTMLElement && target.closest(`.${codeBlockingManager.getCodeBlockBoxClassName()}`)) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  private bindContentEventListeners(): void {\r\n    this.contentElement.addEventListener(\"click\", (e) => {\r\n      if (this.isEventAllowed(e)) {\r\n        textLinkingManager.activateLinksOnEditorContentClick(e)\r\n      }\r\n    })\r\n  }\r\n\r\n  private bindSelectionChangeEventListener(): void {\r\n    document.addEventListener(\"selectionchange\", (e) => {\r\n      if (this.isEventAllowed(e)) {\r\n        CodeVCNEditorHelper.saveCurrentCaretPosition()\r\n        queueMicrotask(() => {\r\n          textLinkingManager.showModalOnCaretMoves()\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  getContentElementName(): string {\r\n    return this.contentElementName\r\n  }\r\n\r\n  private createContentElement(): HTMLElement {\r\n    const Renderer = () =>\r\n      html`\r\n        <div\r\n          class=\"${this.contentElementName} p-4 min-h-[300px] outline-none\"\r\n          contenteditable=\"true\"\r\n          spellcheck=\"false\"\r\n        ></div>\r\n      `\r\n    return LitHTMLHelper.createElementFromRenderer(Renderer, [])\r\n  }\r\n\r\n  private bindKeydownEventListener(): void {\r\n    this.contentElement.addEventListener(\"keydown\", (e) => {\r\n      if (this.isEventAllowed(e)) {\r\n        queueMicrotask(() => {\r\n          textListingStylish.onAction(undefined, e)\r\n          blockquoteStylish.onAction(undefined, e)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  private makeNewLine(): void {\r\n    const selection = this.checkIsFocusingInEditorContent()\r\n    if (!selection) return\r\n    const topBlockElement = CodeVCNEditorHelper.getTopBlockElementFromSelection(selection)\r\n    if (topBlockElement) {\r\n      CodeVCNEditorHelper.insertNewTopBlockElementAfterElement(selection, topBlockElement)\r\n    } else {\r\n      this.contentElement.appendChild(CodeVCNEditorHelper.createNewEmptyTopBlockElement())\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hàm xử lý sự kiện beforeinput (hàm được gọi khi người dùng nhập chỉnh sửa content trong editor)\r\n   */\r\n  private bindBeforeInputEventListener(): void {\r\n    this.contentElement.addEventListener(\"beforeinput\", (e) => {\r\n      if (this.isEventAllowed(e)) {\r\n        if (e.inputType === \"insertParagraph\") {\r\n          e.preventDefault()\r\n          this.makeNewLine()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  private bindPasteEventListener(): void {\r\n    this.contentElement.addEventListener(\"paste\", (e) => {\r\n      if (this.isEventAllowed(e)) {\r\n        queueMicrotask(() => {\r\n          addImageModalManager.onPasteImage(e)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  getContentElement(): HTMLElement {\r\n    return this.contentElement\r\n  }\r\n\r\n  checkIsFocusingInEditorContent(): Selection | null {\r\n    const selection = window.getSelection()\r\n    if (!selection || selection.rangeCount === 0) return null\r\n    const { anchorNode, focusNode } = selection\r\n    if (!anchorNode || !focusNode) return null\r\n    if (!this.contentElement.contains(anchorNode) || !this.contentElement.contains(focusNode)) return null\r\n    if (this.contentElement.isSameNode(anchorNode) || this.contentElement.isSameNode(focusNode)) return null\r\n    return selection\r\n  }\r\n}\r\n\r\nexport const editorContent = new EditorContent()\r\n","import { html } from \"lit-html\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers.js\"\r\n\r\nclass EditorFrame {\r\n  private frameElement: HTMLElement\r\n  private frameElementClassName: string = \"NAME-editor-frame\"\r\n  private codevcnEditorClassName: string = \"NAME-codevcn-editor\"\r\n\r\n  constructor() {\r\n    this.frameElement = this.createFrameElement()\r\n  }\r\n\r\n  private createFrameElement(): HTMLElement {\r\n    const Renderer = () =>\r\n      html`<div\r\n        class=\"${this.frameElementClassName} ${this\r\n          .codevcnEditorClassName} w-full max-w-3xl mx-auto border rounded-lg shadow bg-white\"\r\n      ></div>`\r\n    return LitHTMLHelper.createElementFromRenderer(Renderer, [])\r\n  }\r\n\r\n  getFrameElement(): HTMLElement {\r\n    return this.frameElement\r\n  }\r\n}\r\n\r\nexport const editorFrame = new EditorFrame()\r\n","type TButtonClickCallback<TAction extends string> = (action: TAction, value?: string) => void\r\n\r\nexport class ToolbarButton<TAction extends string> {\r\n  element: HTMLElement\r\n  action: TAction\r\n  value?: string\r\n\r\n  constructor(el: HTMLElement) {\r\n    this.element = el\r\n    this.action = (el.getAttribute(\"data-action\") as TAction) || (\"\" as TAction)\r\n    this.value = el.getAttribute(\"data-value\") || undefined\r\n  }\r\n\r\n  onClick(callback: TButtonClickCallback<TAction>) {\r\n    this.element.addEventListener(\"click\", () => {\r\n      callback(this.action, this.value)\r\n    })\r\n  }\r\n}\r\n","import { html } from \"lit-html\"\r\nimport { ToolbarButton } from \"../toolbar-button.js\"\r\nimport { repeat } from \"lit-html/directives/repeat.js\"\r\nimport { unsafeHTML } from \"lit-html/directives/unsafe-html.js\"\r\nimport { textStylingStylish } from \"./text-styling.stylish.js\"\r\nimport { ETextStylingType, EToolbarAction } from \"@/enums/global-enums.js\"\r\nimport type { TToolbarAction } from \"@/types/global-types.js\"\r\nimport { DropdownManager } from \"@/lib/components/managers/dropdown.manager.js\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers.js\"\r\nimport { DropdownTrigger } from \"@/lib/components/dropdown.js\"\r\n\r\nclass TextStylingModule {\r\n  private sectionElement: HTMLElement\r\n  private actions: TToolbarAction[] = [\r\n    {\r\n      action: EToolbarAction.BOLD,\r\n      label: \"B\",\r\n      className: \"font-bold\",\r\n    },\r\n    {\r\n      action: EToolbarAction.ITALIC,\r\n      label: \"I\",\r\n      className: \"italic font-mono text-lg\",\r\n    },\r\n    {\r\n      action: EToolbarAction.UNDERLINE,\r\n      label: \"U\",\r\n      className: \"underline\",\r\n    },\r\n    {\r\n      action: EToolbarAction.STRIKE_THROUGH,\r\n      label: \"S\",\r\n      className: \"line-through\",\r\n    },\r\n    {\r\n      action: EToolbarAction.RESIZE,\r\n      label: `\r\n        <svg viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" height=\"18\" width=\"18\">\r\n          <g data-name=\"Layer_2\">\r\n            <g data-name=\"invisible_box\">\r\n              <rect width=\"26\" height=\"26\" fill=\"none\"></rect>\r\n            </g>\r\n            <g data-name=\"Q3_icons\">\r\n              <g>\r\n                <polygon points=\"2 23 9 23 9 43 15 43 15 23 22 23 22 17 2 17 2 23\"></polygon>\r\n                <polygon points=\"46 5 14 5 14 11 27 11 27 43 33 43 33 11 46 11 46 5\"></polygon>\r\n              </g>\r\n            </g>\r\n          </g>\r\n        </svg>`,\r\n      className: \"text-2xl font-bold\",\r\n      options: [\r\n        {\r\n          value: ETextStylingType.PARAGRAPH,\r\n          label: \"Paragraph\",\r\n          className: \"text-base\",\r\n        },\r\n        {\r\n          value: ETextStylingType.HEADING_1,\r\n          label: \"H1\",\r\n          className: \"text-2xl font-bold\",\r\n        },\r\n        {\r\n          value: ETextStylingType.HEADING_2,\r\n          label: \"H2\",\r\n          className: \"text-xl font-bold\",\r\n        },\r\n        {\r\n          value: ETextStylingType.HEADING_3,\r\n          label: \"H3\",\r\n          className: \"text-lg font-bold\",\r\n        },\r\n      ],\r\n    },\r\n  ]\r\n\r\n  constructor() {\r\n    this.sectionElement = this.createSectionElement()\r\n    this.bindEvents()\r\n  }\r\n\r\n  getSectionElement(): HTMLElement {\r\n    return this.sectionElement\r\n  }\r\n\r\n  private createSectionElement(): HTMLElement {\r\n    const Renderer = () =>\r\n      html`<div class=\"NAME-text-styling-section flex gap-2\">\r\n        ${repeat(\r\n          this.actions,\r\n          ({ action }) => action,\r\n          ({ action, label, className, options }) =>\r\n            options\r\n              ? DropdownTrigger({\r\n                  action,\r\n                  label,\r\n                  classNames: { btn: className },\r\n                  initialValue: options?.[0]?.value || \"\",\r\n                })\r\n              : html`<button\r\n                  class=\"NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${className}\"\r\n                  data-action=\"${action}\"\r\n                >\r\n                  ${unsafeHTML(label)}\r\n                </button>`\r\n        )}\r\n      </div>`\r\n    return LitHTMLHelper.createElementFromRenderer(Renderer, [])\r\n  }\r\n\r\n  private bindButtonEvents() {\r\n    const buttons = this.sectionElement.querySelectorAll<HTMLElement>(\".NAME-toolbar-btn\")\r\n    buttons.forEach((btn) => {\r\n      const tb = new ToolbarButton<ETextStylingType>(btn)\r\n      tb.onClick((action) => {\r\n        this.onAction(action as ETextStylingType)\r\n      })\r\n    })\r\n  }\r\n\r\n  private bindDropdownEvents() {\r\n    const triggers = this.sectionElement.querySelectorAll<HTMLElement>(\".NAME-dropdown-trigger\")\r\n    for (const trigger of triggers) {\r\n      DropdownManager.bindShowDropdownMenuEventToTrigger(\r\n        trigger,\r\n        [\r\n          {\r\n            options: this.actions.find(({ action }) => action === trigger.dataset.action)?.options || [],\r\n          },\r\n        ],\r\n        (activeValue) => {\r\n          this.onAction(activeValue as ETextStylingType)\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  private bindEvents() {\r\n    this.bindButtonEvents()\r\n    this.bindDropdownEvents()\r\n  }\r\n\r\n  private onAction(stylingType: ETextStylingType) {\r\n    queueMicrotask(() => {\r\n      textStylingStylish.onAction(stylingType)\r\n    })\r\n  }\r\n}\r\n\r\nexport const textStylingModule = new TextStylingModule()\r\n","import { html } from \"lit-html\"\r\nimport type { TToolbarAction } from \"@/types/global-types.js\"\r\nimport { ETextListingType, EToolbarAction } from \"@/enums/global-enums.js\"\r\nimport { repeat } from \"lit-html/directives/repeat.js\"\r\nimport { unsafeHTML } from \"lit-html/directives/unsafe-html.js\"\r\nimport { ToolbarButton } from \"../toolbar-button.js\"\r\nimport { textListingStylish } from \"./text-listing.stylish.js\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers.js\"\r\n\r\nclass TextListingModule {\r\n  private sectionElement: HTMLElement\r\n  private actions: TToolbarAction[] = [\r\n    {\r\n      action: EToolbarAction.NUMBERED_LIST,\r\n      label: `<i class=\"bi bi-list-ol\"></i>`,\r\n      className: \"text-2xl font-bold\",\r\n    },\r\n    {\r\n      action: EToolbarAction.BULLET_LIST,\r\n      label: `<i class=\"bi bi-list-ul\"></i>`,\r\n      className: \"text-2xl font-bold\",\r\n    },\r\n  ]\r\n\r\n  constructor() {\r\n    this.sectionElement = this.createSectionElement()\r\n    this.bindEvents()\r\n  }\r\n\r\n  private createSectionElement(): HTMLElement {\r\n    const Renderer = () => html`<div class=\"NAME-text-listing-section flex gap-2\">\r\n      ${repeat(\r\n        this.actions,\r\n        (action) => action.action,\r\n        (action) =>\r\n          html`<button\r\n            class=\"NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${action.className}\"\r\n            data-action=\"${action.action}\"\r\n          >\r\n            ${unsafeHTML(action.label)}\r\n          </button>`\r\n      )}\r\n    </div>`\r\n    return LitHTMLHelper.createElementFromRenderer(Renderer, [])\r\n  }\r\n\r\n  getSectionElement(): HTMLElement {\r\n    return this.sectionElement\r\n  }\r\n\r\n  private bindButtonEvents() {\r\n    const buttons = this.sectionElement.querySelectorAll<HTMLElement>(\".NAME-toolbar-btn\")\r\n    buttons.forEach((btn) => {\r\n      const tb = new ToolbarButton<ETextListingType>(btn)\r\n      tb.onClick((action) => {\r\n        this.onAction(action)\r\n      })\r\n    })\r\n  }\r\n\r\n  private bindEvents() {\r\n    this.bindButtonEvents()\r\n  }\r\n\r\n  private onAction(listingType: ETextListingType) {\r\n    queueMicrotask(() => {\r\n      textListingStylish.onAction(listingType)\r\n    })\r\n  }\r\n}\r\n\r\nexport const textListingModule = new TextListingModule()\r\n","import { EToolbarAction, EBlockquoteType } from \"@/enums/global-enums.js\"\r\nimport type { TToolbarAction } from \"@/types/global-types.js\"\r\nimport { html } from \"lit-html\"\r\nimport { repeat } from \"lit-html/directives/repeat.js\"\r\nimport { unsafeHTML } from \"lit-html/directives/unsafe-html.js\"\r\nimport { ToolbarButton } from \"../../toolbar-button.js\"\r\nimport { blockquoteStylish } from \"./blockquote.stylish.js\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers.js\"\r\n\r\nclass BlockquoteModule {\r\n  private sectionElement: HTMLElement\r\n  private actions: TToolbarAction[] = [\r\n    {\r\n      action: EToolbarAction.BLOCKQUOTE,\r\n      label: `<i class=\"bi bi-quote text-xl\"></i>`,\r\n    },\r\n  ]\r\n\r\n  constructor() {\r\n    this.sectionElement = this.createSectionElement()\r\n    this.bindEvents()\r\n  }\r\n\r\n  private createSectionElement(): HTMLElement {\r\n    const Renderer = () =>\r\n      html`<div class=\"NAME-blockquote-module flex gap-2\">\r\n        ${repeat(\r\n          this.actions,\r\n          ({ action }) => action,\r\n          ({ action, label, className }) =>\r\n            html`<button\r\n              class=\"NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${className}\"\r\n              data-action=\"${action}\"\r\n            >\r\n              ${unsafeHTML(label)}\r\n            </button>`\r\n        )}\r\n      </div>`\r\n    return LitHTMLHelper.createElementFromRenderer(Renderer, [])\r\n  }\r\n\r\n  getSectionElement(): HTMLElement {\r\n    return this.sectionElement\r\n  }\r\n\r\n  private bindButtonEvents() {\r\n    const buttons = this.sectionElement.querySelectorAll<HTMLElement>(\".NAME-toolbar-btn\")\r\n    buttons.forEach((btn) => {\r\n      const tb = new ToolbarButton<EBlockquoteType>(btn)\r\n      tb.onClick((action) => {\r\n        this.onAction(action)\r\n      })\r\n    })\r\n  }\r\n\r\n  private bindEvents() {\r\n    this.bindButtonEvents()\r\n  }\r\n\r\n  private onAction(action: EBlockquoteType) {\r\n    queueMicrotask(() => {\r\n      blockquoteStylish.onAction(action)\r\n    })\r\n  }\r\n}\r\n\r\nexport const blockquoteModule = new BlockquoteModule()\r\n","import { EImageBlockingType, EToolbarAction } from \"@/enums/global-enums.js\"\r\nimport type { TImageBlockingModuleConfig, TToolbarAction } from \"@/types/global-types.js\"\r\nimport { ToolbarButton } from \"../toolbar-button.js\"\r\nimport { html } from \"lit-html\"\r\nimport { repeat } from \"lit-html/directives/repeat.js\"\r\nimport { unsafeHTML } from \"lit-html/directives/unsafe-html.js\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers.js\"\r\nimport { addImageModalManager } from \"./add-image.manager.js\"\r\n\r\nclass ImageBlockingModule {\r\n  private sectionElement: HTMLElement\r\n  private actions: TToolbarAction[] = [\r\n    {\r\n      action: EToolbarAction.IMAGE_BLOCKING,\r\n      label: `<i class=\"bi bi-image-fill\"></i>`,\r\n    },\r\n  ]\r\n\r\n  constructor() {\r\n    this.sectionElement = this.createSectionElement()\r\n    this.bindEvents()\r\n  }\r\n\r\n  getSectionElement(): HTMLElement {\r\n    return this.sectionElement\r\n  }\r\n\r\n  private createSectionElement(): HTMLElement {\r\n    const Renderer = () =>\r\n      html`<div class=\"NAME-image-blocking-module flex gap-2\">\r\n        ${repeat(\r\n          this.actions,\r\n          ({ action }) => action,\r\n          ({ action, label, className }) =>\r\n            html`<button\r\n              class=\"NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${className}\"\r\n              data-action=\"${action}\"\r\n            >\r\n              ${unsafeHTML(label)}\r\n            </button>`\r\n        )}\r\n      </div>`\r\n    return LitHTMLHelper.createElementFromRenderer(Renderer, [])\r\n  }\r\n\r\n  private bindButtonEvents() {\r\n    const buttons = this.sectionElement.querySelectorAll<HTMLElement>(\".NAME-toolbar-btn\")\r\n    buttons.forEach((btn) => {\r\n      const tb = new ToolbarButton<EImageBlockingType>(btn)\r\n      tb.onClick((action) => {\r\n        this.onAction(action)\r\n      })\r\n    })\r\n  }\r\n\r\n  private bindEvents() {\r\n    this.bindButtonEvents()\r\n  }\r\n\r\n  configModule(config: TImageBlockingModuleConfig) {\r\n    const { uploadImageURL } = config\r\n    addImageModalManager.setUploadImageURL(uploadImageURL)\r\n  }\r\n\r\n  private onAction(action: EImageBlockingType) {\r\n    queueMicrotask(() => {\r\n      switch (action) {\r\n        case EImageBlockingType.IMAGE_BLOCKING:\r\n          addImageModalManager.showAddImageModal()\r\n          break\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport const imageBlockingModule = new ImageBlockingModule()\r\n","import { ETextLinkingType, EToolbarAction } from \"@/enums/global-enums\"\r\nimport { TToolbarAction } from \"@/types/global-types\"\r\nimport { html } from \"lit-html\"\r\nimport { repeat } from \"lit-html/directives/repeat.js\"\r\nimport { unsafeHTML } from \"lit-html/directives/unsafe-html.js\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers.js\"\r\nimport { ToolbarButton } from \"../toolbar-button.js\"\r\nimport { textLinkingManager } from \"./text-linking.manager.js\"\r\n\r\nclass TextLinkingModule {\r\n  private sectionElement: HTMLElement\r\n  private actions: TToolbarAction[] = [\r\n    {\r\n      action: EToolbarAction.TEXT_LINKING,\r\n      label: `<i class=\"bi bi-link-45deg text-xl\"></i>`,\r\n    },\r\n  ]\r\n\r\n  constructor() {\r\n    this.sectionElement = this.createSectionElement()\r\n    this.bindEvents()\r\n  }\r\n\r\n  private createSectionElement(): HTMLElement {\r\n    const Renderer = () => html`<div class=\"NAME-text-linking-section flex gap-2\">\r\n      ${repeat(\r\n        this.actions,\r\n        (action) => action.action,\r\n        (action) => html`<button\r\n          class=\"NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${action.className}\"\r\n          data-action=\"${action.action}\"\r\n        >\r\n          ${unsafeHTML(action.label)}\r\n        </button>`\r\n      )}\r\n    </div>`\r\n    return LitHTMLHelper.createElementFromRenderer(Renderer, [])\r\n  }\r\n\r\n  getSectionElement(): HTMLElement {\r\n    return this.sectionElement\r\n  }\r\n\r\n  private bindButtonEvents() {\r\n    const buttons = this.sectionElement.querySelectorAll<HTMLElement>(\".NAME-toolbar-btn\")\r\n    buttons.forEach((btn) => {\r\n      const tb = new ToolbarButton<ETextLinkingType>(btn)\r\n      tb.onClick((action) => {\r\n        this.onAction(action)\r\n      })\r\n    })\r\n  }\r\n\r\n  private bindEvents() {\r\n    this.bindButtonEvents()\r\n  }\r\n\r\n  private onAction(action: ETextLinkingType) {\r\n    queueMicrotask(() => {\r\n      switch (action) {\r\n        case ETextLinkingType.TEXT_LINKING:\r\n          textLinkingManager.showModalOnAction()\r\n          break\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport const textLinkingModule = new TextLinkingModule()\r\n","import { ECodeBlockingType, EToolbarAction } from \"@/enums/global-enums\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers.js\"\r\nimport { TToolbarAction } from \"@/types/global-types\"\r\nimport { html } from \"lit-html\"\r\nimport { repeat } from \"lit-html/directives/repeat.js\"\r\nimport { unsafeHTML } from \"lit-html/directives/unsafe-html.js\"\r\nimport { ToolbarButton } from \"../toolbar-button.js\"\r\nimport { codeBlockingManager } from \"./code-blocking.manager.js\"\r\n\r\nclass CodeBlockingModule {\r\n  private sectionElement: HTMLElement\r\n  private actions: TToolbarAction[] = [\r\n    {\r\n      action: EToolbarAction.CODE_BLOCKING,\r\n      label: `<i class=\"bi bi-code-square text-lg\"></i>`,\r\n    },\r\n  ]\r\n\r\n  constructor() {\r\n    this.sectionElement = this.createSectionElement()\r\n    this.bindEvents()\r\n  }\r\n\r\n  getSectionElement(): HTMLElement {\r\n    return this.sectionElement\r\n  }\r\n\r\n  private createSectionElement(): HTMLElement {\r\n    const Renderer = () =>\r\n      html`<div class=\"NAME-code-blocking-module flex gap-2\">\r\n        ${repeat(\r\n          this.actions,\r\n          ({ action }) => action,\r\n          ({ action, label, className }) =>\r\n            html`<button\r\n              class=\"NAME-toolbar-btn flex items-center px-2 py-1 leading-none rounded hover:bg-gray-200 cursor-pointer ${className}\"\r\n              data-action=\"${action}\"\r\n            >\r\n              ${unsafeHTML(label)}\r\n            </button>`\r\n        )}\r\n      </div>`\r\n    return LitHTMLHelper.createElementFromRenderer(Renderer, [])\r\n  }\r\n\r\n  private bindEvents() {\r\n    const buttons = this.sectionElement.querySelectorAll<HTMLElement>(\".NAME-toolbar-btn\")\r\n    buttons.forEach((btn) => {\r\n      const tb = new ToolbarButton<ECodeBlockingType>(btn)\r\n      tb.onClick((action) => {\r\n        this.onAction(action)\r\n      })\r\n    })\r\n  }\r\n\r\n  private onAction(action: ECodeBlockingType) {\r\n    queueMicrotask(() => {\r\n      switch (action) {\r\n        case ECodeBlockingType.CODE_BLOCKING:\r\n          codeBlockingManager.insertCodeBlockForEditing()\r\n          break\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport const codeBlockingModule = new CodeBlockingModule()\r\n","import { html } from \"lit-html\"\r\nimport { textStylingModule } from \"./text-styling/text-styling.module.js\"\r\nimport { textListingModule } from \"./text-listing/text-listing.module.js\"\r\nimport { blockquoteModule } from \"./text-blocking/blockquote/blockquote.module.js\"\r\nimport { imageBlockingModule } from \"./image-blocking/image-blocking.module.js\"\r\nimport { LitHTMLHelper } from \"@/helpers/common-helpers.js\"\r\nimport { textLinkingModule } from \"./text-linking/text-linking.module.js\"\r\nimport { codeBlockingModule } from \"./code-blocking/code-blocking.module.js\"\r\n\r\nclass EditorToolbar {\r\n  private toolbarElement: HTMLElement\r\n  private toolbarElementClassName: string = \"NAME-editor-toolbar\"\r\n\r\n  constructor() {\r\n    this.toolbarElement = this.createToolbarElement()\r\n    this.toolbarElement.appendChild(textStylingModule.getSectionElement())\r\n    this.toolbarElement.appendChild(textListingModule.getSectionElement())\r\n    this.toolbarElement.appendChild(blockquoteModule.getSectionElement())\r\n    this.toolbarElement.appendChild(imageBlockingModule.getSectionElement())\r\n    this.toolbarElement.appendChild(textLinkingModule.getSectionElement())\r\n    this.toolbarElement.appendChild(codeBlockingModule.getSectionElement())\r\n  }\r\n\r\n  private createToolbarElement(): HTMLElement {\r\n    const Renderer = () =>\r\n      html`<div class=\"${this.toolbarElementClassName} border-b px-2 py-1 flex gap-2 items-stretch\"></div>`\r\n    return LitHTMLHelper.createElementFromRenderer(Renderer, [])\r\n  }\r\n\r\n  getToolbarElement(): HTMLElement {\r\n    return this.toolbarElement\r\n  }\r\n}\r\n\r\nexport const editorToolbar = new EditorToolbar()\r\n","import { editorContent } from \"./content/editor.content.js\"\r\nimport { editorFrame } from \"./frame/editor.frame.js\"\r\nimport { editorToolbar } from \"./toolbar/editor.toolbar.js\"\r\nimport { ERenderingMode } from \"@/enums/global-enums.js\"\r\nimport { sanitizeHTML } from \"@/helpers/common-helpers.js\"\r\nimport { TCodeVCNEditorConfig } from \"@/types/global-types.js\"\r\nimport { imageBlockingModule } from \"./toolbar/image-blocking/image-blocking.module.js\"\r\nimport { textLinkingManager } from \"./toolbar/text-linking/text-linking.manager.js\"\r\nimport { DropdownManager } from \"../components/managers/dropdown.manager.js\"\r\n\r\nclass CodeVCNEditor {\r\n  private editorWrapperID: string\r\n  private editorWrapper: HTMLElement\r\n\r\n  constructor(editorWrapperID: string, renderingMode: ERenderingMode = ERenderingMode.APPEND) {\r\n    const editorWrapper = document.getElementById(editorWrapperID)\r\n    if (!editorWrapper) {\r\n      const message: string = `Container with id ${editorWrapperID} not found`\r\n      throw new Error(message)\r\n    }\r\n\r\n    this.editorWrapper = editorWrapper\r\n    this.editorWrapperID = editorWrapperID\r\n\r\n    editorFrame.getFrameElement().appendChild(editorToolbar.getToolbarElement())\r\n    editorFrame.getFrameElement().appendChild(editorContent.getContentElement())\r\n\r\n    if (renderingMode === ERenderingMode.APPEND) {\r\n      this.editorWrapper.appendChild(editorFrame.getFrameElement())\r\n    } else {\r\n      this.editorWrapper.replaceWith(editorFrame.getFrameElement())\r\n    }\r\n\r\n    this.initClickOnPageBodyEvent()\r\n  }\r\n\r\n  initClickOnPageBodyEvent(): void {\r\n    document.body.addEventListener(\"click\", (e) => {\r\n      queueMicrotask(() => {\r\n        DropdownManager.hideDropdownMenu(e)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Set the HTML content in the editor\r\n   * @param html - The HTML content to set in the editor\r\n   */\r\n  setContent(html: string): void {\r\n    editorContent.getContentElement().innerHTML = sanitizeHTML(html)\r\n    this.setupEditorContent()\r\n  }\r\n\r\n  /**\r\n   * Get the HTML content from the editor\r\n   * @returns The HTML content from the editor\r\n   */\r\n  getContent(): string {\r\n    return editorContent.getContentElement().innerHTML\r\n  }\r\n\r\n  getEditorWrapperID(): string {\r\n    return this.editorWrapperID\r\n  }\r\n\r\n  getEditorWrapperElement(): HTMLElement {\r\n    return this.editorWrapper\r\n  }\r\n\r\n  getToolbarElement(): HTMLElement {\r\n    return editorToolbar.getToolbarElement()\r\n  }\r\n\r\n  getContentElement(): HTMLElement {\r\n    return editorContent.getContentElement()\r\n  }\r\n\r\n  getFrameElement(): HTMLElement {\r\n    return editorFrame.getFrameElement()\r\n  }\r\n\r\n  setupEditorContent(): void {\r\n    textLinkingManager.scanEditorContentForTextLink()\r\n  }\r\n\r\n  configModule(configs: TCodeVCNEditorConfig) {\r\n    const { imageModule } = configs\r\n    if (imageModule) {\r\n      imageBlockingModule.configModule(imageModule)\r\n    }\r\n  }\r\n}\r\n\r\nexport const codevcnEditor = new CodeVCNEditor(\"codevcn-editor-root\")\r\n","import { codevcnEditor } from \"./lib/artifact/codevcn-editor.js\"\r\n\r\nconst init = () => {\r\n  codevcnEditor.setContent(`\r\n    <section>Xin chào! Đây là <ins>phần mới</ins> của <b>văn b</b>ản.</section>\r\n    <section><a href='https://www.google.com/' target='_blank' rel='noopener noreferrer'>Google</a></section>\r\n  `)\r\n  codevcnEditor.configModule({\r\n    imageModule: {\r\n      uploadImageURL: \"http://localhost:3000/api/upload\",\r\n    },\r\n  })\r\n}\r\ninit()\r\n"],"names":["t","i","s","e","h","o","n","r","l","c","a","u","d","f","v","_","m","p","g","$","y","x","T","E","A","C","P","V","N","H","I","L","k","S","R","z","M","Z","j","B","ETextStylingType","ETextListingType","ERenderingMode","EBlockquoteType","EImageBlockingType","ETextLinkingType","ECodeBlockingType","EToolbarAction","EErrorMessage","ENotifyType","EInternalEvents","ECodeBlockingLanguage","CodeVCNEditorHelper","selection","topBlockElement","trimmedInnerHTML","newBlock","startNode","selector","currentElement","editorContentElement","editorContent","anchorNode","element","newBlockElement","selectionRange","currentTopBlockElement","nextElementSibling","nextTopBlockElement","previousElementSibling","previousTopBlockElement","contentElement","range","lastElementChild","elements","container","children","child","node","beforeElement","afterElement","caretAtMiddle","beforeRange","beforeFrag","afterRange","afterFrag","deepestChild","newElements","middleElement","parent","descendantTagNames","descendants","descendant","type","message","notificationElement","TextListingStylish","listingType","elementOfSelection","currentLiElement","after","newLi","newRange","liElement","nodes","list","line","listLineElement","lineElement","newList","currentLineElement","textListingStylish","EditorInternalErrorHelper","BlockquoteStylish","blockQuoteInnerHTML","blockQuoteElement","latestTopBlockElement","blockquoteElement","blockquoteElementFirstChild","childNodes","newTopBlocks","childNode","topBlock","isEmpty","quoteLineElement","newLineElement","action","blockquoteStylish","entries","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create","apply","construct","fun","thisValue","args","Func","arrayForEach","unapply","arrayLastIndexOf","arrayPop","arrayPush","arraySplice","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","regExpTest","typeErrorCreate","unconstruct","func","thisArg","_len","_key","_len2","_key2","addToSet","set","array","transformCaseFunc","lcElement","cleanArray","index","clone","object","newObject","property","value","lookupGetter","prop","desc","fallbackValue","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","text","html","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","NODE_TYPE","getGlobal","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","suffix","ATTR_NAME","policyName","scriptUrl","_createHooksMap","createDOMPurify","window","DOMPurify","root","document","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","NamedNodeMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","remove","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","tagName","parentTagName","_forceRemove","_removeAttribute","name","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","body","_createNodeIterator","_isClobbered","_isNode","_executeHooks","currentNode","data","hook","_sanitizeElements","content","_isBasicCustomElement","parentNode","childCount","childClone","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","attributes","hookEvent","attr","namespaceURI","attrValue","initValue","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","importedNode","returnNode","nodeIterator","serializedHTML","tag","entryPoint","hookFunction","purify","sanitizeHTML","LitHTMLHelper","Renderer","render","isValidUrl","str","urlProtocol","getImageDimensions","file","resolve","reject","img","copyTextToClipboard","copyBoxElement","nextFrame","callback","capitalizeWord","word","Modal","title","footer","ModalManager","params","modalElement","titleElement","modalFooterElement","bind","fn","toString","iterator","toStringTag","kindOf","cache","thing","kindOfTest","typeOfTest","isArray","isUndefined","isBuffer","val","isFunction","isArrayBuffer","isArrayBufferView","result","isString","isNumber","isObject","isBoolean","isPlainObject","prototype","isEmptyObject","isDate","isFile","isBlob","isFileList","isStream","isFormData","kind","isURLSearchParams","isReadableStream","isRequest","isResponse","isHeaders","trim","forEach","obj","allOwnKeys","keys","len","key","findKey","_global","isContextDefined","context","merge","caseless","assignValue","targetKey","extend","b","stripBOM","inherits","constructor","superConstructor","props","descriptors","toFlatObject","sourceObj","destObj","filter","propFilter","merged","endsWith","searchString","position","lastIndex","toArray","arr","isTypedArray","TypedArray","forEachEntry","_iterator","pair","matchAll","regExp","isHTMLForm","toCamelCase","p1","p2","hasOwnProperty","isRegExp","reduceDescriptors","reducer","reducedDescriptors","descriptor","ret","freezeMethods","toObjectSet","arrayOrString","delimiter","define","noop","toFiniteNumber","defaultValue","isSpecCompliantForm","toJSONObject","stack","visit","source","target","reducedValue","isAsyncFn","isThenable","_setImmediate","setImmediateSupported","postMessageSupported","token","callbacks","cb","asap","isIterable","utils$1","AxiosError","code","config","request","response","utils","error","customProps","axiosError","httpAdapter","isVisitable","removeBrackets","renderKey","path","dots","isFlatArray","predicates","toFormData","formData","options","option","metaTokens","visitor","defaultVisitor","indexes","useBlob","convertValue","el","exposedHelpers","build","encode","charMap","match","AxiosURLSearchParams","encoder","_encode","buildURL","url","serializeFn","serializedParams","hashmarkIndex","InterceptorManager","fulfilled","rejected","id","transitionalDefaults","URLSearchParams$1","FormData$1","Blob$1","platform$1","URLSearchParams","FormData","Blob","hasBrowserEnv","_navigator","hasStandardBrowserEnv","hasStandardBrowserWebWorkerEnv","origin","platform","toURLEncodedForm","helpers","parsePropPath","arrayToObject","formDataToJSON","buildPath","isNumericKey","isLast","stringifySafely","rawValue","parser","defaults","headers","contentType","hasJSONContentType","isObjectPayload","_FormData","transitional","forcedJSONParsing","JSONRequested","strictJSONParsing","status","method","ignoreDuplicateOf","parseHeaders","rawHeaders","parsed","$internals","normalizeHeader","header","normalizeValue","parseTokens","tokens","tokensRE","isValidHeaderName","matchHeaderValue","isHeaderNameFilter","formatHeader","w","char","buildAccessors","accessorName","methodName","arg1","arg2","arg3","AxiosHeaders$1","valueOrRewrite","rewrite","self","setHeader","_value","_header","_rewrite","lHeader","setHeaders","dest","entry","matcher","deleted","deleteHeader","format","normalized","targets","asStrings","first","computed","accessors","defineAccessor","AxiosHeaders","mapped","headerValue","transformData","fns","isCancel","CanceledError","settle","validateStatus","parseProtocol","speedometer","samplesCount","min","bytes","timestamps","head","tail","firstSampleTS","chunkLength","now","startedAt","bytesCount","passed","throttle","freq","timestamp","threshold","lastArgs","timer","invoke","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","loaded","total","progressBytes","rate","inRange","progressEventDecorator","throttled","lengthComputable","asyncDecorator","isURLSameOrigin","isMSIE","cookies","expires","domain","secure","cookie","isAbsoluteURL","combineURLs","baseURL","relativeURL","buildFullPath","requestedURL","allowAbsoluteUrls","isRelativeUrl","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","configValue","resolveConfig","newConfig","withXSRFToken","xsrfHeaderName","xsrfCookieName","auth","xsrfValue","isXHRAdapterSupported","xhrAdapter","_config","requestData","requestHeaders","responseType","onUploadProgress","onDownloadProgress","onCanceled","uploadThrottled","downloadThrottled","flushUpload","flushDownload","done","onloadend","responseHeaders","err","timeoutErrorMessage","cancel","protocol","composeSignals","signals","timeout","length","controller","aborted","onabort","reason","unsubscribe","signal","streamChunk","chunk","chunkSize","pos","end","readBytes","iterable","readStream","stream","reader","trackStream","onProgress","onFinish","_onFinish","loadedBytes","isFetchSupported","isReadableStreamSupported","encodeText","test","supportsRequestStream","duplexAccessed","hasContentType","DEFAULT_CHUNK_SIZE","supportsResponseStream","resolvers","res","getBodyLength","resolveBodyLength","fetchAdapter","cancelToken","withCredentials","fetchOptions","composedSignal","requestContentLength","_request","contentTypeHeader","flush","isCredentialsSupported","isStreamResponse","responseContentLength","responseData","knownAdapters","renderReason","isResolvedHandle","adapter","adapters","nameOrAdapter","rejectedReasons","reasons","state","throwIfCancellationRequested","dispatchRequest","VERSION","validators","deprecatedWarnings","validator","version","formatMessage","opt","opts","correctSpelling","assertOptions","schema","allowUnknown","Axios$1","instanceConfig","configOrUrl","dummy","paramsSerializer","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","responseInterceptorChain","promise","chain","onFulfilled","onRejected","fullPath","Axios","generateHTTPMethod","isForm","CancelToken$1","CancelToken","executor","resolvePromise","onfulfilled","_resolve","abort","spread","isAxiosError","payload","HttpStatusCode","createInstance","defaultConfig","instance","axios","promises","all","Cancel","formToJSON","getAdapter","CodeVCNEditorService","endpoint","files","progressEvent","progress","Skeleton","width","height","fullWidth","fullHeight","ifDefined","ImageBlockingStylish","imgUrl","altText","imageElement","skeletonReplacer","imageSkeleton","pElement","imageBlockingStylish","AddImageModalManager","currentBtn","addImageContent","addImageTypeButtons","imgAltText","preview","image","imgUrlInputHidden","imgUrlInput","dimensions","caption","clipboardData","fileToUpload","imgName","imgDimensions","widthInput","heightInput","input","filesList","imgInfo","dropZone","eventName","infoForm","addImageModalManager","EventEmitter","handler","eventEmitter","TextStylingStylish","stylingType","startContainer","next","parentStylingElement","clonedRange","leftRange","rightRange","leftFragment","midFragment","rightFragment","replacement","leftElement","rightElement","tagNames","tagNamesAllowed","newNode","textStylingStylish","TextLinkingStylish","link","innerHTML","textLinkElement","boldElement","textOfLink","showLinkModalHandler","trimmedLink","textLinkingStylish","Popover","PageLayoutHelper","margin","popoverRect","viewportWidth","viewportHeight","PopoverManager","popover","arrowElement","trigger","triggerRect","popoverElement","delay","relatedTarget","TextLinkingManager","textLinkChildNodes","inputElement","textOfLinkInput","form","onSaveLink","linkElement","href","textLinkElements","textLinkingManager","DropdownMenu","classNames","repeat","label","className","unsafeHTML","DropdownTrigger","initialValue","DropdownManager","dropdownMenuElement","onPickOption","items","item","dropdownElement","CodeBlockViewManager","codeBlockBoxElementTagName","codeBlockBoxClassName","Compartment","language","javascript","python","cpp","codeBlockName","codeBlock","themeCompartment","btn","codeBlockBox","view","vscodeLight","themeLabel","vscodeDark","languageExtension","languageCompartment","languageLabel","currentTarget","activeValue","undo","redo","isDarkTheme","parentElement","boxElement","direction","stateDoc","totalLines","cursorPos","currentLine","codeBlockingManager","firstLine","lastLine","EditorView","skeleton","codeBlockElement","themeExtension","EditorState","lineNumbers","foldGutter","highlightSpecialChars","history","drawSelection","indentOnInput","bracketMatching","highlightActiveLine","closeBrackets","syntaxHighlighting","defaultHighlightStyle","keymap","defaultKeymap","historyKeymap","foldKeymap","indentWithTab","closeBracketsKeymap","startState","codeBlockView","CodeBlockingManager","codeBlockParent","EditorContent","focusNode","EditorFrame","editorFrame","ToolbarButton","TextStylingModule","triggers","textStylingModule","TextListingModule","textListingModule","BlockquoteModule","blockquoteModule","ImageBlockingModule","uploadImageURL","imageBlockingModule","TextLinkingModule","textLinkingModule","CodeBlockingModule","codeBlockingModule","EditorToolbar","editorToolbar","CodeVCNEditor","editorWrapperID","renderingMode","editorWrapper","configs","imageModule","codevcnEditor","init"],"mappings":"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","x_google_ignoreList":[0,6,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,61,72,73,74,75]}